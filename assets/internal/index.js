System.register("chunks:///internal.js",["./rollupPluginModLoBabelHelpers-5eee144e.js","cc"],(function(){var e,t,a,i,n,o,r,s,l,d,h,p,c,g,u,m,f,S,b,_,w,P,M,R,y,v,E,C;return{setters:[function(r){e=r._,t=r.a,a=r.b,i=r.c,n=r.d,o=r.e},function(e){r=e.cclegacy,s=e.gfx,l=e._decorator,d=e.Camera,h=e.CCBoolean,p=e.CCInteger,c=e.CCFloat,g=e.Material,u=e.Texture2D,m=e.rendering,f=e.Component,S=e.geometry,b=e.renderer,_=e.assert,w=e.Layers,P=e.PipelineEventType,M=e.Vec2,R=e.Vec4,y=e.sys,v=e.pipeline,E=e.Vec3,C=e.clamp}],execute:function(){r._RF.push({},"cbf30kCUX9A3K+QpVC6wnzx","builtin-pipeline-types",void 0);var T,A,x,D,L,O,F,N,G,Q,B,H,z,I,W,k,U,V,j,X,Y,K,q,Z,J,$,ee,te,ae=s.SampleCount;function ie(){return{enabled:!1,sampleCount:ae.X4}}function ne(){return{msaa:ie(),enableShadingScale:!1,shadingScale:.5,bloom:{enabled:!1,material:null,enableAlphaMask:!1,iterations:3,threshold:.8,intensity:2.3},toneMapping:{material:null},colorGrading:{enabled:!1,material:null,contribute:1,colorGradingMap:null},fsr:{enabled:!1,material:null,sharpness:.8},fxaa:{enabled:!1,material:null}}}function oe(e){e.msaa?function(e){void 0===e.enabled&&(e.enabled=!1),void 0===e.sampleCount&&(e.sampleCount=ae.X4)}(e.msaa):e.msaa=ie(),void 0===e.enableShadingScale&&(e.enableShadingScale=!1),void 0===e.shadingScale&&(e.shadingScale=.5),e.bloom?function(e){void 0===e.enabled&&(e.enabled=!1),void 0===e.material&&(e.material=null),void 0===e.enableAlphaMask&&(e.enableAlphaMask=!1),void 0===e.iterations&&(e.iterations=3),void 0===e.threshold&&(e.threshold=.8),void 0===e.intensity&&(e.intensity=2.3)}(e.bloom):e.bloom={enabled:!1,material:null,enableAlphaMask:!1,iterations:3,threshold:.8,intensity:2.3},e.toneMapping?function(e){void 0===e.material&&(e.material=null)}(e.toneMapping):e.toneMapping={material:null},e.colorGrading?function(e){void 0===e.enabled&&(e.enabled=!1),void 0===e.material&&(e.material=null),void 0===e.contribute&&(e.contribute=1),void 0===e.colorGradingMap&&(e.colorGradingMap=null)}(e.colorGrading):e.colorGrading={enabled:!1,material:null,contribute:1,colorGradingMap:null},e.fsr?function(e){void 0===e.enabled&&(e.enabled=!1),void 0===e.material&&(e.material=null),void 0===e.sharpness&&(e.sharpness=.8)}(e.fsr):e.fsr={enabled:!1,material:null,sharpness:.8},e.fxaa?function(e){void 0===e.enabled&&(e.enabled=!1),void 0===e.material&&(e.material=null)}(e.fxaa):e.fxaa={enabled:!1,material:null}}r._RF.pop(),r._RF.push({},"de1c2EHcMhAIYRZY5nyTQHG","builtin-pipeline-settings",void 0);var re=l.ccclass,se=l.disallowMultiple,le=l.executeInEditMode,de=l.menu,he=l.property,pe=l.requireComponent;l.type,T=re("BuiltinPipelineSettings"),A=de("Rendering/BuiltinPipelineSettings"),x=pe(d),D=he(h),L=he({displayName:"Editor Preview (Experimental)",type:h}),O=he({group:{id:"MSAA",name:"Multisample Anti-Aliasing"},type:h}),F=he({group:{id:"MSAA",name:"Multisample Anti-Aliasing",style:"section"},type:p,range:[2,4,2]}),N=he({group:{id:"ShadingScale",name:"ShadingScale",style:"section"},type:h}),G=he({tooltip:"i18n:postprocess.shadingScale",group:{id:"ShadingScale",name:"ShadingScale"},type:c,range:[.01,4,.01],slide:!0}),Q=he({group:{id:"Bloom",name:"Bloom (PostProcessing)",style:"section"},type:h}),B=he({group:{id:"Bloom",name:"Bloom (PostProcessing)",style:"section"},type:g}),H=he({tooltip:"i18n:bloom.enableAlphaMask",group:{id:"Bloom",name:"Bloom (PostProcessing)",style:"section"},type:h}),z=he({tooltip:"i18n:bloom.iterations",group:{id:"Bloom",name:"Bloom (PostProcessing)",style:"section"},type:p,range:[1,6,1],slide:!0}),I=he({tooltip:"i18n:bloom.threshold",group:{id:"Bloom",name:"Bloom (PostProcessing)",style:"section"},type:c,min:0}),W=he({group:{id:"Color Grading",name:"ColorGrading (LDR) (PostProcessing)",style:"section"},type:h}),k=he({group:{id:"Color Grading",name:"ColorGrading (LDR) (PostProcessing)",style:"section"},type:g}),U=he({tooltip:"i18n:color_grading.contribute",group:{id:"Color Grading",name:"ColorGrading (LDR) (PostProcessing)",style:"section"},type:c,range:[0,1,.01],slide:!0}),V=he({tooltip:"i18n:color_grading.originalMap",group:{id:"Color Grading",name:"ColorGrading (LDR) (PostProcessing)",style:"section"},type:u}),j=he({group:{id:"FXAA",name:"Fast Approximate Anti-Aliasing (PostProcessing)",style:"section"},type:h}),X=he({group:{id:"FXAA",name:"Fast Approximate Anti-Aliasing (PostProcessing)",style:"section"},type:g}),Y=he({group:{id:"FSR",name:"FidelityFX Super Resolution",style:"section"},type:h}),K=he({group:{id:"FSR",name:"FidelityFX Super Resolution",style:"section"},type:g}),q=he({group:{id:"FSR",name:"FidelityFX Super Resolution",style:"section"},type:c,range:[0,1,.01],slide:!0}),Z=he({group:{id:"ToneMapping",name:"ToneMapping",style:"section"},type:g}),T(J=A(J=x(J=se(J=le((ee=e(($=function(e){function o(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return t=e.call.apply(e,[this].concat(o))||this,a(t,"_settings",ee,i(t)),a(t,"_editorPreview",te,i(t)),t}t(o,e);var r=o.prototype;return r.getPipelineSettings=function(){return this._settings},r.onEnable=function(){oe(this._settings),this.getComponent(d).camera.pipelineSettings=this._settings},r.onDisable=function(){this.getComponent(d).camera.pipelineSettings=null},r._tryEnableEditorPreview=function(){void 0!==m&&(this._editorPreview?m.setEditorPipelineSettings(this._settings):this._disableEditorPreview())},r._disableEditorPreview=function(){void 0!==m&&(m.getEditorPipelineSettings()===this._settings&&m.setEditorPipelineSettings(null))},n(o,[{key:"editorPreview",get:function(){return this._editorPreview},set:function(e){this._editorPreview=e}},{key:"MsaaEnable",get:function(){return this._settings.msaa.enabled},set:function(e){this._settings.msaa.enabled=e}},{key:"msaaSampleCount",get:function(){return this._settings.msaa.sampleCount},set:function(e){e=Math.pow(2,Math.ceil(Math.log2(Math.max(e,2)))),e=Math.min(e,4),this._settings.msaa.sampleCount=e}},{key:"shadingScaleEnable",get:function(){return this._settings.enableShadingScale},set:function(e){this._settings.enableShadingScale=e}},{key:"shadingScale",get:function(){return this._settings.shadingScale},set:function(e){this._settings.shadingScale=e}},{key:"bloomEnable",get:function(){return this._settings.bloom.enabled},set:function(e){this._settings.bloom.enabled=e}},{key:"bloomMaterial",get:function(){return this._settings.bloom.material},set:function(e){this._settings.bloom.material!==e&&(this._settings.bloom.material=e)}},{key:"bloomEnableAlphaMask",get:function(){return this._settings.bloom.enableAlphaMask},set:function(e){this._settings.bloom.enableAlphaMask=e}},{key:"bloomIterations",get:function(){return this._settings.bloom.iterations},set:function(e){this._settings.bloom.iterations=e}},{key:"bloomThreshold",get:function(){return this._settings.bloom.threshold},set:function(e){this._settings.bloom.threshold=e}},{key:"bloomIntensity",get:function(){return this._settings.bloom.intensity},set:function(e){this._settings.bloom.intensity=e}},{key:"colorGradingEnable",get:function(){return this._settings.colorGrading.enabled},set:function(e){this._settings.colorGrading.enabled=e}},{key:"colorGradingMaterial",get:function(){return this._settings.colorGrading.material},set:function(e){this._settings.colorGrading.material!==e&&(this._settings.colorGrading.material=e)}},{key:"colorGradingContribute",get:function(){return this._settings.colorGrading.contribute},set:function(e){this._settings.colorGrading.contribute=e}},{key:"colorGradingMap",get:function(){return this._settings.colorGrading.colorGradingMap},set:function(e){this._settings.colorGrading.colorGradingMap=e}},{key:"fxaaEnable",get:function(){return this._settings.fxaa.enabled},set:function(e){this._settings.fxaa.enabled=e}},{key:"fxaaMaterial",get:function(){return this._settings.fxaa.material},set:function(e){this._settings.fxaa.material!==e&&(this._settings.fxaa.material=e)}},{key:"fsrEnable",get:function(){return this._settings.fsr.enabled},set:function(e){this._settings.fsr.enabled=e}},{key:"fsrMaterial",get:function(){return this._settings.fsr.material},set:function(e){this._settings.fsr.material!==e&&(this._settings.fsr.material=e)}},{key:"fsrSharpness",get:function(){return this._settings.fsr.sharpness},set:function(e){this._settings.fsr.sharpness=e}},{key:"toneMappingMaterial",get:function(){return this._settings.toneMapping.material},set:function(e){this._settings.toneMapping.material!==e&&(this._settings.toneMapping.material=e)}}]),o}(f)).prototype,"_settings",[he],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ne()}}),te=e($.prototype,"_editorPreview",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),e($.prototype,"editorPreview",[L],Object.getOwnPropertyDescriptor($.prototype,"editorPreview"),$.prototype),e($.prototype,"MsaaEnable",[O],Object.getOwnPropertyDescriptor($.prototype,"MsaaEnable"),$.prototype),e($.prototype,"msaaSampleCount",[F],Object.getOwnPropertyDescriptor($.prototype,"msaaSampleCount"),$.prototype),e($.prototype,"shadingScaleEnable",[N],Object.getOwnPropertyDescriptor($.prototype,"shadingScaleEnable"),$.prototype),e($.prototype,"shadingScale",[G],Object.getOwnPropertyDescriptor($.prototype,"shadingScale"),$.prototype),e($.prototype,"bloomEnable",[Q],Object.getOwnPropertyDescriptor($.prototype,"bloomEnable"),$.prototype),e($.prototype,"bloomMaterial",[B],Object.getOwnPropertyDescriptor($.prototype,"bloomMaterial"),$.prototype),e($.prototype,"bloomEnableAlphaMask",[H],Object.getOwnPropertyDescriptor($.prototype,"bloomEnableAlphaMask"),$.prototype),e($.prototype,"bloomIterations",[z],Object.getOwnPropertyDescriptor($.prototype,"bloomIterations"),$.prototype),e($.prototype,"bloomThreshold",[I],Object.getOwnPropertyDescriptor($.prototype,"bloomThreshold"),$.prototype),e($.prototype,"colorGradingEnable",[W],Object.getOwnPropertyDescriptor($.prototype,"colorGradingEnable"),$.prototype),e($.prototype,"colorGradingMaterial",[k],Object.getOwnPropertyDescriptor($.prototype,"colorGradingMaterial"),$.prototype),e($.prototype,"colorGradingContribute",[U],Object.getOwnPropertyDescriptor($.prototype,"colorGradingContribute"),$.prototype),e($.prototype,"colorGradingMap",[V],Object.getOwnPropertyDescriptor($.prototype,"colorGradingMap"),$.prototype),e($.prototype,"fxaaEnable",[j],Object.getOwnPropertyDescriptor($.prototype,"fxaaEnable"),$.prototype),e($.prototype,"fxaaMaterial",[X],Object.getOwnPropertyDescriptor($.prototype,"fxaaMaterial"),$.prototype),e($.prototype,"fsrEnable",[Y],Object.getOwnPropertyDescriptor($.prototype,"fsrEnable"),$.prototype),e($.prototype,"fsrMaterial",[K],Object.getOwnPropertyDescriptor($.prototype,"fsrMaterial"),$.prototype),e($.prototype,"fsrSharpness",[q],Object.getOwnPropertyDescriptor($.prototype,"fsrSharpness"),$.prototype),e($.prototype,"toneMappingMaterial",[Z],Object.getOwnPropertyDescriptor($.prototype,"toneMappingMaterial"),$.prototype),J=$))||J)||J)||J)||J);r._RF.pop(),r._RF.push({},"ff9b0GZzgRM/obMbHGfCNbk","builtin-pipeline",void 0);var ce=S.AABB,ge=S.Sphere,ue=S.intersect,me=s.ClearFlagBit,fe=s.Color,Se=s.Format,be=s.FormatFeatureBit,_e=s.LoadOp,we=s.StoreOp,Pe=s.TextureType,Me=s.Viewport,Re=b.scene,ye=Re.CameraUsage,ve=Re.CSMLevel,Ee=Re.LightType;function Ce(e){return!!(e.clearFlag&(me.COLOR|me.STENCIL<<1))}function Te(e,t,a,i,n,o){e.shadowFixedArea||e.csmLevel===ve.LEVEL_1?(n.left=0,n.top=0,n.width=Math.trunc(t),n.height=Math.trunc(a)):(n.left=Math.trunc(i%2*.5*t),n.top=o>0?Math.trunc(.5*(1-Math.floor(i/2))*a):Math.trunc(.5*Math.floor(i/2)*a),n.width=Math.trunc(.5*t),n.height=Math.trunc(.5*a)),n.left=Math.max(0,n.left),n.top=Math.max(0,n.top),n.width=Math.max(1,n.width),n.height=Math.max(1,n.height)}var Ae=function(){this.isWeb=!1,this.isWebGL1=!1,this.isWebGPU=!1,this.isMobile=!1,this.isHDR=!1,this.useFloatOutput=!1,this.toneMappingType=0,this.shadowEnabled=!1,this.shadowMapFormat=Se.R32F,this.shadowMapSize=new M(1,1),this.usePlanarShadow=!1,this.screenSpaceSignY=1,this.supportDepthSample=!1,this.mobileMaxSpotLightShadowMaps=1,this.platform=new R(0,0,0,0)};function xe(e,t){var a=be.SAMPLED_TEXTURE|be.LINEAR_FILTER,i=e.device;t.isWeb=!y.isNative,t.isWebGL1=i.gfxAPI===s.API.WEBGL,t.isWebGPU=i.gfxAPI===s.API.WEBGPU,t.isMobile=y.isMobile,t.isHDR=e.pipelineSceneData.isHDR,t.useFloatOutput=e.getMacroBool("CC_USE_FLOAT_OUTPUT"),t.toneMappingType=e.pipelineSceneData.postSettings.toneMappingType;var n=e.pipelineSceneData.shadows;t.shadowEnabled=n.enabled,t.shadowMapFormat=v.supportsR32FloatTexture(e.device)?Se.R32F:Se.RGBA8,t.shadowMapSize.set(n.size),t.usePlanarShadow=n.enabled&&n.type===b.scene.ShadowType.Planar,t.screenSpaceSignY=e.device.capabilities.screenSpaceSignY,t.supportDepthSample=(e.device.getFormatFeatures(Se.DEPTH_STENCIL)&a)===a;var o=i.capabilities.screenSpaceSignY;t.platform.x=t.isMobile?1:0,t.platform.w=.5*o+.5<<1|.5*i.capabilities.clipSpaceSignY+.5}var De=ne(),Le=function(){this.settings=De,this.isMainGameWindow=!1,this.renderWindowId=0,this.colorName="",this.depthStencilName="",this.enableFullPipeline=!1,this.enableProfiler=!1,this.remainingPasses=0,this.enableShadingScale=!1,this.shadingScale=1,this.nativeWidth=1,this.nativeHeight=1,this.width=1,this.height=1,this.enableHDR=!1,this.radianceFormat=s.Format.RGBA8,this.copyAndTonemapMaterial=null,this.enableStoreSceneDepth=!1},Oe=new fe(0,0,0,0);function Fe(e,t,a,i){_(!!a.copyAndTonemapMaterial);var n=e.addRenderPass(a.nativeWidth,a.nativeHeight,"cc-tone-mapping");return n.addRenderTarget(a.colorName,_e.CLEAR,we.STORE,Oe),n.addTexture(i,"inputTexture"),n.setVec4("g_platform",t.platform),n.addQueue(m.QueueHint.OPAQUE).addFullscreenQuad(a.copyAndTonemapMaterial,1),n}function Ne(e,t,a){return e.startsWith(t)?""+t+(1-Number(e.charAt(t.length)))+"_"+a:t+"0_"+a}var Ge=function(){function e(){this.lights=[],this.shadowEnabledSpotLights=[],this._sphere=ge.create(0,0,0,1),this._boundingBox=new ce,this._rangedDirLightBoundingBox=new ce(0,0,0,.5,.5,.5)}var t=e.prototype;return t.cullLights=function(e,t,a){this.lights.length=0,this.shadowEnabledSpotLights.length=0;for(var i,n=o(e.spotLights);!(i=n()).done;){var r=i.value;r.baked||(ge.set(this._sphere,r.position.x,r.position.y,r.position.z,r.range),ue.sphereFrustum(this._sphere,t)&&(r.shadowEnabled?this.shadowEnabledSpotLights.push(r):this.lights.push(r)))}for(var s,l=o(e.sphereLights);!(s=l()).done;){var d=s.value;d.baked||(ge.set(this._sphere,d.position.x,d.position.y,d.position.z,d.range),ue.sphereFrustum(this._sphere,t)&&this.lights.push(d))}for(var h,p=o(e.pointLights);!(h=p()).done;){var c=h.value;c.baked||(ge.set(this._sphere,c.position.x,c.position.y,c.position.z,c.range),ue.sphereFrustum(this._sphere,t)&&this.lights.push(c))}for(var g,u=o(e.rangedDirLights);!(g=u()).done;){var m=g.value;ce.transform(this._boundingBox,this._rangedDirLightBoundingBox,m.node.getWorldMatrix()),ue.aabbFrustum(this._boundingBox,t)&&this.lights.push(m)}a&&this.shadowEnabledSpotLights.sort((function(e,t){return E.squaredDistance(a,e.position)-E.squaredDistance(a,t.position)}))},t._addLightQueues=function(e,t){for(var a,i=o(this.lights);!(a=i()).done;){var n=a.value,r=t.addQueue(m.QueueHint.BLEND,"forward-add");switch(n.type){case Ee.SPHERE:r.name="sphere-light";break;case Ee.SPOT:r.name="spot-light";break;case Ee.POINT:r.name="point-light";break;case Ee.RANGED_DIRECTIONAL:r.name="ranged-directional-light";break;default:r.name="unknown-light"}r.addScene(e,m.SceneFlags.BLEND,n)}},t.addSpotlightShadowPasses=function(e,t,a){for(var i,n=0,r=o(this.shadowEnabledSpotLights);!(i=r()).done;){var s=i.value,l=e.pipelineSceneData.shadows.size,d=e.addRenderPass(l.x,l.y,"default");if(d.name="SpotLightShadowPass"+n,d.addRenderTarget("SpotShadowMap"+n,_e.CLEAR,we.STORE,new fe(1,1,1,1)),d.addDepthStencil("SpotShadowDepth"+n,_e.CLEAR,we.DISCARD),d.addQueue(m.QueueHint.NONE,"shadow-caster").addScene(t,m.SceneFlags.OPAQUE|m.SceneFlags.MASK|m.SceneFlags.SHADOW_CASTER).useLightFrustum(s),++n>=a)break}},t.addLightQueues=function(e,t,a){this._addLightQueues(t,e);for(var i,n=0,r=o(this.shadowEnabledSpotLights);!(i=r()).done;){var s=i.value;if(e.addTexture("SpotShadowMap"+n,"cc_spotShadowMap"),e.addQueue(m.QueueHint.BLEND,"forward-add").addScene(t,m.SceneFlags.BLEND,s),++n>=a)break}},t.addLightPasses=function(e,t,a,i,n,r,s,l,d,h){this._addLightQueues(s,h);for(var p,c=0,g=d.pipelineSceneData.shadows.size,u=o(this.shadowEnabledSpotLights);!(p=u()).done;){var f=p.value,S=d.addRenderPass(g.x,g.y,"default");S.name="SpotlightShadowPass",S.addRenderTarget("ShadowMap"+i,_e.CLEAR,we.STORE,new fe(1,1,1,1)),S.addDepthStencil("ShadowDepth"+i,_e.CLEAR,we.DISCARD),S.addQueue(m.QueueHint.NONE,"shadow-caster").addScene(s,m.SceneFlags.OPAQUE|m.SceneFlags.MASK|m.SceneFlags.SHADOW_CASTER).useLightFrustum(f);var b=++c===this.shadowEnabledSpotLights.length?a:we.STORE;(h=d.addRenderPass(n,r,"default")).name="SpotlightWithShadowMap",h.setViewport(l),h.addRenderTarget(e,_e.LOAD),h.addDepthStencil(t,_e.LOAD,b),h.addTexture("ShadowMap"+i,"cc_spotShadowMap"),h.addQueue(m.QueueHint.BLEND,"forward-add").addScene(s,m.SceneFlags.BLEND,f)}return h},t.isMultipleLightPassesNeeded=function(){return this.shadowEnabledSpotLights.length>0},e}(),Qe=function(){function e(){this.forwardLighting=new Ge,this._viewport=new Me,this._clearColor=new fe(0,0,0,1),this._reflectionProbeClearColor=new E(0,0,0)}var t=e.prototype;return t.getConfigOrder=function(){return e.ConfigOrder},t.getRenderOrder=function(){return e.RenderOrder},t.configCamera=function(e,t,a){a.enableMainLightShadowMap=t.shadowEnabled&&!t.usePlanarShadow&&!!e.scene&&!!e.scene.mainLight&&e.scene.mainLight.shadowEnabled,a.enableMainLightPlanarShadowMap=t.shadowEnabled&&t.usePlanarShadow&&!!e.scene&&!!e.scene.mainLight&&e.scene.mainLight.shadowEnabled,a.enablePlanarReflectionProbe=a.isMainGameWindow||e.cameraUsage===ye.SCENE_VIEW||e.cameraUsage===ye.GAME_VIEW,a.enableMSAA=a.settings.msaa.enabled&&!a.enableStoreSceneDepth&&!t.isWeb&&!t.isWebGL1,a.enableSingleForwardPass=t.isMobile||a.enableMSAA,++a.remainingPasses},t.windowResize=function(e,t,a,i,n,o,r){var s=m.ResourceFlags,l=m.ResourceResidency,d=i.renderWindowId,h=a.settings,p=a.enableShadingScale?Math.max(Math.floor(o*a.shadingScale),1):o,c=a.enableShadingScale?Math.max(Math.floor(r*a.shadingScale),1):r;if(a.enableMSAA&&(a.enableHDR?e.addTexture("MsaaRadiance"+d,Pe.TEX2D,a.radianceFormat,p,c,1,1,1,h.msaa.sampleCount,s.COLOR_ATTACHMENT,l.MEMORYLESS):e.addTexture("MsaaRadiance"+d,Pe.TEX2D,Se.RGBA8,p,c,1,1,1,h.msaa.sampleCount,s.COLOR_ATTACHMENT,l.MEMORYLESS),e.addTexture("MsaaDepthStencil"+d,Pe.TEX2D,Se.DEPTH_STENCIL,p,c,1,1,1,h.msaa.sampleCount,s.DEPTH_STENCIL_ATTACHMENT,l.MEMORYLESS)),e.addRenderTarget("ShadowMap"+d,t.shadowMapFormat,t.shadowMapSize.x,t.shadowMapSize.y),e.addDepthStencil("ShadowDepth"+d,Se.DEPTH_STENCIL,t.shadowMapSize.x,t.shadowMapSize.y),a.enableSingleForwardPass)for(var g=t.mobileMaxSpotLightShadowMaps,u=0;u!==g;++u)e.addRenderTarget("SpotShadowMap"+u,t.shadowMapFormat,t.shadowMapSize.x,t.shadowMapSize.y),e.addDepthStencil("SpotShadowDepth"+u,Se.DEPTH_STENCIL,t.shadowMapSize.x,t.shadowMapSize.y)},t.setup=function(e,t,a,i,n){var o=i.window.renderWindowId,r=i.scene,s=r.mainLight;--a.remainingPasses,_(a.remainingPasses>=0),this.forwardLighting.cullLights(r,i.frustum),a.enableMainLightShadowMap&&(_(!!s),this._addCascadedShadowMapPass(e,t,o,s,i)),a.enableSingleForwardPass&&this.forwardLighting.addSpotlightShadowPasses(e,i,t.mobileMaxSpotLightShadowMaps),this._tryAddReflectionProbePasses(e,a,o,s,i.scene),a.remainingPasses>0||a.enableShadingScale?(n.colorName=a.enableShadingScale?"ScaledRadiance0_"+o:"Radiance0_"+o,n.depthStencilName=a.enableShadingScale?"ScaledSceneDepth_"+o:"SceneDepth_"+o):(n.colorName=a.colorName,n.depthStencilName=a.depthStencilName);var l=this._addForwardRadiancePasses(e,t,a,o,i,a.width,a.height,s,n.colorName,n.depthStencilName,!a.enableMSAA,a.enableStoreSceneDepth?we.STORE:we.DISCARD);return a.enableStoreSceneDepth||(n.depthStencilName=""),0===a.remainingPasses&&a.enableShadingScale?Fe(e,t,a,n.colorName):l},t._addCascadedShadowMapPass=function(e,t,a,i,n){var o=m.QueueHint,r=m.SceneFlags,s=e.pipelineSceneData.shadows.size,l=s.x,d=s.y,h=this._viewport;h.left=h.top=0,h.width=l,h.height=d;var p=e.addRenderPass(l,d,"default");p.name="CascadedShadowMap",p.addRenderTarget("ShadowMap"+a,_e.CLEAR,we.STORE,new fe(1,1,1,1)),p.addDepthStencil("ShadowDepth"+a,_e.CLEAR,we.DISCARD);for(var c=e.pipelineSceneData.csmSupported?i.csmLevel:1,g=0;g!==c;++g){Te(i,l,d,g,this._viewport,t.screenSpaceSignY);var u=p.addQueue(o.NONE,"shadow-caster");t.isWebGPU||u.setViewport(this._viewport),u.addScene(n,r.OPAQUE|r.MASK|r.SHADOW_CASTER).useLightFrustum(i,g)}},t._tryAddReflectionProbePasses=function(e,t,a,i,n){var l=r.internal.reflectionProbeManager;if(l)for(var d,h=m.ResourceResidency,p=l.getProbes(),c=0,g=o(p);!(d=g()).done;){var u=d.value;if(u.needRender){var f=u.renderArea(),S=Math.max(Math.floor(f.x),1),_=Math.max(Math.floor(f.y),1);if(u.probeType===b.scene.ProbeType.PLANAR){if(!t.enablePlanarReflectionProbe)continue;var w=u.realtimePlanarTexture.window,P="PlanarProbeRT"+c,M="PlanarProbeDS"+c;e.addRenderWindow(P,t.radianceFormat,S,_,w),e.addDepthStencil(M,s.Format.DEPTH_STENCIL,S,_,h.MEMORYLESS);var R=e.addRenderPass(S,_,"default");R.name="PlanarReflectionProbe"+c,this._buildReflectionProbePass(R,t,a,u.camera,P,M,i,n)}if(4===++c)break}}},t._buildReflectionProbePass=function(e,t,a,i,n,o,r,s){void 0===s&&(s=null);var l=m.QueueHint,d=m.SceneFlags,h=t.enableMSAA?we.DISCARD:we.STORE;if(Ce(i)){this._reflectionProbeClearColor.x=i.clearColor.x,this._reflectionProbeClearColor.y=i.clearColor.y,this._reflectionProbeClearColor.z=i.clearColor.z;var p=m.packRGBE(this._reflectionProbeClearColor);this._clearColor.x=p.x,this._clearColor.y=p.y,this._clearColor.z=p.z,this._clearColor.w=p.w,e.addRenderTarget(n,_e.CLEAR,h,this._clearColor)}else e.addRenderTarget(n,_e.LOAD,h);i.clearFlag&me.DEPTH_STENCIL?e.addDepthStencil(o,_e.CLEAR,we.DISCARD,i.clearDepth,i.clearStencil,i.clearFlag&me.DEPTH_STENCIL):e.addDepthStencil(o,_e.LOAD,we.DISCARD),t.enableMainLightShadowMap&&e.addTexture("ShadowMap"+a,"cc_shadowMap"),e.addQueue(l.NONE,"reflect-map").addScene(i,d.OPAQUE|d.MASK|d.REFLECTION_PROBE,r||void 0,s||void 0)},t._addForwardRadiancePasses=function(e,t,a,i,n,o,r,s,l,d,h,p){void 0===h&&(h=!1),void 0===p&&(p=we.DISCARD);var c=m.QueueHint,g=m.SceneFlags,u=n.clearColor;this._clearColor.x=u.x,this._clearColor.y=u.y,this._clearColor.z=u.z,this._clearColor.w=u.w;var f=n.viewport;this._viewport.left=Math.round(f.x*o),this._viewport.top=Math.round(f.y*r),this._viewport.width=Math.max(Math.round(f.width*o),1),this._viewport.height=Math.max(Math.round(f.height*r),1);var S=!h&&a.enableMSAA;_(!S||a.enableSingleForwardPass);var b=a.enableSingleForwardPass?this._addForwardSingleRadiancePass(e,t,a,i,n,S,o,r,s,l,d,p):this._addForwardMultipleRadiancePasses(e,a,i,n,o,r,s,l,d,p);a.enableMainLightPlanarShadowMap&&this._addPlanarShadowQueue(n,s,b);var w=g.BLEND|(n.geometryRenderer?g.GEOMETRY:g.NONE);return b.addQueue(c.BLEND).addScene(n,w,s||void 0),b},t._addForwardSingleRadiancePass=function(e,t,a,i,n,o,r,s,l,d,h,p){var c;if(_(a.enableSingleForwardPass),o){var g="MsaaRadiance"+i,u="MsaaDepthStencil"+i,m=a.settings.msaa.sampleCount,f=e.addMultisampleRenderPass(r,s,m,0,"default");f.name="MsaaForwardPass",this._buildForwardMainLightPass(f,a,i,n,g,u,we.DISCARD,l),f.resolveRenderTarget(g,d),c=f}else(c=e.addRenderPass(r,s,"default")).name="ForwardPass",this._buildForwardMainLightPass(c,a,i,n,d,h,p,l);return _(void 0!==c),this.forwardLighting.addLightQueues(c,n,t.mobileMaxSpotLightShadowMaps),c},t._addForwardMultipleRadiancePasses=function(e,t,a,i,n,o,r,s,l,d){_(!t.enableSingleForwardPass);var h=e.addRenderPass(n,o,"default");h.name="ForwardPass";var p=this.forwardLighting.isMultipleLightPassesNeeded()?we.STORE:d;return this._buildForwardMainLightPass(h,t,a,i,s,l,p,r),h=this.forwardLighting.addLightPasses(s,l,d,a,n,o,i,this._viewport,e,h)},t._buildForwardMainLightPass=function(e,t,a,i,n,o,r,s,l){void 0===l&&(l=null);var d=m.QueueHint,h=m.SceneFlags;e.setViewport(this._viewport);var p=t.enableMSAA?we.DISCARD:we.STORE;Ce(i)?e.addRenderTarget(n,_e.CLEAR,p,this._clearColor):e.addRenderTarget(n,_e.LOAD,p),i.clearFlag&me.DEPTH_STENCIL?e.addDepthStencil(o,_e.CLEAR,r,i.clearDepth,i.clearStencil,i.clearFlag&me.DEPTH_STENCIL):e.addDepthStencil(o,_e.LOAD,r),t.enableMainLightShadowMap&&e.addTexture("ShadowMap"+a,"cc_shadowMap"),e.addQueue(d.NONE).addScene(i,h.OPAQUE|h.MASK,s||void 0,l||void 0)},t._addPlanarShadowQueue=function(e,t,a){var i=m.QueueHint,n=m.SceneFlags;a.addQueue(i.BLEND,"planar-shadow").addScene(e,n.SHADOW_CASTER|n.PLANAR_SHADOW|n.BLEND,t||void 0)},e}();Qe.ConfigOrder=100,Qe.RenderOrder=100;var Be=function(){function e(){this._clearColorTransparentBlack=new fe(0,0,0,0),this._bloomParams=new R(0,0,0,0),this._bloomTexSize=new R(0,0,0,0),this._bloomWidths=[],this._bloomHeights=[],this._bloomTexNames=[]}var t=e.prototype;return t.getConfigOrder=function(){return 0},t.getRenderOrder=function(){return 200},t.configCamera=function(e,t,a){a.enableBloom=a.settings.bloom.enabled&&!!a.settings.bloom.material,a.enableBloom&&++a.remainingPasses},t.windowResize=function(e,t,a,i){if(a.enableBloom)for(var n=i.renderWindowId,o=a.width,r=a.height,s=0;s!==a.settings.bloom.iterations+1;++s)o=Math.max(Math.floor(o/2),1),r=Math.max(Math.floor(r/2),1),e.addRenderTarget("BloomTex"+n+"_"+s,a.radianceFormat,o,r)},t.setup=function(e,t,a,i,n,o){if(!a.enableBloom)return o;--a.remainingPasses,_(a.remainingPasses>=0);var r=i.window.renderWindowId;return _(!!a.settings.bloom.material),this._addKawaseDualFilterBloomPasses(e,t,a,a.settings,a.settings.bloom.material,r,a.width,a.height,n.colorName)},t._addKawaseDualFilterBloomPasses=function(e,t,a,i,n,o,r,s,l){var d=m.QueueHint,h=i.bloom.iterations,p=h+1;this._bloomWidths.length=p,this._bloomHeights.length=p,this._bloomWidths[0]=Math.max(Math.floor(r/2),1),this._bloomHeights[0]=Math.max(Math.floor(s/2),1);for(var c=1;c!==p;++c)this._bloomWidths[c]=Math.max(Math.floor(this._bloomWidths[c-1]/2),1),this._bloomHeights[c]=Math.max(Math.floor(this._bloomHeights[c-1]/2),1);this._bloomTexNames.length=p;for(var g=0;g!==p;++g)this._bloomTexNames[g]="BloomTex"+o+"_"+g;this._bloomParams.x=t.useFloatOutput?1:0,this._bloomParams.x=0,this._bloomParams.z=i.bloom.threshold,this._bloomParams.w=i.bloom.enableAlphaMask?1:0;var u=e.addRenderPass(this._bloomWidths[0],this._bloomHeights[0],"cc-bloom-prefilter");u.addRenderTarget(this._bloomTexNames[0],_e.CLEAR,we.STORE,this._clearColorTransparentBlack),u.addTexture(l,"inputTexture"),u.setVec4("g_platform",t.platform),u.setVec4("bloomParams",this._bloomParams),u.addQueue(d.OPAQUE).addFullscreenQuad(n,0);for(var f=1;f!==p;++f){var S=e.addRenderPass(this._bloomWidths[f],this._bloomHeights[f],"cc-bloom-downsample");S.addRenderTarget(this._bloomTexNames[f],_e.CLEAR,we.STORE,this._clearColorTransparentBlack),S.addTexture(this._bloomTexNames[f-1],"bloomTexture"),this._bloomTexSize.x=this._bloomWidths[f-1],this._bloomTexSize.y=this._bloomHeights[f-1],S.setVec4("g_platform",t.platform),S.setVec4("bloomTexSize",this._bloomTexSize),S.addQueue(d.OPAQUE).addFullscreenQuad(n,1)}for(var b=h;b-- >0;){var _=e.addRenderPass(this._bloomWidths[b],this._bloomHeights[b],"cc-bloom-upsample");_.addRenderTarget(this._bloomTexNames[b],_e.CLEAR,we.STORE,this._clearColorTransparentBlack),_.addTexture(this._bloomTexNames[b+1],"bloomTexture"),this._bloomTexSize.x=this._bloomWidths[b+1],this._bloomTexSize.y=this._bloomHeights[b+1],_.setVec4("g_platform",t.platform),_.setVec4("bloomTexSize",this._bloomTexSize),_.addQueue(d.OPAQUE).addFullscreenQuad(n,2)}var w=e.addRenderPass(r,s,"cc-bloom-combine");return w.addRenderTarget(l,_e.LOAD,we.STORE),w.addTexture(this._bloomTexNames[0],"bloomTexture"),w.setVec4("g_platform",t.platform),w.setVec4("bloomParams",this._bloomParams),w.addQueue(d.BLEND).addFullscreenQuad(n,3),0===a.remainingPasses?Fe(e,t,a,l):w},e}(),He=function(){function e(){this._colorGradingTexSize=new M(0,0)}var t=e.prototype;return t.getConfigOrder=function(){return 0},t.getRenderOrder=function(){return 300},t.configCamera=function(e,t,a){var i=a.settings;a.enableColorGrading=i.colorGrading.enabled&&!!i.colorGrading.material&&!!i.colorGrading.colorGradingMap,a.enableToneMapping=a.enableHDR||a.enableColorGrading,a.enableToneMapping&&++a.remainingPasses},t.windowResize=function(e,t,a){a.enableColorGrading&&(_(!!a.settings.colorGrading.material),a.settings.colorGrading.material.setProperty("colorGradingMap",a.settings.colorGrading.colorGradingMap))},t.setup=function(e,t,a,i,n,o){if(!a.enableToneMapping)return o;if(--a.remainingPasses,_(a.remainingPasses>=0),0===a.remainingPasses)return this._addCopyAndTonemapPass(e,t,a,a.width,a.height,n.colorName,a.colorName);var r=a.renderWindowId,s=a.enableShadingScale?"ScaledLdrColor":"LdrColor",l=Ne(n.colorName,s,r),d=n.colorName;return n.colorName=l,this._addCopyAndTonemapPass(e,t,a,a.width,a.height,d,l)},t._addCopyAndTonemapPass=function(e,t,a,i,n,o,r){var s,l=a.settings;if(a.enableColorGrading){_(!!l.colorGrading.material),_(!!l.colorGrading.colorGradingMap);var d=l.colorGrading.colorGradingMap;this._colorGradingTexSize.x=d.width,this._colorGradingTexSize.y=d.height;var h=d.width===d.height;(s=h?e.addRenderPass(i,n,"cc-color-grading-8x8"):e.addRenderPass(i,n,"cc-color-grading-nx1")).addRenderTarget(r,_e.CLEAR,we.STORE,Oe),s.addTexture(o,"sceneColorMap"),s.setVec4("g_platform",t.platform),s.setVec2("lutTextureSize",this._colorGradingTexSize),s.setFloat("contribute",l.colorGrading.contribute),s.addQueue(m.QueueHint.OPAQUE).addFullscreenQuad(l.colorGrading.material,h?1:0)}else(s=e.addRenderPass(i,n,"cc-tone-mapping")).addRenderTarget(r,_e.CLEAR,we.STORE,Oe),s.addTexture(o,"inputTexture"),s.setVec4("g_platform",t.platform),l.toneMapping.material?s.addQueue(m.QueueHint.OPAQUE).addFullscreenQuad(l.toneMapping.material,0):(_(!!a.copyAndTonemapMaterial),s.addQueue(m.QueueHint.OPAQUE).addFullscreenQuad(a.copyAndTonemapMaterial,0));return s},e}(),ze=function(){function e(){this._fxaaParams=new R(0,0,0,0)}var t=e.prototype;return t.getConfigOrder=function(){return 0},t.getRenderOrder=function(){return 400},t.configCamera=function(e,t,a){a.enableFXAA=a.settings.fxaa.enabled&&!!a.settings.fxaa.material,a.enableFXAA&&++a.remainingPasses},t.setup=function(e,t,a,i,n,o){if(!a.enableFXAA)return o;--a.remainingPasses,_(a.remainingPasses>=0);var r=a.renderWindowId,s=a.enableShadingScale?"ScaledLdrColor":"LdrColor",l=Ne(n.colorName,s,r);if(_(!!a.settings.fxaa.material),0===a.remainingPasses)return a.enableShadingScale?(this._addFxaaPass(e,t,a.settings.fxaa.material,a.width,a.height,n.colorName,l),Fe(e,t,a,l)):(_(a.width===a.nativeWidth),_(a.height===a.nativeHeight),this._addFxaaPass(e,t,a.settings.fxaa.material,a.width,a.height,n.colorName,a.colorName));var d=n.colorName;return n.colorName=l,this._addFxaaPass(e,t,a.settings.fxaa.material,a.width,a.height,d,l)},t._addFxaaPass=function(e,t,a,i,n,o,r){this._fxaaParams.x=i,this._fxaaParams.y=n,this._fxaaParams.z=1/i,this._fxaaParams.w=1/n;var s=e.addRenderPass(i,n,"cc-fxaa");return s.addRenderTarget(r,_e.CLEAR,we.STORE,Oe),s.addTexture(o,"sceneColorMap"),s.setVec4("g_platform",t.platform),s.setVec4("texSize",this._fxaaParams),s.addQueue(m.QueueHint.OPAQUE).addFullscreenQuad(a,0),s},e}(),Ie=function(){function e(){this._fsrParams=new R(0,0,0,0),this._fsrTexSize=new R(0,0,0,0)}var t=e.prototype;return t.getConfigOrder=function(){return 0},t.getRenderOrder=function(){return 500},t.configCamera=function(e,t,a){a.enableFSR=a.settings.fsr.enabled&&!!a.settings.fsr.material&&a.enableShadingScale&&a.shadingScale<1,a.enableFSR&&++a.remainingPasses},t.setup=function(e,t,a,i,n,o){if(!a.enableFSR)return o;--a.remainingPasses;var r=n.colorName,s=0===a.remainingPasses?a.colorName:Ne(n.colorName,"UiColor",a.renderWindowId);return n.colorName=s,_(!!a.settings.fsr.material),this._addFsrPass(e,t,a,a.settings,a.settings.fsr.material,a.renderWindowId,a.width,a.height,r,a.nativeWidth,a.nativeHeight,s)},t._addFsrPass=function(e,t,a,i,n,o,r,s,l,d,h,p){this._fsrTexSize.x=r,this._fsrTexSize.y=s,this._fsrTexSize.z=d,this._fsrTexSize.w=h,this._fsrParams.x=C(1-i.fsr.sharpness,.02,.98);var c=Ne(p,"UiColor",o),g=e.addRenderPass(d,h,"cc-fsr-easu");g.addRenderTarget(c,_e.CLEAR,we.STORE,Oe),g.addTexture(l,"outputResultMap"),g.setVec4("g_platform",t.platform),g.setVec4("fsrTexSize",this._fsrTexSize),g.addQueue(m.QueueHint.OPAQUE).addFullscreenQuad(n,0);var u=e.addRenderPass(d,h,"cc-fsr-rcas");return u.addRenderTarget(p,_e.CLEAR,we.STORE,Oe),u.addTexture(c,"outputResultMap"),u.setVec4("g_platform",t.platform),u.setVec4("fsrTexSize",this._fsrTexSize),u.setVec4("fsrParams",this._fsrParams),u.addQueue(m.QueueHint.OPAQUE).addFullscreenQuad(n,1),u},e}(),We=function(){function e(){}var t=e.prototype;return t.getConfigOrder=function(){return 0},t.getRenderOrder=function(){return 1e3},t.setup=function(e,t,a,i,n,o){_(!!o);var r=m.SceneFlags.UI;return a.enableProfiler&&(r|=m.SceneFlags.PROFILER,o.showStatistics=!0),o.addQueue(m.QueueHint.BLEND,"default","default").addScene(i,r),o},e}();if(m){var ke=m.QueueHint,Ue=m.SceneFlags,Ve=function(){function e(){this._pipelineEvent=r.director.root.pipelineEvent,this._forwardPass=new Qe,this._bloomPass=new Be,this._toneMappingPass=new He,this._fxaaPass=new ze,this._fsrPass=new Ie,this._uiPass=new We,this._clearColor=new fe(0,0,0,1),this._viewport=new Me,this._configs=new Ae,this._cameraConfigs=new Le,this._copyAndTonemapMaterial=new g,this._initialized=!1,this._passBuilders=[]}var t=e.prototype;return t._setupPipelinePreview=function(e,t){if(e.cameraUsage===ye.SCENE_VIEW||e.cameraUsage===ye.PREVIEW){var a=m.getEditorPipelineSettings();t.settings=a||De}else e.pipelineSettings?t.settings=e.pipelineSettings:t.settings=De},t._preparePipelinePasses=function(e){var t=this._passBuilders;t.length=0;var a=e.settings;if(a._passes){for(var i,n=o(a._passes);!(i=n()).done;){var r=i.value;t.push(r)}_(t.length===a._passes.length)}t.push(this._forwardPass),a.bloom.enabled&&t.push(this._bloomPass),t.push(this._toneMappingPass),a.fxaa.enabled&&t.push(this._fxaaPass),a.fsr.enabled&&t.push(this._fsrPass),t.push(this._uiPass)},t._setupBuiltinCameraConfigs=function(e,t,a){var i=e.window,n=e.cameraUsage===ye.GAME&&!!i.swapchain;a.isMainGameWindow=n,a.renderWindowId=i.renderWindowId,a.colorName=i.colorName,a.depthStencilName=i.depthStencilName,a.enableFullPipeline=0!=(e.visibility&w.Enum.DEFAULT),a.enableProfiler=false,a.remainingPasses=0,a.shadingScale=a.settings.shadingScale,a.enableShadingScale=a.settings.enableShadingScale&&1!==a.shadingScale,a.nativeWidth=Math.max(Math.floor(i.width),1),a.nativeHeight=Math.max(Math.floor(i.height),1),a.width=a.enableShadingScale?Math.max(Math.floor(a.nativeWidth*a.shadingScale),1):a.nativeWidth,a.height=a.enableShadingScale?Math.max(Math.floor(a.nativeHeight*a.shadingScale),1):a.nativeHeight,a.enableHDR=a.enableFullPipeline&&t.useFloatOutput,a.radianceFormat=a.enableHDR?s.Format.RGBA16F:s.Format.RGBA8,a.copyAndTonemapMaterial=this._copyAndTonemapMaterial,a.enableStoreSceneDepth=!1},t._setupCameraConfigs=function(e,t,a){this._setupPipelinePreview(e,a),this._preparePipelinePasses(a),this._passBuilders.sort((function(e,t){return e.getConfigOrder()-t.getConfigOrder()})),this._setupBuiltinCameraConfigs(e,t,a);for(var i,n=o(this._passBuilders);!(i=n()).done;){var r=i.value;r.configCamera&&r.configCamera(e,t,a)}},t.windowResize=function(e,t,a,i,n){xe(e,this._configs),this._setupCameraConfigs(a,this._configs,this._cameraConfigs);var r=t.renderWindowId;e.addRenderWindow(this._cameraConfigs.colorName,Se.RGBA8,i,n,t,this._cameraConfigs.depthStencilName);var s=this._cameraConfigs.width,l=this._cameraConfigs.height;this._cameraConfigs.enableShadingScale?(e.addDepthStencil("ScaledSceneDepth_"+r,Se.DEPTH_STENCIL,s,l),e.addRenderTarget("ScaledRadiance0_"+r,this._cameraConfigs.radianceFormat,s,l),e.addRenderTarget("ScaledRadiance1_"+r,this._cameraConfigs.radianceFormat,s,l),e.addRenderTarget("ScaledLdrColor0_"+r,Se.RGBA8,s,l),e.addRenderTarget("ScaledLdrColor1_"+r,Se.RGBA8,s,l)):(e.addDepthStencil("SceneDepth_"+r,Se.DEPTH_STENCIL,s,l),e.addRenderTarget("Radiance0_"+r,this._cameraConfigs.radianceFormat,s,l),e.addRenderTarget("Radiance1_"+r,this._cameraConfigs.radianceFormat,s,l),e.addRenderTarget("LdrColor0_"+r,Se.RGBA8,s,l),e.addRenderTarget("LdrColor1_"+r,Se.RGBA8,s,l)),e.addRenderTarget("UiColor0_"+r,Se.RGBA8,i,n),e.addRenderTarget("UiColor1_"+r,Se.RGBA8,i,n);for(var d,h=o(this._passBuilders);!(d=h()).done;){var p=d.value;p.windowResize&&p.windowResize(e,this._configs,this._cameraConfigs,t,a,i,n)}},t.setup=function(e,t){if(!this._initMaterials(t))for(var a,i=o(e);!(a=i()).done;){var n=a.value;n.scene&&n.window&&(this._setupCameraConfigs(n,this._configs,this._cameraConfigs),this._pipelineEvent.emit(P.RENDER_CAMERA_BEGIN,n),this._cameraConfigs.enableFullPipeline?this._buildForwardPipeline(t,n,n.scene,this._passBuilders):this._buildSimplePipeline(t,n),this._pipelineEvent.emit(P.RENDER_CAMERA_END,n))}},t._buildSimplePipeline=function(e,t){var a=Math.max(Math.floor(t.window.width),1),i=Math.max(Math.floor(t.window.height),1),n=this._cameraConfigs.colorName,o=this._cameraConfigs.depthStencilName,r=t.viewport;this._viewport.left=Math.round(r.x*a),this._viewport.top=Math.round(r.y*i),this._viewport.width=Math.max(Math.round(r.width*a),1),this._viewport.height=Math.max(Math.round(r.height*i),1);var s=t.clearColor;this._clearColor.x=s.x,this._clearColor.y=s.y,this._clearColor.z=s.z,this._clearColor.w=s.w;var l=e.addRenderPass(a,i,"default");Ce(t)?l.addRenderTarget(n,_e.CLEAR,we.STORE,this._clearColor):l.addRenderTarget(n,_e.LOAD,we.STORE),t.clearFlag&me.DEPTH_STENCIL?l.addDepthStencil(o,_e.CLEAR,we.DISCARD,t.clearDepth,t.clearStencil,t.clearFlag&me.DEPTH_STENCIL):l.addDepthStencil(o,_e.LOAD,we.DISCARD),l.setViewport(this._viewport),l.addQueue(ke.OPAQUE).addScene(t,Ue.OPAQUE);var d=Ue.BLEND|Ue.UI;this._cameraConfigs.enableProfiler&&(d|=Ue.PROFILER,l.showStatistics=!0),l.addQueue(ke.BLEND).addScene(t,d)},t._buildForwardPipeline=function(e,t,a,i){!function(e){e.sort((function(e,t){return e.getRenderOrder()-t.getRenderOrder()}))}(i);for(var n,r={colorName:"",depthStencilName:""},s=void 0,l=o(i);!(n=l()).done;){var d=n.value;d.setup&&(s=d.setup(e,this._configs,this._cameraConfigs,t,r,s))}_(0===this._cameraConfigs.remainingPasses)},t._initMaterials=function(e){return this._initialized?0:(xe(e,this._configs),this._copyAndTonemapMaterial._uuid="builtin-pipeline-tone-mapping-material",this._copyAndTonemapMaterial.initialize({effectName:"pipeline/post-process/tone-mapping"}),this._copyAndTonemapMaterial.effectAsset&&(this._initialized=!0),this._initialized?0:1)},e}();m.setCustomPipeline("Builtin",new Ve)}r._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/internal', 'chunks:///internal.js'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZpbGU6L0M6L1Byb2dyYW1EYXRhL2NvY29zL2VkaXRvcnMvQ3JlYXRvci8zLjguNi9yZXNvdXJjZXMvcmVzb3VyY2VzLzNkL2VuZ2luZS9lZGl0b3IvYXNzZXRzL2RlZmF1bHRfcmVuZGVycGlwZWxpbmUvZmlsZTovQzovUHJvZ3JhbURhdGEvY29jb3MvZWRpdG9ycy9DcmVhdG9yLzMuOC42L3Jlc291cmNlcy9yZXNvdXJjZXMvM2QvZW5naW5lL2VkaXRvci9hc3NldHMvZGVmYXVsdF9yZW5kZXJwaXBlbGluZS9idWlsdGluLXBpcGVsaW5lLXR5cGVzLnRzIiwiZmlsZTovQzovUHJvZ3JhbURhdGEvY29jb3MvZWRpdG9ycy9DcmVhdG9yLzMuOC42L3Jlc291cmNlcy9yZXNvdXJjZXMvM2QvZW5naW5lL2VkaXRvci9hc3NldHMvZGVmYXVsdF9yZW5kZXJwaXBlbGluZS9maWxlOi9DOi9Qcm9ncmFtRGF0YS9jb2Nvcy9lZGl0b3JzL0NyZWF0b3IvMy44LjYvcmVzb3VyY2VzL3Jlc291cmNlcy8zZC9lbmdpbmUvZWRpdG9yL2Fzc2V0cy9kZWZhdWx0X3JlbmRlcnBpcGVsaW5lL2J1aWx0aW4tcGlwZWxpbmUtc2V0dGluZ3MudHMiLCJmaWxlOi9DOi9Qcm9ncmFtRGF0YS9jb2Nvcy9lZGl0b3JzL0NyZWF0b3IvMy44LjYvcmVzb3VyY2VzL3Jlc291cmNlcy8zZC9lbmdpbmUvZWRpdG9yL2Fzc2V0cy9kZWZhdWx0X3JlbmRlcnBpcGVsaW5lL2ZpbGU6L0M6L1Byb2dyYW1EYXRhL2NvY29zL2VkaXRvcnMvQ3JlYXRvci8zLjguNi9yZXNvdXJjZXMvcmVzb3VyY2VzLzNkL2VuZ2luZS9lZGl0b3IvYXNzZXRzL2RlZmF1bHRfcmVuZGVycGlwZWxpbmUvYnVpbHRpbi1waXBlbGluZS50cyIsInZpcnR1YWw6L2NjL3ZpcnR1YWw6L2NjL2VudiJdLCJuYW1lcyI6WyJTYW1wbGVDb3VudCIsImdmeCIsIm1ha2VNU0FBIiwiZW5hYmxlZCIsInNhbXBsZUNvdW50IiwiWDQiLCJtYWtlUGlwZWxpbmVTZXR0aW5ncyIsIm1zYWEiLCJlbmFibGVTaGFkaW5nU2NhbGUiLCJzaGFkaW5nU2NhbGUiLCJibG9vbSIsIm1hdGVyaWFsIiwiZW5hYmxlQWxwaGFNYXNrIiwiaXRlcmF0aW9ucyIsInRocmVzaG9sZCIsImludGVuc2l0eSIsInRvbmVNYXBwaW5nIiwiY29sb3JHcmFkaW5nIiwiY29udHJpYnV0ZSIsImNvbG9yR3JhZGluZ01hcCIsImZzciIsInNoYXJwbmVzcyIsImZ4YWEiLCJmaWxsUmVxdWlyZWRQaXBlbGluZVNldHRpbmdzIiwidmFsdWUiLCJ1bmRlZmluZWQiLCJmaWxsUmVxdWlyZWRNU0FBIiwiZmlsbFJlcXVpcmVkQmxvb20iLCJmaWxsUmVxdWlyZWRUb25lTWFwcGluZyIsImZpbGxSZXF1aXJlZENvbG9yR3JhZGluZyIsImZpbGxSZXF1aXJlZEZTUiIsImZpbGxSZXF1aXJlZEZYQUEiLCJfUkYiLCJwb3AiLCJjY2NsYXNzIiwiX2RlY29yYXRvciIsImRpc2FsbG93TXVsdGlwbGUiLCJleGVjdXRlSW5FZGl0TW9kZSIsIm1lbnUiLCJwcm9wZXJ0eSIsInJlcXVpcmVDb21wb25lbnQiLCJ0eXBlIiwiX2RlYyIsIl9kZWMyIiwiX2RlYzMiLCJDYW1lcmEiLCJfZGVjNCIsIkNDQm9vbGVhbiIsIl9kZWM1IiwiZGlzcGxheU5hbWUiLCJfZGVjNiIsImdyb3VwIiwiaWQiLCJuYW1lIiwiX2RlYzciLCJzdHlsZSIsIkNDSW50ZWdlciIsInJhbmdlIiwiX2RlYzgiLCJfZGVjOSIsInRvb2x0aXAiLCJDQ0Zsb2F0Iiwic2xpZGUiLCJfZGVjMTAiLCJfZGVjMTEiLCJNYXRlcmlhbCIsIl9kZWMxMiIsIl9kZWMxMyIsIl9kZWMxNCIsIm1pbiIsIl9kZWMxNSIsIl9kZWMxNiIsIl9kZWMxNyIsIl9kZWMxOCIsIlRleHR1cmUyRCIsIl9kZWMxOSIsIl9kZWMyMCIsIl9kZWMyMSIsIl9kZWMyMiIsIl9kZWMyMyIsIl9kZWMyNCIsIl9jbGFzcyIsIl9kZXNjcmlwdG9yIiwiX2FwcGx5RGVjb3JhdGVkRGVzY3JpcHRvciIsIl9jbGFzczIiLCJfQ29tcG9uZW50IiwiQnVpbHRpblBpcGVsaW5lU2V0dGluZ3MiLCJfdGhpcyIsIl9sZW4iLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJhcmdzIiwiQXJyYXkiLCJfa2V5IiwiY2FsbCIsImFwcGx5IiwiY29uY2F0IiwiX2luaXRpYWxpemVyRGVmaW5lUHJvcGVydHkiLCJfYXNzZXJ0VGhpc0luaXRpYWxpemVkIiwiX2Rlc2NyaXB0b3IyIiwiX2luaGVyaXRzTG9vc2UiLCJfcHJvdG8iLCJwcm90b3R5cGUiLCJnZXRQaXBlbGluZVNldHRpbmdzIiwidGhpcyIsIl9zZXR0aW5ncyIsIm9uRW5hYmxlIiwiZ2V0Q29tcG9uZW50IiwiY2FtZXJhIiwicGlwZWxpbmVTZXR0aW5ncyIsIm9uRGlzYWJsZSIsIl90cnlFbmFibGVFZGl0b3JQcmV2aWV3IiwicmVuZGVyaW5nIiwiX2VkaXRvclByZXZpZXciLCJzZXRFZGl0b3JQaXBlbGluZVNldHRpbmdzIiwiX2Rpc2FibGVFZGl0b3JQcmV2aWV3IiwiZ2V0RWRpdG9yUGlwZWxpbmVTZXR0aW5ncyIsIl9jcmVhdGVDbGFzcyIsImtleSIsImdldCIsInNldCIsInYiLCJNYXRoIiwicG93IiwiY2VpbCIsImxvZzIiLCJtYXgiLCJ2YWwiLCJDb21wb25lbnQiLCJjb25maWd1cmFibGUiLCJlbnVtZXJhYmxlIiwid3JpdGFibGUiLCJpbml0aWFsaXplciIsIk9iamVjdCIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsIkFBQkIiLCJnZW9tZXRyeSIsIlNwaGVyZSIsImludGVyc2VjdCIsIkNsZWFyRmxhZ0JpdCIsIkNvbG9yIiwiRm9ybWF0IiwiRm9ybWF0RmVhdHVyZUJpdCIsIkxvYWRPcCIsIlN0b3JlT3AiLCJUZXh0dXJlVHlwZSIsIlZpZXdwb3J0Iiwic2NlbmUiLCJyZW5kZXJlciIsIkNhbWVyYVVzYWdlIiwiQ1NNTGV2ZWwiLCJMaWdodFR5cGUiLCJmb3J3YXJkTmVlZENsZWFyQ29sb3IiLCJjbGVhckZsYWciLCJDT0xPUiIsIlNURU5DSUwiLCJnZXRDc21NYWluTGlnaHRWaWV3cG9ydCIsImxpZ2h0IiwidyIsImgiLCJsZXZlbCIsInZwIiwic2NyZWVuU3BhY2VTaWduWSIsInNoYWRvd0ZpeGVkQXJlYSIsImNzbUxldmVsIiwiTEVWRUxfMSIsImxlZnQiLCJ0b3AiLCJ3aWR0aCIsInRydW5jIiwiaGVpZ2h0IiwiZmxvb3IiLCJQaXBlbGluZUNvbmZpZ3MiLCJpc1dlYiIsImlzV2ViR0wxIiwiaXNXZWJHUFUiLCJpc01vYmlsZSIsImlzSERSIiwidXNlRmxvYXRPdXRwdXQiLCJ0b25lTWFwcGluZ1R5cGUiLCJzaGFkb3dFbmFibGVkIiwic2hhZG93TWFwRm9ybWF0IiwiUjMyRiIsInNoYWRvd01hcFNpemUiLCJWZWMyIiwidXNlUGxhbmFyU2hhZG93Iiwic3VwcG9ydERlcHRoU2FtcGxlIiwibW9iaWxlTWF4U3BvdExpZ2h0U2hhZG93TWFwcyIsInBsYXRmb3JtIiwiVmVjNCIsInNldHVwUGlwZWxpbmVDb25maWdzIiwicHBsIiwiY29uZmlncyIsInNhbXBsZUZlYXR1cmUiLCJTQU1QTEVEX1RFWFRVUkUiLCJMSU5FQVJfRklMVEVSIiwiZGV2aWNlIiwic3lzIiwiaXNOYXRpdmUiLCJnZnhBUEkiLCJBUEkiLCJXRUJHTCIsIldFQkdQVSIsInBpcGVsaW5lU2NlbmVEYXRhIiwiZ2V0TWFjcm9Cb29sIiwicG9zdFNldHRpbmdzIiwic2hhZG93SW5mbyIsInNoYWRvd3MiLCJwaXBlbGluZSIsInN1cHBvcnRzUjMyRmxvYXRUZXh0dXJlIiwiUkdCQTgiLCJzaXplIiwiU2hhZG93VHlwZSIsIlBsYW5hciIsImNhcGFiaWxpdGllcyIsImdldEZvcm1hdEZlYXR1cmVzIiwiREVQVEhfU1RFTkNJTCIsIngiLCJjbGlwU3BhY2VTaWduWSIsImRlZmF1bHRTZXR0aW5ncyIsIkNhbWVyYUNvbmZpZ3MiLCJzZXR0aW5ncyIsImlzTWFpbkdhbWVXaW5kb3ciLCJyZW5kZXJXaW5kb3dJZCIsImNvbG9yTmFtZSIsImRlcHRoU3RlbmNpbE5hbWUiLCJlbmFibGVGdWxsUGlwZWxpbmUiLCJlbmFibGVQcm9maWxlciIsInJlbWFpbmluZ1Bhc3NlcyIsIm5hdGl2ZVdpZHRoIiwibmF0aXZlSGVpZ2h0IiwiZW5hYmxlSERSIiwicmFkaWFuY2VGb3JtYXQiLCJjb3B5QW5kVG9uZW1hcE1hdGVyaWFsIiwiZW5hYmxlU3RvcmVTY2VuZURlcHRoIiwic0NsZWFyQ29sb3JUcmFuc3BhcmVudEJsYWNrIiwiYWRkQ29weVRvU2NyZWVuUGFzcyIsInBwbENvbmZpZ3MiLCJjYW1lcmFDb25maWdzIiwiaW5wdXQiLCJhc3NlcnQiLCJwYXNzIiwiYWRkUmVuZGVyUGFzcyIsImFkZFJlbmRlclRhcmdldCIsIkNMRUFSIiwiU1RPUkUiLCJhZGRUZXh0dXJlIiwic2V0VmVjNCIsImFkZFF1ZXVlIiwiUXVldWVIaW50IiwiT1BBUVVFIiwiYWRkRnVsbHNjcmVlblF1YWQiLCJnZXRQaW5nUG9uZ1JlbmRlclRhcmdldCIsInByZXZOYW1lIiwicHJlZml4Iiwic3RhcnRzV2l0aCIsIk51bWJlciIsImNoYXJBdCIsIkZvcndhcmRMaWdodGluZyIsImxpZ2h0cyIsInNoYWRvd0VuYWJsZWRTcG90TGlnaHRzIiwiX3NwaGVyZSIsImNyZWF0ZSIsIl9ib3VuZGluZ0JveCIsIl9yYW5nZWREaXJMaWdodEJvdW5kaW5nQm94IiwiY3VsbExpZ2h0cyIsImZydXN0dW0iLCJjYW1lcmFQb3MiLCJfc3RlcCIsIl9pdGVyYXRvciIsIl9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UiLCJzcG90TGlnaHRzIiwiZG9uZSIsImJha2VkIiwicG9zaXRpb24iLCJ5IiwieiIsInNwaGVyZUZydXN0dW0iLCJwdXNoIiwiX3N0ZXAyIiwiX2l0ZXJhdG9yMiIsInNwaGVyZUxpZ2h0cyIsIl9zdGVwMyIsIl9pdGVyYXRvcjMiLCJwb2ludExpZ2h0cyIsIl9zdGVwNCIsIl9pdGVyYXRvcjQiLCJyYW5nZWREaXJMaWdodHMiLCJ0cmFuc2Zvcm0iLCJub2RlIiwiZ2V0V29ybGRNYXRyaXgiLCJhYWJiRnJ1c3R1bSIsInNvcnQiLCJsaHMiLCJyaHMiLCJWZWMzIiwic3F1YXJlZERpc3RhbmNlIiwiX2FkZExpZ2h0UXVldWVzIiwiX3N0ZXA1IiwiX2l0ZXJhdG9yNSIsInF1ZXVlIiwiQkxFTkQiLCJTUEhFUkUiLCJTUE9UIiwiUE9JTlQiLCJSQU5HRURfRElSRUNUSU9OQUwiLCJhZGRTY2VuZSIsIlNjZW5lRmxhZ3MiLCJhZGRTcG90bGlnaHRTaGFkb3dQYXNzZXMiLCJtYXhOdW1TaGFkb3dNYXBzIiwiX3N0ZXA2IiwiaSIsIl9pdGVyYXRvcjYiLCJzaGFkb3dQYXNzIiwiYWRkRGVwdGhTdGVuY2lsIiwiRElTQ0FSRCIsIk5PTkUiLCJNQVNLIiwiU0hBRE9XX0NBU1RFUiIsInVzZUxpZ2h0RnJ1c3R1bSIsImFkZExpZ2h0UXVldWVzIiwiX3N0ZXA3IiwiX2l0ZXJhdG9yNyIsImFkZExpZ2h0UGFzc2VzIiwiZGVwdGhTdGVuY2lsU3RvcmVPcCIsInZpZXdwb3J0IiwiX3N0ZXA4IiwiY291bnQiLCJfaXRlcmF0b3I4Iiwic3RvcmVPcCIsInNldFZpZXdwb3J0IiwiTE9BRCIsImlzTXVsdGlwbGVMaWdodFBhc3Nlc05lZWRlZCIsIkJ1aWx0aW5Gb3J3YXJkUGFzc0J1aWxkZXIiLCJmb3J3YXJkTGlnaHRpbmciLCJfdmlld3BvcnQiLCJfY2xlYXJDb2xvciIsIl9yZWZsZWN0aW9uUHJvYmVDbGVhckNvbG9yIiwiX3Byb3RvMiIsImdldENvbmZpZ09yZGVyIiwiQ29uZmlnT3JkZXIiLCJnZXRSZW5kZXJPcmRlciIsIlJlbmRlck9yZGVyIiwiY29uZmlnQ2FtZXJhIiwicGlwZWxpbmVDb25maWdzIiwiZW5hYmxlTWFpbkxpZ2h0U2hhZG93TWFwIiwibWFpbkxpZ2h0IiwiZW5hYmxlTWFpbkxpZ2h0UGxhbmFyU2hhZG93TWFwIiwiZW5hYmxlUGxhbmFyUmVmbGVjdGlvblByb2JlIiwiY2FtZXJhVXNhZ2UiLCJTQ0VORV9WSUVXIiwiR0FNRV9WSUVXIiwiZW5hYmxlTVNBQSIsImVuYWJsZVNpbmdsZUZvcndhcmRQYXNzIiwid2luZG93UmVzaXplIiwid2luZG93IiwiUmVzb3VyY2VGbGFncyIsIlJlc291cmNlUmVzaWRlbmN5IiwiVEVYMkQiLCJDT0xPUl9BVFRBQ0hNRU5UIiwiTUVNT1JZTEVTUyIsIkRFUFRIX1NURU5DSUxfQVRUQUNITUVOVCIsInNldHVwIiwiY29udGV4dCIsIl9hZGRDYXNjYWRlZFNoYWRvd01hcFBhc3MiLCJfdHJ5QWRkUmVmbGVjdGlvblByb2JlUGFzc2VzIiwiX2FkZEZvcndhcmRSYWRpYW5jZVBhc3NlcyIsInNoYWRvd1NpemUiLCJjc21TdXBwb3J0ZWQiLCJyZWZsZWN0aW9uUHJvYmVNYW5hZ2VyIiwiY2NsZWdhY3kiLCJpbnRlcm5hbCIsIl9zdGVwOSIsInByb2JlcyIsImdldFByb2JlcyIsInByb2JlSUQiLCJfaXRlcmF0b3I5IiwicHJvYmUiLCJuZWVkUmVuZGVyIiwiYXJlYSIsInJlbmRlckFyZWEiLCJwcm9iZVR5cGUiLCJQcm9iZVR5cGUiLCJQTEFOQVIiLCJyZWFsdGltZVBsYW5hclRleHR1cmUiLCJhZGRSZW5kZXJXaW5kb3ciLCJwcm9iZVBhc3MiLCJfYnVpbGRSZWZsZWN0aW9uUHJvYmVQYXNzIiwiY29sb3JTdG9yZU9wIiwiY2xlYXJDb2xvciIsInBhY2tSR0JFIiwiY2xlYXJEZXB0aCIsImNsZWFyU3RlbmNpbCIsIlJFRkxFQ1RJT05fUFJPQkUiLCJkaXNhYmxlTVNBQSIsInJvdW5kIiwiX2FkZEZvcndhcmRTaW5nbGVSYWRpYW5jZVBhc3MiLCJfYWRkRm9yd2FyZE11bHRpcGxlUmFkaWFuY2VQYXNzZXMiLCJfYWRkUGxhbmFyU2hhZG93UXVldWUiLCJzY2VuZUZsYWdzIiwiZ2VvbWV0cnlSZW5kZXJlciIsIkdFT01FVFJZIiwibXNhYVJhZGlhbmNlTmFtZSIsIm1zYWFEZXB0aFN0ZW5jaWxOYW1lIiwibXNQYXNzIiwiYWRkTXVsdGlzYW1wbGVSZW5kZXJQYXNzIiwiX2J1aWxkRm9yd2FyZE1haW5MaWdodFBhc3MiLCJyZXNvbHZlUmVuZGVyVGFyZ2V0IiwiZmlyc3RTdG9yZU9wIiwiUExBTkFSX1NIQURPVyIsIkJ1aWx0aW5CbG9vbVBhc3NCdWlsZGVyIiwiX2NsZWFyQ29sb3JUcmFuc3BhcmVudEJsYWNrIiwiX2Jsb29tUGFyYW1zIiwiX2Jsb29tVGV4U2l6ZSIsIl9ibG9vbVdpZHRocyIsIl9ibG9vbUhlaWdodHMiLCJfYmxvb21UZXhOYW1lcyIsIl9wcm90bzMiLCJlbmFibGVCbG9vbSIsImJsb29tV2lkdGgiLCJibG9vbUhlaWdodCIsInByZXZSZW5kZXJQYXNzIiwiX2FkZEthd2FzZUR1YWxGaWx0ZXJCbG9vbVBhc3NlcyIsImJsb29tTWF0ZXJpYWwiLCJyYWRpYW5jZU5hbWUiLCJzaXplQ291bnQiLCJwcmVmaWx0ZXJQYXNzIiwiZG93blBhc3MiLCJ1cFBhc3MiLCJjb21iaW5lUGFzcyIsIkJ1aWx0aW5Ub25lTWFwcGluZ1Bhc3NCdWlsZGVyIiwiX2NvbG9yR3JhZGluZ1RleFNpemUiLCJfcHJvdG80IiwiZW5hYmxlQ29sb3JHcmFkaW5nIiwiZW5hYmxlVG9uZU1hcHBpbmciLCJzZXRQcm9wZXJ0eSIsIl9hZGRDb3B5QW5kVG9uZW1hcFBhc3MiLCJsZHJDb2xvclByZWZpeCIsImxkckNvbG9yTmFtZSIsImx1dFRleCIsImlzU3F1YXJlTWFwIiwic2V0VmVjMiIsInNldEZsb2F0IiwiQnVpbHRpbkZYQUFQYXNzQnVpbGRlciIsIl9meGFhUGFyYW1zIiwiX3Byb3RvNSIsImVuYWJsZUZYQUEiLCJfYWRkRnhhYVBhc3MiLCJpbnB1dENvbG9yTmFtZSIsImZ4YWFNYXRlcmlhbCIsIkJ1aWx0aW5Gc3JQYXNzQnVpbGRlciIsIl9mc3JQYXJhbXMiLCJfZnNyVGV4U2l6ZSIsIl9wcm90bzYiLCJlbmFibGVGU1IiLCJvdXRwdXRDb2xvck5hbWUiLCJfYWRkRnNyUGFzcyIsImZzck1hdGVyaWFsIiwiY2xhbXAiLCJmc3JDb2xvck5hbWUiLCJlYXN1UGFzcyIsInJjYXNQYXNzIiwiQnVpbHRpblVpUGFzc0J1aWxkZXIiLCJfcHJvdG83IiwiZmxhZ3MiLCJVSSIsIlBST0ZJTEVSIiwic2hvd1N0YXRpc3RpY3MiLCJCdWlsdGluUGlwZWxpbmVCdWlsZGVyIiwiX3BpcGVsaW5lRXZlbnQiLCJkaXJlY3RvciIsInJvb3QiLCJwaXBlbGluZUV2ZW50IiwiX2ZvcndhcmRQYXNzIiwiX2Jsb29tUGFzcyIsIl90b25lTWFwcGluZ1Bhc3MiLCJfZnhhYVBhc3MiLCJfZnNyUGFzcyIsIl91aVBhc3MiLCJfY29uZmlncyIsIl9jYW1lcmFDb25maWdzIiwiX2NvcHlBbmRUb25lbWFwTWF0ZXJpYWwiLCJfaW5pdGlhbGl6ZWQiLCJfcGFzc0J1aWxkZXJzIiwiX3Byb3RvOCIsIl9zZXR1cFBpcGVsaW5lUHJldmlldyIsIlBSRVZJRVciLCJlZGl0b3JTZXR0aW5ncyIsIl9wcmVwYXJlUGlwZWxpbmVQYXNzZXMiLCJwYXNzQnVpbGRlcnMiLCJfcGFzc2VzIiwiX3N0ZXAxMCIsIl9pdGVyYXRvcjEwIiwiX3NldHVwQnVpbHRpbkNhbWVyYUNvbmZpZ3MiLCJHQU1FIiwic3dhcGNoYWluIiwidmlzaWJpbGl0eSIsIkxheWVycyIsIkVudW0iLCJERUZBVUxUIiwiUkdCQTE2RiIsIl9zZXR1cENhbWVyYUNvbmZpZ3MiLCJhIiwiYiIsIl9zdGVwMTEiLCJfaXRlcmF0b3IxMSIsImJ1aWxkZXIiLCJfc3RlcDEyIiwiX2l0ZXJhdG9yMTIiLCJjYW1lcmFzIiwiX2luaXRNYXRlcmlhbHMiLCJfc3RlcDEzIiwiX2l0ZXJhdG9yMTMiLCJlbWl0IiwiUGlwZWxpbmVFdmVudFR5cGUiLCJSRU5ERVJfQ0FNRVJBX0JFR0lOIiwiX2J1aWxkRm9yd2FyZFBpcGVsaW5lIiwiX2J1aWxkU2ltcGxlUGlwZWxpbmUiLCJSRU5ERVJfQ0FNRVJBX0VORCIsInNvcnRQaXBlbGluZVBhc3NCdWlsZGVyc0J5UmVuZGVyT3JkZXIiLCJfc3RlcDE0IiwibGFzdFBhc3MiLCJfaXRlcmF0b3IxNCIsIl91dWlkIiwiaW5pdGlhbGl6ZSIsImVmZmVjdE5hbWUiLCJlZmZlY3RBc3NldCIsInNldEN1c3RvbVBpcGVs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LFNBQUNrTixFQUFHQyxHQUNsQixPQUFPRCxFQUFFakssaUJBQW1Ca0ssRUFBRWxLLG9CQTBtRDFCa0wsQ0FBc0M5QixHQVN0QyxJQVBBLElBT2tDK0IsRUFQNUI3SixFQUEyQixDQUM3QjNJLFVBQVcsR0FDWEMsaUJBQWtCLElBR2xCd1MsT0FBeURoZixFQUU3RGlmLEVBQUE1UCxFQUFzQjJOLEtBQVkrQixFQUFBRSxLQUFBMVAsTUFBRSxDQUFBLElBQXpCME8sRUFBT2MsRUFBQWhmLE1BQ1ZrZSxFQUFRaEosUUFDUitKLEVBQVdmLEVBQVFoSixNQUFNM0ssRUFBS3ZGLEtBQUt1WCxTQUFVdlgsS0FBS3dYLGVBQzlDcFgsRUFBUStQLEVBQVM4SixJQUk3QnpSLEVBQStDLElBQXhDeEksS0FBS3dYLGVBQWU1UCxrQkFDOUJnUSxFQUVPMEIsZUFBUixTQUF1Qi9ULEdBQ25CLE9BQUl2RixLQUFLMFgsYUFDRSxHQUdYcFMsR0FBcUJDLEVBQUt2RixLQUFLdVgsVUFHL0J2WCxLQUFLeVgsd0JBQXdCMEMsK0NBQzdCbmEsS0FBS3lYLHdCQUF3QjJDLFdBQVcsQ0FBRUMsV0FBWSx1Q0FFbERyYSxLQUFLeVgsd0JBQXdCNkMsY0FDN0J0YSxLQUFLMFgsY0FBZSxHQUdqQjFYLEtBQUswWCxhQUFlLEVBQUksSUFDbENkLEtBR0xwVyxFQUFVK1osa0JBQWtCLFVBQVcsSUFBSTNELE1BRTdDcGIsSUFBQUMiLCJmaWxlIjoiYWxsLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLypcclxuIENvcHlyaWdodCAoYykgMjAyMS0yMDI0IFhpYW1lbiBZYWppIFNvZnR3YXJlIENvLiwgTHRkLlxyXG5cclxuIGh0dHBzOi8vd3d3LmNvY29zLmNvbVxyXG5cclxuIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcclxuIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWxcclxuIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG9cclxuIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzXHJcbiBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sXHJcbiBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcclxuXHJcbiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpblxyXG4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXHJcblxyXG4gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxyXG4gSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXHJcbiBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEVcclxuIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcclxuIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sXHJcbiBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOXHJcbiBUSEUgU09GVFdBUkUuXHJcbiovXHJcblxyXG4vKipcclxuICogPT09PT09PT09PT09PT09PT09PT09PT09PSAhRE8gTk9UIENIQU5HRSBUSEUgRk9MTE9XSU5HIFNFQ1RJT04gTUFOVUFMTFkhID09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICogVGhlIGZvbGxvd2luZyBzZWN0aW9uIGlzIGF1dG8tZ2VuZXJhdGVkLlxyXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09ICFETyBOT1QgQ0hBTkdFIFRIRSBGT0xMT1dJTkcgU0VDVElPTiBNQU5VQUxMWSEgPT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gKi9cclxuLyogZXNsaW50LWRpc2FibGUgbWF4LWxlbiAqL1xyXG5pbXBvcnQgeyBNYXRlcmlhbCwgVGV4dHVyZTJELCBnZnggfSBmcm9tICdjYyc7XHJcblxyXG5jb25zdCB7IFNhbXBsZUNvdW50IH0gPSBnZng7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIE1TQUEge1xyXG4gICAgZW5hYmxlZDogYm9vbGVhbjsgLyogZmFsc2UgKi9cclxuICAgIHNhbXBsZUNvdW50OiBnZnguU2FtcGxlQ291bnQ7IC8qIFNhbXBsZUNvdW50Llg0ICovXHJcbiAgICBbbmFtZTogc3RyaW5nXTogdW5rbm93bjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VNU0FBKCk6IE1TQUEge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBlbmFibGVkOiBmYWxzZSxcclxuICAgICAgICBzYW1wbGVDb3VudDogU2FtcGxlQ291bnQuWDQsXHJcbiAgICB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZmlsbFJlcXVpcmVkTVNBQSh2YWx1ZTogTVNBQSk6IHZvaWQge1xyXG4gICAgaWYgKHZhbHVlLmVuYWJsZWQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHZhbHVlLmVuYWJsZWQgPSBmYWxzZTtcclxuICAgIH1cclxuICAgIGlmICh2YWx1ZS5zYW1wbGVDb3VudCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgdmFsdWUuc2FtcGxlQ291bnQgPSBTYW1wbGVDb3VudC5YNDtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBIQkFPIHtcclxuICAgIGVuYWJsZWQ6IGJvb2xlYW47IC8qIGZhbHNlICovXHJcbiAgICByYWRpdXNTY2FsZTogbnVtYmVyOyAvKiAxICovXHJcbiAgICBhbmdsZUJpYXNEZWdyZWU6IG51bWJlcjsgLyogMTAgKi9cclxuICAgIGJsdXJTaGFycG5lc3M6IG51bWJlcjsgLyogMyAqL1xyXG4gICAgYW9TYXR1cmF0aW9uOiBudW1iZXI7IC8qIDEgKi9cclxuICAgIG5lZWRCbHVyOiBib29sZWFuOyAvKiBmYWxzZSAqL1xyXG4gICAgW25hbWU6IHN0cmluZ106IHVua25vd247XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBtYWtlSEJBTygpOiBIQkFPIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgZW5hYmxlZDogZmFsc2UsXHJcbiAgICAgICAgcmFkaXVzU2NhbGU6IDEsXHJcbiAgICAgICAgYW5nbGVCaWFzRGVncmVlOiAxMCxcclxuICAgICAgICBibHVyU2hhcnBuZXNzOiAzLFxyXG4gICAgICAgIGFvU2F0dXJhdGlvbjogMSxcclxuICAgICAgICBuZWVkQmx1cjogZmFsc2UsXHJcbiAgICB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZmlsbFJlcXVpcmVkSEJBTyh2YWx1ZTogSEJBTyk6IHZvaWQge1xyXG4gICAgaWYgKHZhbHVlLmVuYWJsZWQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHZhbHVlLmVuYWJsZWQgPSBmYWxzZTtcclxuICAgIH1cclxuICAgIGlmICh2YWx1ZS5yYWRpdXNTY2FsZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgdmFsdWUucmFkaXVzU2NhbGUgPSAxO1xyXG4gICAgfVxyXG4gICAgaWYgKHZhbHVlLmFuZ2xlQmlhc0RlZ3JlZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgdmFsdWUuYW5nbGVCaWFzRGVncmVlID0gMTA7XHJcbiAgICB9XHJcbiAgICBpZiAodmFsdWUuYmx1clNoYXJwbmVzcyA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgdmFsdWUuYmx1clNoYXJwbmVzcyA9IDM7XHJcbiAgICB9XHJcbiAgICBpZiAodmFsdWUuYW9TYXR1cmF0aW9uID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICB2YWx1ZS5hb1NhdHVyYXRpb24gPSAxO1xyXG4gICAgfVxyXG4gICAgaWYgKHZhbHVlLm5lZWRCbHVyID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICB2YWx1ZS5uZWVkQmx1ciA9IGZhbHNlO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEJsb29tIHtcclxuICAgIGVuYWJsZWQ6IGJvb2xlYW47IC8qIGZhbHNlICovXHJcbiAgICAvKiByZWZjb3VudCAqLyBtYXRlcmlhbDogTWF0ZXJpYWwgfCBudWxsO1xyXG4gICAgZW5hYmxlQWxwaGFNYXNrOiBib29sZWFuOyAvKiBmYWxzZSAqL1xyXG4gICAgaXRlcmF0aW9uczogbnVtYmVyOyAvKiAzICovXHJcbiAgICB0aHJlc2hvbGQ6IG51bWJlcjsgLyogMC44ICovXHJcbiAgICBpbnRlbnNpdHk6IG51bWJlcjsgLyogMi4zICovXHJcbiAgICBbbmFtZTogc3RyaW5nXTogdW5rbm93bjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VCbG9vbSgpOiBCbG9vbSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGVuYWJsZWQ6IGZhbHNlLFxyXG4gICAgICAgIG1hdGVyaWFsOiBudWxsLFxyXG4gICAgICAgIGVuYWJsZUFscGhhTWFzazogZmFsc2UsXHJcbiAgICAgICAgaXRlcmF0aW9uczogMyxcclxuICAgICAgICB0aHJlc2hvbGQ6IDAuOCxcclxuICAgICAgICBpbnRlbnNpdHk6IDIuMyxcclxuICAgIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBmaWxsUmVxdWlyZWRCbG9vbSh2YWx1ZTogQmxvb20pOiB2b2lkIHtcclxuICAgIGlmICh2YWx1ZS5lbmFibGVkID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICB2YWx1ZS5lbmFibGVkID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBpZiAodmFsdWUubWF0ZXJpYWwgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHZhbHVlLm1hdGVyaWFsID0gbnVsbDtcclxuICAgIH1cclxuICAgIGlmICh2YWx1ZS5lbmFibGVBbHBoYU1hc2sgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHZhbHVlLmVuYWJsZUFscGhhTWFzayA9IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgaWYgKHZhbHVlLml0ZXJhdGlvbnMgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHZhbHVlLml0ZXJhdGlvbnMgPSAzO1xyXG4gICAgfVxyXG4gICAgaWYgKHZhbHVlLnRocmVzaG9sZCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgdmFsdWUudGhyZXNob2xkID0gMC44O1xyXG4gICAgfVxyXG4gICAgaWYgKHZhbHVlLmludGVuc2l0eSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgdmFsdWUuaW50ZW5zaXR5ID0gMi4zO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIENvbG9yR3JhZGluZyB7XHJcbiAgICBlbmFibGVkOiBib29sZWFuOyAvKiBmYWxzZSAqL1xyXG4gICAgLyogcmVmY291bnQgKi8gbWF0ZXJpYWw6IE1hdGVyaWFsIHwgbnVsbDtcclxuICAgIGNvbnRyaWJ1dGU6IG51bWJlcjsgLyogMSAqL1xyXG4gICAgLyogcmVmY291bnQgKi8gY29sb3JHcmFkaW5nTWFwOiBUZXh0dXJlMkQgfCBudWxsO1xyXG4gICAgW25hbWU6IHN0cmluZ106IHVua25vd247XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBtYWtlQ29sb3JHcmFkaW5nKCk6IENvbG9yR3JhZGluZyB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGVuYWJsZWQ6IGZhbHNlLFxyXG4gICAgICAgIG1hdGVyaWFsOiBudWxsLFxyXG4gICAgICAgIGNvbnRyaWJ1dGU6IDEsXHJcbiAgICAgICAgY29sb3JHcmFkaW5nTWFwOiBudWxsLFxyXG4gICAgfTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGZpbGxSZXF1aXJlZENvbG9yR3JhZGluZyh2YWx1ZTogQ29sb3JHcmFkaW5nKTogdm9pZCB7XHJcbiAgICBpZiAodmFsdWUuZW5hYmxlZCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgdmFsdWUuZW5hYmxlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgaWYgKHZhbHVlLm1hdGVyaWFsID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICB2YWx1ZS5tYXRlcmlhbCA9IG51bGw7XHJcbiAgICB9XHJcbiAgICBpZiAodmFsdWUuY29udHJpYnV0ZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgdmFsdWUuY29udHJpYnV0ZSA9IDE7XHJcbiAgICB9XHJcbiAgICBpZiAodmFsdWUuY29sb3JHcmFkaW5nTWFwID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICB2YWx1ZS5jb2xvckdyYWRpbmdNYXAgPSBudWxsO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEZTUiB7XHJcbiAgICBlbmFibGVkOiBib29sZWFuOyAvKiBmYWxzZSAqL1xyXG4gICAgLyogcmVmY291bnQgKi8gbWF0ZXJpYWw6IE1hdGVyaWFsIHwgbnVsbDtcclxuICAgIHNoYXJwbmVzczogbnVtYmVyOyAvKiAwLjggKi9cclxuICAgIFtuYW1lOiBzdHJpbmddOiB1bmtub3duO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbWFrZUZTUigpOiBGU1Ige1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBlbmFibGVkOiBmYWxzZSxcclxuICAgICAgICBtYXRlcmlhbDogbnVsbCxcclxuICAgICAgICBzaGFycG5lc3M6IDAuOCxcclxuICAgIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBmaWxsUmVxdWlyZWRGU1IodmFsdWU6IEZTUik6IHZvaWQge1xyXG4gICAgaWYgKHZhbHVlLmVuYWJsZWQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHZhbHVlLmVuYWJsZWQgPSBmYWxzZTtcclxuICAgIH1cclxuICAgIGlmICh2YWx1ZS5tYXRlcmlhbCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgdmFsdWUubWF0ZXJpYWwgPSBudWxsO1xyXG4gICAgfVxyXG4gICAgaWYgKHZhbHVlLnNoYXJwbmVzcyA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgdmFsdWUuc2hhcnBuZXNzID0gMC44O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEZYQUEge1xyXG4gICAgZW5hYmxlZDogYm9vbGVhbjsgLyogZmFsc2UgKi9cclxuICAgIC8qIHJlZmNvdW50ICovIG1hdGVyaWFsOiBNYXRlcmlhbCB8IG51bGw7XHJcbiAgICBbbmFtZTogc3RyaW5nXTogdW5rbm93bjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VGWEFBKCk6IEZYQUEge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBlbmFibGVkOiBmYWxzZSxcclxuICAgICAgICBtYXRlcmlhbDogbnVsbCxcclxuICAgIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBmaWxsUmVxdWlyZWRGWEFBKHZhbHVlOiBGWEFBKTogdm9pZCB7XHJcbiAgICBpZiAodmFsdWUuZW5hYmxlZCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgdmFsdWUuZW5hYmxlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgaWYgKHZhbHVlLm1hdGVyaWFsID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICB2YWx1ZS5tYXRlcmlhbCA9IG51bGw7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgVG9uZU1hcHBpbmcge1xyXG4gICAgLyogcmVmY291bnQgKi8gbWF0ZXJpYWw6IE1hdGVyaWFsIHwgbnVsbDtcclxuICAgIFtuYW1lOiBzdHJpbmddOiB1bmtub3duO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbWFrZVRvbmVNYXBwaW5nKCk6IFRvbmVNYXBwaW5nIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgbWF0ZXJpYWw6IG51bGwsXHJcbiAgICB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZmlsbFJlcXVpcmVkVG9uZU1hcHBpbmcodmFsdWU6IFRvbmVNYXBwaW5nKTogdm9pZCB7XHJcbiAgICBpZiAodmFsdWUubWF0ZXJpYWwgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHZhbHVlLm1hdGVyaWFsID0gbnVsbDtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBQaXBlbGluZVNldHRpbmdzIHtcclxuICAgIHJlYWRvbmx5IG1zYWE6IE1TQUE7XHJcbiAgICBlbmFibGVTaGFkaW5nU2NhbGU6IGJvb2xlYW47IC8qIGZhbHNlICovXHJcbiAgICBzaGFkaW5nU2NhbGU6IG51bWJlcjsgLyogMC41ICovXHJcbiAgICByZWFkb25seSBibG9vbTogQmxvb207XHJcbiAgICByZWFkb25seSB0b25lTWFwcGluZzogVG9uZU1hcHBpbmc7XHJcbiAgICByZWFkb25seSBjb2xvckdyYWRpbmc6IENvbG9yR3JhZGluZztcclxuICAgIHJlYWRvbmx5IGZzcjogRlNSO1xyXG4gICAgcmVhZG9ubHkgZnhhYTogRlhBQTtcclxuICAgIFtuYW1lOiBzdHJpbmddOiB1bmtub3duO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbWFrZVBpcGVsaW5lU2V0dGluZ3MoKTogUGlwZWxpbmVTZXR0aW5ncyB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIG1zYWE6IG1ha2VNU0FBKCksXHJcbiAgICAgICAgZW5hYmxlU2hhZGluZ1NjYWxlOiBmYWxzZSxcclxuICAgICAgICBzaGFkaW5nU2NhbGU6IDAuNSxcclxuICAgICAgICBibG9vbTogbWFrZUJsb29tKCksXHJcbiAgICAgICAgdG9uZU1hcHBpbmc6IG1ha2VUb25lTWFwcGluZygpLFxyXG4gICAgICAgIGNvbG9yR3JhZGluZzogbWFrZUNvbG9yR3JhZGluZygpLFxyXG4gICAgICAgIGZzcjogbWFrZUZTUigpLFxyXG4gICAgICAgIGZ4YWE6IG1ha2VGWEFBKCksXHJcbiAgICB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZmlsbFJlcXVpcmVkUGlwZWxpbmVTZXR0aW5ncyh2YWx1ZTogUGlwZWxpbmVTZXR0aW5ncyk6IHZvaWQge1xyXG4gICAgaWYgKCF2YWx1ZS5tc2FhKSB7XHJcbiAgICAgICAgKHZhbHVlLm1zYWEgYXMgTVNBQSkgPSBtYWtlTVNBQSgpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBmaWxsUmVxdWlyZWRNU0FBKHZhbHVlLm1zYWEpO1xyXG4gICAgfVxyXG4gICAgaWYgKHZhbHVlLmVuYWJsZVNoYWRpbmdTY2FsZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgdmFsdWUuZW5hYmxlU2hhZGluZ1NjYWxlID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBpZiAodmFsdWUuc2hhZGluZ1NjYWxlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICB2YWx1ZS5zaGFkaW5nU2NhbGUgPSAwLjU7XHJcbiAgICB9XHJcbiAgICBpZiAoIXZhbHVlLmJsb29tKSB7XHJcbiAgICAgICAgKHZhbHVlLmJsb29tIGFzIEJsb29tKSA9IG1ha2VCbG9vbSgpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBmaWxsUmVxdWlyZWRCbG9vbSh2YWx1ZS5ibG9vbSk7XHJcbiAgICB9XHJcbiAgICBpZiAoIXZhbHVlLnRvbmVNYXBwaW5nKSB7XHJcbiAgICAgICAgKHZhbHVlLnRvbmVNYXBwaW5nIGFzIFRvbmVNYXBwaW5nKSA9IG1ha2VUb25lTWFwcGluZygpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBmaWxsUmVxdWlyZWRUb25lTWFwcGluZyh2YWx1ZS50b25lTWFwcGluZyk7XHJcbiAgICB9XHJcbiAgICBpZiAoIXZhbHVlLmNvbG9yR3JhZGluZykge1xyXG4gICAgICAgICh2YWx1ZS5jb2xvckdyYWRpbmcgYXMgQ29sb3JHcmFkaW5nKSA9IG1ha2VDb2xvckdyYWRpbmcoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZmlsbFJlcXVpcmVkQ29sb3JHcmFkaW5nKHZhbHVlLmNvbG9yR3JhZGluZyk7XHJcbiAgICB9XHJcbiAgICBpZiAoIXZhbHVlLmZzcikge1xyXG4gICAgICAgICh2YWx1ZS5mc3IgYXMgRlNSKSA9IG1ha2VGU1IoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZmlsbFJlcXVpcmVkRlNSKHZhbHVlLmZzcik7XHJcbiAgICB9XHJcbiAgICBpZiAoIXZhbHVlLmZ4YWEpIHtcclxuICAgICAgICAodmFsdWUuZnhhYSBhcyBGWEFBKSA9IG1ha2VGWEFBKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGZpbGxSZXF1aXJlZEZYQUEodmFsdWUuZnhhYSk7XHJcbiAgICB9XHJcbn1cclxuIiwiLypcclxuIENvcHlyaWdodCAoYykgMjAyMS0yMDI0IFhpYW1lbiBZYWppIFNvZnR3YXJlIENvLiwgTHRkLlxyXG5cclxuIGh0dHBzOi8vd3d3LmNvY29zLmNvbS9cclxuXHJcbiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5XHJcbiBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsXHJcbiBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvXHJcbiB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllc1xyXG4gb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLFxyXG4gc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XHJcblxyXG4gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW5cclxuIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxyXG5cclxuIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1JcclxuIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxyXG4gRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXHJcbiBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXHJcbiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxyXG4gT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTlxyXG4gVEhFIFNPRlRXQVJFLlxyXG4qL1xyXG5cclxuaW1wb3J0IHtcclxuICAgIF9kZWNvcmF0b3IsIENhbWVyYSwgQ0NCb29sZWFuLCBDQ0Zsb2F0LCBDQ0ludGVnZXIsIENvbXBvbmVudCxcclxuICAgIE1hdGVyaWFsLCByZW5kZXJpbmcsIFRleHR1cmUyRCxcclxufSBmcm9tICdjYyc7XHJcblxyXG5pbXBvcnQgeyBFRElUT1IgfSBmcm9tICdjYy9lbnYnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIGZpbGxSZXF1aXJlZFBpcGVsaW5lU2V0dGluZ3MsIG1ha2VQaXBlbGluZVNldHRpbmdzLCBQaXBlbGluZVNldHRpbmdzLFxyXG59IGZyb20gJy4vYnVpbHRpbi1waXBlbGluZS10eXBlcyc7XHJcblxyXG5jb25zdCB7IGNjY2xhc3MsIGRpc2FsbG93TXVsdGlwbGUsIGV4ZWN1dGVJbkVkaXRNb2RlLCBtZW51LCBwcm9wZXJ0eSwgcmVxdWlyZUNvbXBvbmVudCwgdHlwZSB9ID0gX2RlY29yYXRvcjtcclxuXHJcbkBjY2NsYXNzKCdCdWlsdGluUGlwZWxpbmVTZXR0aW5ncycpXHJcbkBtZW51KCdSZW5kZXJpbmcvQnVpbHRpblBpcGVsaW5lU2V0dGluZ3MnKVxyXG5AcmVxdWlyZUNvbXBvbmVudChDYW1lcmEpXHJcbkBkaXNhbGxvd011bHRpcGxlXHJcbkBleGVjdXRlSW5FZGl0TW9kZVxyXG5leHBvcnQgY2xhc3MgQnVpbHRpblBpcGVsaW5lU2V0dGluZ3MgZXh0ZW5kcyBDb21wb25lbnQge1xyXG4gICAgQHByb3BlcnR5XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9zZXR0aW5nczogUGlwZWxpbmVTZXR0aW5ncyA9IG1ha2VQaXBlbGluZVNldHRpbmdzKCk7XHJcblxyXG4gICAgZ2V0UGlwZWxpbmVTZXR0aW5ncygpOiBQaXBlbGluZVNldHRpbmdzIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fc2V0dGluZ3M7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRW5hYmxlL0Rpc2FibGVcclxuICAgIG9uRW5hYmxlKCk6IHZvaWQge1xyXG4gICAgICAgIGZpbGxSZXF1aXJlZFBpcGVsaW5lU2V0dGluZ3ModGhpcy5fc2V0dGluZ3MpO1xyXG4gICAgICAgIGNvbnN0IGNhbWVyYUNvbXBvbmVudCA9IHRoaXMuZ2V0Q29tcG9uZW50KENhbWVyYSkhO1xyXG4gICAgICAgIGNvbnN0IGNhbWVyYSA9IGNhbWVyYUNvbXBvbmVudC5jYW1lcmE7XHJcbiAgICAgICAgY2FtZXJhLnBpcGVsaW5lU2V0dGluZ3MgPSB0aGlzLl9zZXR0aW5ncztcclxuXHJcbiAgICAgICAgaWYgKEVESVRPUikge1xyXG4gICAgICAgICAgICB0aGlzLl90cnlFbmFibGVFZGl0b3JQcmV2aWV3KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgb25EaXNhYmxlKCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IGNhbWVyYUNvbXBvbmVudCA9IHRoaXMuZ2V0Q29tcG9uZW50KENhbWVyYSkhO1xyXG4gICAgICAgIGNvbnN0IGNhbWVyYSA9IGNhbWVyYUNvbXBvbmVudC5jYW1lcmE7XHJcbiAgICAgICAgY2FtZXJhLnBpcGVsaW5lU2V0dGluZ3MgPSBudWxsO1xyXG5cclxuICAgICAgICBpZiAoRURJVE9SKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2Rpc2FibGVFZGl0b3JQcmV2aWV3KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIEVkaXRvciBQcmV2aWV3XHJcbiAgICBAcHJvcGVydHkoQ0NCb29sZWFuKVxyXG4gICAgcHJvdGVjdGVkIF9lZGl0b3JQcmV2aWV3ID0gZmFsc2U7XHJcblxyXG4gICAgQHByb3BlcnR5KHtcclxuICAgICAgICBkaXNwbGF5TmFtZTogJ0VkaXRvciBQcmV2aWV3IChFeHBlcmltZW50YWwpJyxcclxuICAgICAgICB0eXBlOiBDQ0Jvb2xlYW4sXHJcbiAgICB9KVxyXG4gICAgZ2V0IGVkaXRvclByZXZpZXcoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VkaXRvclByZXZpZXc7XHJcbiAgICB9XHJcbiAgICBzZXQgZWRpdG9yUHJldmlldyh2OiBib29sZWFuKSB7XHJcbiAgICAgICAgdGhpcy5fZWRpdG9yUHJldmlldyA9IHY7XHJcbiAgICAgICAgaWYgKEVESVRPUikge1xyXG4gICAgICAgICAgICB0aGlzLl90cnlFbmFibGVFZGl0b3JQcmV2aWV3KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHVibGljIF90cnlFbmFibGVFZGl0b3JQcmV2aWV3KCk6IHZvaWQge1xyXG4gICAgICAgIGlmIChyZW5kZXJpbmcgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLl9lZGl0b3JQcmV2aWV3KSB7XHJcbiAgICAgICAgICAgIHJlbmRlcmluZy5zZXRFZGl0b3JQaXBlbGluZVNldHRpbmdzKHRoaXMuX3NldHRpbmdzKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9kaXNhYmxlRWRpdG9yUHJldmlldygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHB1YmxpYyBfZGlzYWJsZUVkaXRvclByZXZpZXcoKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHJlbmRlcmluZyA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgY3VycmVudCA9IHJlbmRlcmluZy5nZXRFZGl0b3JQaXBlbGluZVNldHRpbmdzKCkgYXMgUGlwZWxpbmVTZXR0aW5ncyB8IG51bGw7XHJcbiAgICAgICAgaWYgKGN1cnJlbnQgPT09IHRoaXMuX3NldHRpbmdzKSB7XHJcbiAgICAgICAgICAgIHJlbmRlcmluZy5zZXRFZGl0b3JQaXBlbGluZVNldHRpbmdzKG51bGwpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBNU0FBXHJcbiAgICBAcHJvcGVydHkoe1xyXG4gICAgICAgIGdyb3VwOiB7IGlkOiAnTVNBQScsIG5hbWU6ICdNdWx0aXNhbXBsZSBBbnRpLUFsaWFzaW5nJyB9LFxyXG4gICAgICAgIHR5cGU6IENDQm9vbGVhbixcclxuICAgIH0pXHJcbiAgICBnZXQgTXNhYUVuYWJsZSgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fc2V0dGluZ3MubXNhYS5lbmFibGVkO1xyXG4gICAgfVxyXG4gICAgc2V0IE1zYWFFbmFibGUodmFsdWU6IGJvb2xlYW4pIHtcclxuICAgICAgICB0aGlzLl9zZXR0aW5ncy5tc2FhLmVuYWJsZWQgPSB2YWx1ZTtcclxuICAgICAgICBpZiAoRURJVE9SKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3RyeUVuYWJsZUVkaXRvclByZXZpZXcoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgQHByb3BlcnR5KHtcclxuICAgICAgICBncm91cDogeyBpZDogJ01TQUEnLCBuYW1lOiAnTXVsdGlzYW1wbGUgQW50aS1BbGlhc2luZycsIHN0eWxlOiAnc2VjdGlvbicgfSxcclxuICAgICAgICB0eXBlOiBDQ0ludGVnZXIsXHJcbiAgICAgICAgcmFuZ2U6IFsyLCA0LCAyXSxcclxuICAgIH0pXHJcbiAgICBzZXQgbXNhYVNhbXBsZUNvdW50KHZhbHVlOiBudW1iZXIpIHtcclxuICAgICAgICB2YWx1ZSA9IDIgKiogTWF0aC5jZWlsKE1hdGgubG9nMihNYXRoLm1heCh2YWx1ZSwgMikpKTtcclxuICAgICAgICB2YWx1ZSA9IE1hdGgubWluKHZhbHVlLCA0KTtcclxuICAgICAgICB0aGlzLl9zZXR0aW5ncy5tc2FhLnNhbXBsZUNvdW50ID0gdmFsdWU7XHJcbiAgICAgICAgaWYgKEVESVRPUikge1xyXG4gICAgICAgICAgICB0aGlzLl90cnlFbmFibGVFZGl0b3JQcmV2aWV3KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0IG1zYWFTYW1wbGVDb3VudCgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9zZXR0aW5ncy5tc2FhLnNhbXBsZUNvdW50O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFNoYWRpbmcgU2NhbGVcclxuICAgIEBwcm9wZXJ0eSh7XHJcbiAgICAgICAgZ3JvdXA6IHsgaWQ6ICdTaGFkaW5nU2NhbGUnLCBuYW1lOiAnU2hhZGluZ1NjYWxlJywgc3R5bGU6ICdzZWN0aW9uJyB9LFxyXG4gICAgICAgIHR5cGU6IENDQm9vbGVhbixcclxuICAgIH0pXHJcbiAgICBzZXQgc2hhZGluZ1NjYWxlRW5hYmxlKHZhbHVlOiBib29sZWFuKSB7XHJcbiAgICAgICAgdGhpcy5fc2V0dGluZ3MuZW5hYmxlU2hhZGluZ1NjYWxlID0gdmFsdWU7XHJcbiAgICAgICAgaWYgKEVESVRPUikge1xyXG4gICAgICAgICAgICB0aGlzLl90cnlFbmFibGVFZGl0b3JQcmV2aWV3KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0IHNoYWRpbmdTY2FsZUVuYWJsZSgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fc2V0dGluZ3MuZW5hYmxlU2hhZGluZ1NjYWxlO1xyXG4gICAgfVxyXG5cclxuICAgIEBwcm9wZXJ0eSh7XHJcbiAgICAgICAgdG9vbHRpcDogJ2kxOG46cG9zdHByb2Nlc3Muc2hhZGluZ1NjYWxlJyxcclxuICAgICAgICBncm91cDogeyBpZDogJ1NoYWRpbmdTY2FsZScsIG5hbWU6ICdTaGFkaW5nU2NhbGUnIH0sXHJcbiAgICAgICAgdHlwZTogQ0NGbG9hdCxcclxuICAgICAgICByYW5nZTogWzAuMDEsIDQsIDAuMDFdLFxyXG4gICAgICAgIHNsaWRlOiB0cnVlLFxyXG4gICAgfSlcclxuICAgIHNldCBzaGFkaW5nU2NhbGUodmFsdWU6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMuX3NldHRpbmdzLnNoYWRpbmdTY2FsZSA9IHZhbHVlO1xyXG4gICAgICAgIGlmIChFRElUT1IpIHtcclxuICAgICAgICAgICAgdGhpcy5fdHJ5RW5hYmxlRWRpdG9yUHJldmlldygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGdldCBzaGFkaW5nU2NhbGUoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fc2V0dGluZ3Muc2hhZGluZ1NjYWxlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEJsb29tXHJcbiAgICBAcHJvcGVydHkoe1xyXG4gICAgICAgIGdyb3VwOiB7IGlkOiAnQmxvb20nLCBuYW1lOiAnQmxvb20gKFBvc3RQcm9jZXNzaW5nKScsIHN0eWxlOiAnc2VjdGlvbicgfSxcclxuICAgICAgICB0eXBlOiBDQ0Jvb2xlYW4sXHJcbiAgICB9KVxyXG4gICAgc2V0IGJsb29tRW5hYmxlKHZhbHVlOiBib29sZWFuKSB7XHJcbiAgICAgICAgdGhpcy5fc2V0dGluZ3MuYmxvb20uZW5hYmxlZCA9IHZhbHVlO1xyXG4gICAgICAgIGlmIChFRElUT1IpIHtcclxuICAgICAgICAgICAgdGhpcy5fdHJ5RW5hYmxlRWRpdG9yUHJldmlldygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGdldCBibG9vbUVuYWJsZSgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fc2V0dGluZ3MuYmxvb20uZW5hYmxlZDtcclxuICAgIH1cclxuXHJcbiAgICBAcHJvcGVydHkoe1xyXG4gICAgICAgIGdyb3VwOiB7IGlkOiAnQmxvb20nLCBuYW1lOiAnQmxvb20gKFBvc3RQcm9jZXNzaW5nKScsIHN0eWxlOiAnc2VjdGlvbicgfSxcclxuICAgICAgICB0eXBlOiBNYXRlcmlhbCxcclxuICAgIH0pXHJcbiAgICBzZXQgYmxvb21NYXRlcmlhbCh2YWx1ZTogTWF0ZXJpYWwpIHtcclxuICAgICAgICBpZiAodGhpcy5fc2V0dGluZ3MuYmxvb20ubWF0ZXJpYWwgPT09IHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fc2V0dGluZ3MuYmxvb20ubWF0ZXJpYWwgPSB2YWx1ZTtcclxuICAgICAgICBpZiAoRURJVE9SKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3RyeUVuYWJsZUVkaXRvclByZXZpZXcoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnZXQgYmxvb21NYXRlcmlhbCgpOiBNYXRlcmlhbCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NldHRpbmdzLmJsb29tLm1hdGVyaWFsITtcclxuICAgIH1cclxuXHJcbiAgICBAcHJvcGVydHkoe1xyXG4gICAgICAgIHRvb2x0aXA6ICdpMThuOmJsb29tLmVuYWJsZUFscGhhTWFzaycsXHJcbiAgICAgICAgZ3JvdXA6IHsgaWQ6ICdCbG9vbScsIG5hbWU6ICdCbG9vbSAoUG9zdFByb2Nlc3NpbmcpJywgc3R5bGU6ICdzZWN0aW9uJyB9LFxyXG4gICAgICAgIHR5cGU6IENDQm9vbGVhbixcclxuICAgIH0pXHJcbiAgICBzZXQgYmxvb21FbmFibGVBbHBoYU1hc2sodmFsdWU6IGJvb2xlYW4pIHtcclxuICAgICAgICB0aGlzLl9zZXR0aW5ncy5ibG9vbS5lbmFibGVBbHBoYU1hc2sgPSB2YWx1ZTtcclxuICAgICAgICBpZiAoRURJVE9SKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3RyeUVuYWJsZUVkaXRvclByZXZpZXcoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnZXQgYmxvb21FbmFibGVBbHBoYU1hc2soKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NldHRpbmdzLmJsb29tLmVuYWJsZUFscGhhTWFzaztcclxuICAgIH1cclxuXHJcbiAgICBAcHJvcGVydHkoe1xyXG4gICAgICAgIHRvb2x0aXA6ICdpMThuOmJsb29tLml0ZXJhdGlvbnMnLFxyXG4gICAgICAgIGdyb3VwOiB7IGlkOiAnQmxvb20nLCBuYW1lOiAnQmxvb20gKFBvc3RQcm9jZXNzaW5nKScsIHN0eWxlOiAnc2VjdGlvbicgfSxcclxuICAgICAgICB0eXBlOiBDQ0ludGVnZXIsXHJcbiAgICAgICAgcmFuZ2U6IFsxLCA2LCAxXSxcclxuICAgICAgICBzbGlkZTogdHJ1ZSxcclxuICAgIH0pXHJcbiAgICBzZXQgYmxvb21JdGVyYXRpb25zKHZhbHVlOiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLl9zZXR0aW5ncy5ibG9vbS5pdGVyYXRpb25zID0gdmFsdWU7XHJcbiAgICAgICAgaWYgKEVESVRPUikge1xyXG4gICAgICAgICAgICB0aGlzLl90cnlFbmFibGVFZGl0b3JQcmV2aWV3KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0IGJsb29tSXRlcmF0aW9ucygpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9zZXR0aW5ncy5ibG9vbS5pdGVyYXRpb25zO1xyXG4gICAgfVxyXG5cclxuICAgIEBwcm9wZXJ0eSh7XHJcbiAgICAgICAgdG9vbHRpcDogJ2kxOG46Ymxvb20udGhyZXNob2xkJyxcclxuICAgICAgICBncm91cDogeyBpZDogJ0Jsb29tJywgbmFtZTogJ0Jsb29tIChQb3N0UHJvY2Vzc2luZyknLCBzdHlsZTogJ3NlY3Rpb24nIH0sXHJcbiAgICAgICAgdHlwZTogQ0NGbG9hdCxcclxuICAgICAgICBtaW46IDAsXHJcbiAgICB9KVxyXG4gICAgc2V0IGJsb29tVGhyZXNob2xkKHZhbHVlOiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLl9zZXR0aW5ncy5ibG9vbS50aHJlc2hvbGQgPSB2YWx1ZTtcclxuICAgIH1cclxuICAgIGdldCBibG9vbVRocmVzaG9sZCgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9zZXR0aW5ncy5ibG9vbS50aHJlc2hvbGQ7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IGJsb29tSW50ZW5zaXR5KHZhbHVlOiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLl9zZXR0aW5ncy5ibG9vbS5pbnRlbnNpdHkgPSB2YWx1ZTtcclxuICAgIH1cclxuICAgIGdldCBibG9vbUludGVuc2l0eSgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9zZXR0aW5ncy5ibG9vbS5pbnRlbnNpdHk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ29sb3IgR3JhZGluZyAoTERSKVxyXG4gICAgQHByb3BlcnR5KHtcclxuICAgICAgICBncm91cDogeyBpZDogJ0NvbG9yIEdyYWRpbmcnLCBuYW1lOiAnQ29sb3JHcmFkaW5nIChMRFIpIChQb3N0UHJvY2Vzc2luZyknLCBzdHlsZTogJ3NlY3Rpb24nIH0sXHJcbiAgICAgICAgdHlwZTogQ0NCb29sZWFuLFxyXG4gICAgfSlcclxuICAgIHNldCBjb2xvckdyYWRpbmdFbmFibGUodmFsdWU6IGJvb2xlYW4pIHtcclxuICAgICAgICB0aGlzLl9zZXR0aW5ncy5jb2xvckdyYWRpbmcuZW5hYmxlZCA9IHZhbHVlO1xyXG4gICAgICAgIGlmIChFRElUT1IpIHtcclxuICAgICAgICAgICAgdGhpcy5fdHJ5RW5hYmxlRWRpdG9yUHJldmlldygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGdldCBjb2xvckdyYWRpbmdFbmFibGUoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NldHRpbmdzLmNvbG9yR3JhZGluZy5lbmFibGVkO1xyXG4gICAgfVxyXG5cclxuICAgIEBwcm9wZXJ0eSh7XHJcbiAgICAgICAgZ3JvdXA6IHsgaWQ6ICdDb2xvciBHcmFkaW5nJywgbmFtZTogJ0NvbG9yR3JhZGluZyAoTERSKSAoUG9zdFByb2Nlc3NpbmcpJywgc3R5bGU6ICdzZWN0aW9uJyB9LFxyXG4gICAgICAgIHR5cGU6IE1hdGVyaWFsLFxyXG4gICAgfSlcclxuICAgIHNldCBjb2xvckdyYWRpbmdNYXRlcmlhbCh2YWx1ZTogTWF0ZXJpYWwpIHtcclxuICAgICAgICBpZiAodGhpcy5fc2V0dGluZ3MuY29sb3JHcmFkaW5nLm1hdGVyaWFsID09PSB2YWx1ZSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX3NldHRpbmdzLmNvbG9yR3JhZGluZy5tYXRlcmlhbCA9IHZhbHVlO1xyXG4gICAgICAgIGlmIChFRElUT1IpIHtcclxuICAgICAgICAgICAgdGhpcy5fdHJ5RW5hYmxlRWRpdG9yUHJldmlldygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGdldCBjb2xvckdyYWRpbmdNYXRlcmlhbCgpOiBNYXRlcmlhbCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NldHRpbmdzLmNvbG9yR3JhZGluZy5tYXRlcmlhbCE7XHJcbiAgICB9XHJcblxyXG4gICAgQHByb3BlcnR5KHtcclxuICAgICAgICB0b29sdGlwOiAnaTE4bjpjb2xvcl9ncmFkaW5nLmNvbnRyaWJ1dGUnLFxyXG4gICAgICAgIGdyb3VwOiB7IGlkOiAnQ29sb3IgR3JhZGluZycsIG5hbWU6ICdDb2xvckdyYWRpbmcgKExEUikgKFBvc3RQcm9jZXNzaW5nKScsIHN0eWxlOiAnc2VjdGlvbicgfSxcclxuICAgICAgICB0eXBlOiBDQ0Zsb2F0LFxyXG4gICAgICAgIHJhbmdlOiBbMCwgMSwgMC4wMV0sXHJcbiAgICAgICAgc2xpZGU6IHRydWUsXHJcbiAgICB9KVxyXG4gICAgc2V0IGNvbG9yR3JhZGluZ0NvbnRyaWJ1dGUodmFsdWU6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMuX3NldHRpbmdzLmNvbG9yR3JhZGluZy5jb250cmlidXRlID0gdmFsdWU7XHJcbiAgICB9XHJcbiAgICBnZXQgY29sb3JHcmFkaW5nQ29udHJpYnV0ZSgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9zZXR0aW5ncy5jb2xvckdyYWRpbmcuY29udHJpYnV0ZTtcclxuICAgIH1cclxuXHJcbiAgICBAcHJvcGVydHkoe1xyXG4gICAgICAgIHRvb2x0aXA6ICdpMThuOmNvbG9yX2dyYWRpbmcub3JpZ2luYWxNYXAnLFxyXG4gICAgICAgIGdyb3VwOiB7IGlkOiAnQ29sb3IgR3JhZGluZycsIG5hbWU6ICdDb2xvckdyYWRpbmcgKExEUikgKFBvc3RQcm9jZXNzaW5nKScsIHN0eWxlOiAnc2VjdGlvbicgfSxcclxuICAgICAgICB0eXBlOiBUZXh0dXJlMkQsXHJcbiAgICB9KVxyXG4gICAgc2V0IGNvbG9yR3JhZGluZ01hcCh2YWw6IFRleHR1cmUyRCkge1xyXG4gICAgICAgIHRoaXMuX3NldHRpbmdzLmNvbG9yR3JhZGluZy5jb2xvckdyYWRpbmdNYXAgPSB2YWw7XHJcbiAgICAgICAgaWYgKEVESVRPUikge1xyXG4gICAgICAgICAgICB0aGlzLl90cnlFbmFibGVFZGl0b3JQcmV2aWV3KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0IGNvbG9yR3JhZGluZ01hcCgpOiBUZXh0dXJlMkQge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9zZXR0aW5ncy5jb2xvckdyYWRpbmcuY29sb3JHcmFkaW5nTWFwITtcclxuICAgIH1cclxuXHJcbiAgICAvLyBGWEFBXHJcbiAgICBAcHJvcGVydHkoe1xyXG4gICAgICAgIGdyb3VwOiB7IGlkOiAnRlhBQScsIG5hbWU6ICdGYXN0IEFwcHJveGltYXRlIEFudGktQWxpYXNpbmcgKFBvc3RQcm9jZXNzaW5nKScsIHN0eWxlOiAnc2VjdGlvbicgfSxcclxuICAgICAgICB0eXBlOiBDQ0Jvb2xlYW4sXHJcbiAgICB9KVxyXG4gICAgc2V0IGZ4YWFFbmFibGUodmFsdWU6IGJvb2xlYW4pIHtcclxuICAgICAgICB0aGlzLl9zZXR0aW5ncy5meGFhLmVuYWJsZWQgPSB2YWx1ZTtcclxuICAgICAgICBpZiAoRURJVE9SKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3RyeUVuYWJsZUVkaXRvclByZXZpZXcoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnZXQgZnhhYUVuYWJsZSgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fc2V0dGluZ3MuZnhhYS5lbmFibGVkO1xyXG4gICAgfVxyXG5cclxuICAgIEBwcm9wZXJ0eSh7XHJcbiAgICAgICAgZ3JvdXA6IHsgaWQ6ICdGWEFBJywgbmFtZTogJ0Zhc3QgQXBwcm94aW1hdGUgQW50aS1BbGlhc2luZyAoUG9zdFByb2Nlc3NpbmcpJywgc3R5bGU6ICdzZWN0aW9uJyB9LFxyXG4gICAgICAgIHR5cGU6IE1hdGVyaWFsLFxyXG4gICAgfSlcclxuICAgIHNldCBmeGFhTWF0ZXJpYWwodmFsdWU6IE1hdGVyaWFsKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX3NldHRpbmdzLmZ4YWEubWF0ZXJpYWwgPT09IHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fc2V0dGluZ3MuZnhhYS5tYXRlcmlhbCA9IHZhbHVlO1xyXG4gICAgICAgIGlmIChFRElUT1IpIHtcclxuICAgICAgICAgICAgdGhpcy5fdHJ5RW5hYmxlRWRpdG9yUHJldmlldygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGdldCBmeGFhTWF0ZXJpYWwoKTogTWF0ZXJpYWwge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9zZXR0aW5ncy5meGFhLm1hdGVyaWFsITtcclxuICAgIH1cclxuXHJcbiAgICAvLyBGU1JcclxuICAgIEBwcm9wZXJ0eSh7XHJcbiAgICAgICAgZ3JvdXA6IHsgaWQ6ICdGU1InLCBuYW1lOiAnRmlkZWxpdHlGWCBTdXBlciBSZXNvbHV0aW9uJywgc3R5bGU6ICdzZWN0aW9uJyB9LFxyXG4gICAgICAgIHR5cGU6IENDQm9vbGVhbixcclxuICAgIH0pXHJcbiAgICBzZXQgZnNyRW5hYmxlKHZhbHVlOiBib29sZWFuKSB7XHJcbiAgICAgICAgdGhpcy5fc2V0dGluZ3MuZnNyLmVuYWJsZWQgPSB2YWx1ZTtcclxuICAgICAgICBpZiAoRURJVE9SKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3RyeUVuYWJsZUVkaXRvclByZXZpZXcoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnZXQgZnNyRW5hYmxlKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9zZXR0aW5ncy5mc3IuZW5hYmxlZDtcclxuICAgIH1cclxuXHJcbiAgICBAcHJvcGVydHkoe1xyXG4gICAgICAgIGdyb3VwOiB7IGlkOiAnRlNSJywgbmFtZTogJ0ZpZGVsaXR5RlggU3VwZXIgUmVzb2x1dGlvbicsIHN0eWxlOiAnc2VjdGlvbicgfSxcclxuICAgICAgICB0eXBlOiBNYXRlcmlhbCxcclxuICAgIH0pXHJcbiAgICBzZXQgZnNyTWF0ZXJpYWwodmFsdWU6IE1hdGVyaWFsKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX3NldHRpbmdzLmZzci5tYXRlcmlhbCA9PT0gdmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9zZXR0aW5ncy5mc3IubWF0ZXJpYWwgPSB2YWx1ZTtcclxuICAgICAgICBpZiAoRURJVE9SKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3RyeUVuYWJsZUVkaXRvclByZXZpZXcoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnZXQgZnNyTWF0ZXJpYWwoKTogTWF0ZXJpYWwge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9zZXR0aW5ncy5mc3IubWF0ZXJpYWwhO1xyXG4gICAgfVxyXG5cclxuICAgIEBwcm9wZXJ0eSh7XHJcbiAgICAgICAgZ3JvdXA6IHsgaWQ6ICdGU1InLCBuYW1lOiAnRmlkZWxpdHlGWCBTdXBlciBSZXNvbHV0aW9uJywgc3R5bGU6ICdzZWN0aW9uJyB9LFxyXG4gICAgICAgIHR5cGU6IENDRmxvYXQsXHJcbiAgICAgICAgcmFuZ2U6IFswLCAxLCAwLjAxXSxcclxuICAgICAgICBzbGlkZTogdHJ1ZSxcclxuICAgIH0pXHJcbiAgICBzZXQgZnNyU2hhcnBuZXNzKHZhbHVlOiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLl9zZXR0aW5ncy5mc3Iuc2hhcnBuZXNzID0gdmFsdWU7XHJcbiAgICB9XHJcbiAgICBnZXQgZnNyU2hhcnBuZXNzKCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NldHRpbmdzLmZzci5zaGFycG5lc3M7XHJcbiAgICB9XHJcblxyXG4gICAgQHByb3BlcnR5KHtcclxuICAgICAgICBncm91cDogeyBpZDogJ1RvbmVNYXBwaW5nJywgbmFtZTogJ1RvbmVNYXBwaW5nJywgc3R5bGU6ICdzZWN0aW9uJyB9LFxyXG4gICAgICAgIHR5cGU6IE1hdGVyaWFsLFxyXG4gICAgfSlcclxuICAgIHNldCB0b25lTWFwcGluZ01hdGVyaWFsKHZhbHVlOiBNYXRlcmlhbCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9zZXR0aW5ncy50b25lTWFwcGluZy5tYXRlcmlhbCA9PT0gdmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9zZXR0aW5ncy50b25lTWFwcGluZy5tYXRlcmlhbCA9IHZhbHVlO1xyXG4gICAgICAgIGlmIChFRElUT1IpIHtcclxuICAgICAgICAgICAgdGhpcy5fdHJ5RW5hYmxlRWRpdG9yUHJldmlldygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGdldCB0b25lTWFwcGluZ01hdGVyaWFsKCk6IE1hdGVyaWFsIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fc2V0dGluZ3MudG9uZU1hcHBpbmcubWF0ZXJpYWwhO1xyXG4gICAgfVxyXG59XHJcbiIsIi8qXHJcbiBDb3B5cmlnaHQgKGMpIDIwMjEtMjAyNCBYaWFtZW4gWWFqaSBTb2Z0d2FyZSBDby4sIEx0ZC5cclxuXHJcbiBodHRwczovL3d3dy5jb2Nvcy5jb20vXHJcblxyXG4gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxyXG4gb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbFxyXG4gaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0b1xyXG4gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXNcclxuIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbyxcclxuIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxyXG5cclxuIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluXHJcbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cclxuXHJcbiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXHJcbiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcclxuIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxyXG4gQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxyXG4gTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSxcclxuIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU5cclxuIFRIRSBTT0ZUV0FSRS5cclxuKi9cclxuXHJcbmltcG9ydCB7XHJcbiAgICBhc3NlcnQsIGNjbGVnYWN5LCBjbGFtcCwgZ2VvbWV0cnksIGdmeCwgTGF5ZXJzLCBNYXRlcmlhbCwgcGlwZWxpbmUsXHJcbiAgICBQaXBlbGluZUV2ZW50UHJvY2Vzc29yLCBQaXBlbGluZUV2ZW50VHlwZSwgUmVmbGVjdGlvblByb2JlTWFuYWdlciwgcmVuZGVyZXIsXHJcbiAgICByZW5kZXJpbmcsIHN5cywgVmVjMiwgVmVjMywgVmVjNCwgd2FybixcclxufSBmcm9tICdjYyc7XHJcblxyXG5pbXBvcnQgeyBERUJVRywgRURJVE9SIH0gZnJvbSAnY2MvZW52JztcclxuXHJcbmltcG9ydCB7XHJcbiAgICBtYWtlUGlwZWxpbmVTZXR0aW5ncyxcclxuICAgIFBpcGVsaW5lU2V0dGluZ3MsXHJcbn0gZnJvbSAnLi9idWlsdGluLXBpcGVsaW5lLXR5cGVzJztcclxuXHJcbmNvbnN0IHsgQUFCQiwgU3BoZXJlLCBpbnRlcnNlY3QgfSA9IGdlb21ldHJ5O1xyXG5jb25zdCB7IENsZWFyRmxhZ0JpdCwgQ29sb3IsIEZvcm1hdCwgRm9ybWF0RmVhdHVyZUJpdCwgTG9hZE9wLCBTdG9yZU9wLCBUZXh0dXJlVHlwZSwgVmlld3BvcnQgfSA9IGdmeDtcclxuY29uc3QgeyBzY2VuZSB9ID0gcmVuZGVyZXI7XHJcbmNvbnN0IHsgQ2FtZXJhVXNhZ2UsIENTTUxldmVsLCBMaWdodFR5cGUgfSA9IHNjZW5lO1xyXG5cclxuZnVuY3Rpb24gZm9yd2FyZE5lZWRDbGVhckNvbG9yKGNhbWVyYTogcmVuZGVyZXIuc2NlbmUuQ2FtZXJhKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gISEoY2FtZXJhLmNsZWFyRmxhZyAmIChDbGVhckZsYWdCaXQuQ09MT1IgfCAoQ2xlYXJGbGFnQml0LlNURU5DSUwgPDwgMSkpKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0Q3NtTWFpbkxpZ2h0Vmlld3BvcnQoXHJcbiAgICBsaWdodDogcmVuZGVyZXIuc2NlbmUuRGlyZWN0aW9uYWxMaWdodCxcclxuICAgIHc6IG51bWJlcixcclxuICAgIGg6IG51bWJlcixcclxuICAgIGxldmVsOiBudW1iZXIsXHJcbiAgICB2cDogZ2Z4LlZpZXdwb3J0LFxyXG4gICAgc2NyZWVuU3BhY2VTaWduWTogbnVtYmVyLFxyXG4pOiB2b2lkIHtcclxuICAgIGlmIChsaWdodC5zaGFkb3dGaXhlZEFyZWEgfHwgbGlnaHQuY3NtTGV2ZWwgPT09IENTTUxldmVsLkxFVkVMXzEpIHtcclxuICAgICAgICB2cC5sZWZ0ID0gMDtcclxuICAgICAgICB2cC50b3AgPSAwO1xyXG4gICAgICAgIHZwLndpZHRoID0gTWF0aC50cnVuYyh3KTtcclxuICAgICAgICB2cC5oZWlnaHQgPSBNYXRoLnRydW5jKGgpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICB2cC5sZWZ0ID0gTWF0aC50cnVuYyhsZXZlbCAlIDIgKiAwLjUgKiB3KTtcclxuICAgICAgICBpZiAoc2NyZWVuU3BhY2VTaWduWSA+IDApIHtcclxuICAgICAgICAgICAgdnAudG9wID0gTWF0aC50cnVuYygoMSAtIE1hdGguZmxvb3IobGV2ZWwgLyAyKSkgKiAwLjUgKiBoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB2cC50b3AgPSBNYXRoLnRydW5jKE1hdGguZmxvb3IobGV2ZWwgLyAyKSAqIDAuNSAqIGgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2cC53aWR0aCA9IE1hdGgudHJ1bmMoMC41ICogdyk7XHJcbiAgICAgICAgdnAuaGVpZ2h0ID0gTWF0aC50cnVuYygwLjUgKiBoKTtcclxuICAgIH1cclxuICAgIHZwLmxlZnQgPSBNYXRoLm1heCgwLCB2cC5sZWZ0KTtcclxuICAgIHZwLnRvcCA9IE1hdGgubWF4KDAsIHZwLnRvcCk7XHJcbiAgICB2cC53aWR0aCA9IE1hdGgubWF4KDEsIHZwLndpZHRoKTtcclxuICAgIHZwLmhlaWdodCA9IE1hdGgubWF4KDEsIHZwLmhlaWdodCk7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBQaXBlbGluZUNvbmZpZ3Mge1xyXG4gICAgaXNXZWIgPSBmYWxzZTtcclxuICAgIGlzV2ViR0wxID0gZmFsc2U7XHJcbiAgICBpc1dlYkdQVSA9IGZhbHNlO1xyXG4gICAgaXNNb2JpbGUgPSBmYWxzZTtcclxuICAgIGlzSERSID0gZmFsc2U7XHJcbiAgICB1c2VGbG9hdE91dHB1dCA9IGZhbHNlO1xyXG4gICAgdG9uZU1hcHBpbmdUeXBlID0gMDsgLy8gMDogQUNFUywgMTogTm9uZVxyXG4gICAgc2hhZG93RW5hYmxlZCA9IGZhbHNlO1xyXG4gICAgc2hhZG93TWFwRm9ybWF0ID0gRm9ybWF0LlIzMkY7XHJcbiAgICBzaGFkb3dNYXBTaXplID0gbmV3IFZlYzIoMSwgMSk7XHJcbiAgICB1c2VQbGFuYXJTaGFkb3cgPSBmYWxzZTtcclxuICAgIHNjcmVlblNwYWNlU2lnblkgPSAxO1xyXG4gICAgc3VwcG9ydERlcHRoU2FtcGxlID0gZmFsc2U7XHJcbiAgICBtb2JpbGVNYXhTcG90TGlnaHRTaGFkb3dNYXBzID0gMTtcclxuXHJcbiAgICBwbGF0Zm9ybSA9IG5ldyBWZWM0KDAsIDAsIDAsIDApO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzZXR1cFBpcGVsaW5lQ29uZmlncyhcclxuICAgIHBwbDogcmVuZGVyaW5nLkJhc2ljUGlwZWxpbmUsXHJcbiAgICBjb25maWdzOiBQaXBlbGluZUNvbmZpZ3MsXHJcbik6IHZvaWQge1xyXG4gICAgY29uc3Qgc2FtcGxlRmVhdHVyZSA9IEZvcm1hdEZlYXR1cmVCaXQuU0FNUExFRF9URVhUVVJFIHwgRm9ybWF0RmVhdHVyZUJpdC5MSU5FQVJfRklMVEVSO1xyXG4gICAgY29uc3QgZGV2aWNlID0gcHBsLmRldmljZTtcclxuICAgIC8vIFBsYXRmb3JtXHJcbiAgICBjb25maWdzLmlzV2ViID0gIXN5cy5pc05hdGl2ZTtcclxuICAgIGNvbmZpZ3MuaXNXZWJHTDEgPSBkZXZpY2UuZ2Z4QVBJID09PSBnZnguQVBJLldFQkdMO1xyXG4gICAgY29uZmlncy5pc1dlYkdQVSA9IGRldmljZS5nZnhBUEkgPT09IGdmeC5BUEkuV0VCR1BVO1xyXG4gICAgY29uZmlncy5pc01vYmlsZSA9IHN5cy5pc01vYmlsZTtcclxuXHJcbiAgICAvLyBSZW5kZXJpbmdcclxuICAgIGNvbmZpZ3MuaXNIRFIgPSBwcGwucGlwZWxpbmVTY2VuZURhdGEuaXNIRFI7IC8vIEhhcyB0b25lIG1hcHBpbmdcclxuICAgIGNvbmZpZ3MudXNlRmxvYXRPdXRwdXQgPSBwcGwuZ2V0TWFjcm9Cb29sKCdDQ19VU0VfRkxPQVRfT1VUUFVUJyk7XHJcbiAgICBjb25maWdzLnRvbmVNYXBwaW5nVHlwZSA9IHBwbC5waXBlbGluZVNjZW5lRGF0YS5wb3N0U2V0dGluZ3MudG9uZU1hcHBpbmdUeXBlO1xyXG4gICAgLy8gU2hhZG93XHJcbiAgICBjb25zdCBzaGFkb3dJbmZvID0gcHBsLnBpcGVsaW5lU2NlbmVEYXRhLnNoYWRvd3M7XHJcbiAgICBjb25maWdzLnNoYWRvd0VuYWJsZWQgPSBzaGFkb3dJbmZvLmVuYWJsZWQ7XHJcbiAgICBjb25maWdzLnNoYWRvd01hcEZvcm1hdCA9IHBpcGVsaW5lLnN1cHBvcnRzUjMyRmxvYXRUZXh0dXJlKHBwbC5kZXZpY2UpID8gRm9ybWF0LlIzMkYgOiBGb3JtYXQuUkdCQTg7XHJcbiAgICBjb25maWdzLnNoYWRvd01hcFNpemUuc2V0KHNoYWRvd0luZm8uc2l6ZSk7XHJcbiAgICBjb25maWdzLnVzZVBsYW5hclNoYWRvdyA9IHNoYWRvd0luZm8uZW5hYmxlZCAmJiBzaGFkb3dJbmZvLnR5cGUgPT09IHJlbmRlcmVyLnNjZW5lLlNoYWRvd1R5cGUuUGxhbmFyO1xyXG4gICAgLy8gRGV2aWNlXHJcbiAgICBjb25maWdzLnNjcmVlblNwYWNlU2lnblkgPSBwcGwuZGV2aWNlLmNhcGFiaWxpdGllcy5zY3JlZW5TcGFjZVNpZ25ZO1xyXG4gICAgY29uZmlncy5zdXBwb3J0RGVwdGhTYW1wbGUgPSAocHBsLmRldmljZS5nZXRGb3JtYXRGZWF0dXJlcyhGb3JtYXQuREVQVEhfU1RFTkNJTCkgJiBzYW1wbGVGZWF0dXJlKSA9PT0gc2FtcGxlRmVhdHVyZTtcclxuICAgIC8vIENvbnN0YW50c1xyXG4gICAgY29uc3Qgc2NyZWVuU3BhY2VTaWduWSA9IGRldmljZS5jYXBhYmlsaXRpZXMuc2NyZWVuU3BhY2VTaWduWTtcclxuICAgIGNvbmZpZ3MucGxhdGZvcm0ueCA9IGNvbmZpZ3MuaXNNb2JpbGUgPyAxLjAgOiAwLjA7XHJcbiAgICBjb25maWdzLnBsYXRmb3JtLncgPSAoc2NyZWVuU3BhY2VTaWduWSAqIDAuNSArIDAuNSkgPDwgMSB8IChkZXZpY2UuY2FwYWJpbGl0aWVzLmNsaXBTcGFjZVNpZ25ZICogMC41ICsgMC41KTtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBQaXBlbGluZVNldHRpbmdzMiBleHRlbmRzIFBpcGVsaW5lU2V0dGluZ3Mge1xyXG4gICAgX3Bhc3Nlcz86IHJlbmRlcmluZy5QaXBlbGluZVBhc3NCdWlsZGVyW107XHJcbn1cclxuXHJcbmNvbnN0IGRlZmF1bHRTZXR0aW5ncyA9IG1ha2VQaXBlbGluZVNldHRpbmdzKCk7XHJcblxyXG5leHBvcnQgY2xhc3MgQ2FtZXJhQ29uZmlncyB7XHJcbiAgICBzZXR0aW5nczogUGlwZWxpbmVTZXR0aW5ncyA9IGRlZmF1bHRTZXR0aW5ncztcclxuICAgIC8vIFdpbmRvd1xyXG4gICAgaXNNYWluR2FtZVdpbmRvdyA9IGZhbHNlO1xyXG4gICAgcmVuZGVyV2luZG93SWQgPSAwO1xyXG4gICAgLy8gQ2FtZXJhXHJcbiAgICBjb2xvck5hbWUgPSAnJztcclxuICAgIGRlcHRoU3RlbmNpbE5hbWUgPSAnJztcclxuICAgIC8vIFBpcGVsaW5lXHJcbiAgICBlbmFibGVGdWxsUGlwZWxpbmUgPSBmYWxzZTtcclxuICAgIGVuYWJsZVByb2ZpbGVyID0gZmFsc2U7XHJcbiAgICByZW1haW5pbmdQYXNzZXMgPSAwO1xyXG4gICAgLy8gU2hhZGluZyBTY2FsZVxyXG4gICAgZW5hYmxlU2hhZGluZ1NjYWxlID0gZmFsc2U7XHJcbiAgICBzaGFkaW5nU2NhbGUgPSAxLjA7XHJcbiAgICBuYXRpdmVXaWR0aCA9IDE7XHJcbiAgICBuYXRpdmVIZWlnaHQgPSAxO1xyXG4gICAgd2lkdGggPSAxOyAvLyBTY2FsZWQgd2lkdGhcclxuICAgIGhlaWdodCA9IDE7IC8vIFNjYWxlZCBoZWlnaHRcclxuICAgIC8vIFJhZGlhbmNlXHJcbiAgICBlbmFibGVIRFIgPSBmYWxzZTtcclxuICAgIHJhZGlhbmNlRm9ybWF0ID0gZ2Z4LkZvcm1hdC5SR0JBODtcclxuICAgIC8vIFRvbmUgTWFwcGluZ1xyXG4gICAgY29weUFuZFRvbmVtYXBNYXRlcmlhbDogTWF0ZXJpYWwgfCBudWxsID0gbnVsbDtcclxuICAgIC8vIERlcHRoXHJcbiAgICAvKiogQGVuIG11dGFibGUgKi9cclxuICAgIGVuYWJsZVN0b3JlU2NlbmVEZXB0aCA9IGZhbHNlO1xyXG59XHJcblxyXG5jb25zdCBzQ2xlYXJDb2xvclRyYW5zcGFyZW50QmxhY2sgPSBuZXcgQ29sb3IoMCwgMCwgMCwgMCk7XHJcblxyXG5mdW5jdGlvbiBzb3J0UGlwZWxpbmVQYXNzQnVpbGRlcnNCeUNvbmZpZ09yZGVyKHBhc3NCdWlsZGVyczogcmVuZGVyaW5nLlBpcGVsaW5lUGFzc0J1aWxkZXJbXSk6IHZvaWQge1xyXG4gICAgcGFzc0J1aWxkZXJzLnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgICByZXR1cm4gYS5nZXRDb25maWdPcmRlcigpIC0gYi5nZXRDb25maWdPcmRlcigpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNvcnRQaXBlbGluZVBhc3NCdWlsZGVyc0J5UmVuZGVyT3JkZXIocGFzc0J1aWxkZXJzOiByZW5kZXJpbmcuUGlwZWxpbmVQYXNzQnVpbGRlcltdKTogdm9pZCB7XHJcbiAgICBwYXNzQnVpbGRlcnMuc29ydCgoYSwgYikgPT4ge1xyXG4gICAgICAgIHJldHVybiBhLmdldFJlbmRlck9yZGVyKCkgLSBiLmdldFJlbmRlck9yZGVyKCk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gYWRkQ29weVRvU2NyZWVuUGFzcyhcclxuICAgIHBwbDogcmVuZGVyaW5nLkJhc2ljUGlwZWxpbmUsXHJcbiAgICBwcGxDb25maWdzOiBSZWFkb25seTxQaXBlbGluZUNvbmZpZ3M+LFxyXG4gICAgY2FtZXJhQ29uZmlnczogQ2FtZXJhQ29uZmlncyxcclxuICAgIGlucHV0OiBzdHJpbmcsXHJcbik6IHJlbmRlcmluZy5CYXNpY1JlbmRlclBhc3NCdWlsZGVyIHtcclxuICAgIGFzc2VydCghIWNhbWVyYUNvbmZpZ3MuY29weUFuZFRvbmVtYXBNYXRlcmlhbCk7XHJcbiAgICBjb25zdCBwYXNzID0gcHBsLmFkZFJlbmRlclBhc3MoXHJcbiAgICAgICAgY2FtZXJhQ29uZmlncy5uYXRpdmVXaWR0aCxcclxuICAgICAgICBjYW1lcmFDb25maWdzLm5hdGl2ZUhlaWdodCxcclxuICAgICAgICAnY2MtdG9uZS1tYXBwaW5nJyk7XHJcbiAgICBwYXNzLmFkZFJlbmRlclRhcmdldChcclxuICAgICAgICBjYW1lcmFDb25maWdzLmNvbG9yTmFtZSxcclxuICAgICAgICBMb2FkT3AuQ0xFQVIsIFN0b3JlT3AuU1RPUkUsXHJcbiAgICAgICAgc0NsZWFyQ29sb3JUcmFuc3BhcmVudEJsYWNrKTtcclxuICAgIHBhc3MuYWRkVGV4dHVyZShpbnB1dCwgJ2lucHV0VGV4dHVyZScpO1xyXG4gICAgcGFzcy5zZXRWZWM0KCdnX3BsYXRmb3JtJywgcHBsQ29uZmlncy5wbGF0Zm9ybSk7XHJcbiAgICBwYXNzLmFkZFF1ZXVlKHJlbmRlcmluZy5RdWV1ZUhpbnQuT1BBUVVFKVxyXG4gICAgICAgIC5hZGRGdWxsc2NyZWVuUXVhZChjYW1lcmFDb25maWdzLmNvcHlBbmRUb25lbWFwTWF0ZXJpYWwsIDEpO1xyXG4gICAgcmV0dXJuIHBhc3M7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRQaW5nUG9uZ1JlbmRlclRhcmdldChwcmV2TmFtZTogc3RyaW5nLCBwcmVmaXg6IHN0cmluZywgaWQ6IG51bWJlcik6IHN0cmluZyB7XHJcbiAgICBpZiAocHJldk5hbWUuc3RhcnRzV2l0aChwcmVmaXgpKSB7XHJcbiAgICAgICAgcmV0dXJuIGAke3ByZWZpeH0kezEgLSBOdW1iZXIocHJldk5hbWUuY2hhckF0KHByZWZpeC5sZW5ndGgpKX1fJHtpZH1gO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gYCR7cHJlZml4fTBfJHtpZH1gO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFBpcGVsaW5lQ29udGV4dCB7XHJcbiAgICBjb2xvck5hbWU6IHN0cmluZztcclxuICAgIGRlcHRoU3RlbmNpbE5hbWU6IHN0cmluZztcclxufVxyXG5cclxuY2xhc3MgRm9yd2FyZExpZ2h0aW5nIHtcclxuICAgIC8vIEFjdGl2ZSBsaWdodHNcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgbGlnaHRzOiByZW5kZXJlci5zY2VuZS5MaWdodFtdID0gW107XHJcbiAgICAvLyBBY3RpdmUgc3BvdCBsaWdodHMgd2l0aCBzaGFkb3dzIChNdXR1YWxseSBleGNsdXNpdmUgd2l0aCBgbGlnaHRzYClcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgc2hhZG93RW5hYmxlZFNwb3RMaWdodHM6IHJlbmRlcmVyLnNjZW5lLlNwb3RMaWdodFtdID0gW107XHJcblxyXG4gICAgLy8gSW50ZXJuYWwgY2FjaGVkIHJlc291cmNlc1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfc3BoZXJlID0gU3BoZXJlLmNyZWF0ZSgwLCAwLCAwLCAxKTtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2JvdW5kaW5nQm94ID0gbmV3IEFBQkIoKTtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX3JhbmdlZERpckxpZ2h0Qm91bmRpbmdCb3ggPSBuZXcgQUFCQigwLjAsIDAuMCwgMC4wLCAwLjUsIDAuNSwgMC41KTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAvLyBJbnRlcmZhY2VcclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIHB1YmxpYyBjdWxsTGlnaHRzKHNjZW5lOiByZW5kZXJlci5SZW5kZXJTY2VuZSwgZnJ1c3R1bTogZ2VvbWV0cnkuRnJ1c3R1bSwgY2FtZXJhUG9zPzogVmVjMyk6IHZvaWQge1xyXG4gICAgICAgIC8vIFRPRE8oemhvdXpoZW5nbG9uZyk6IE1ha2UgbGlnaHQgY3VsbGluZyBuYXRpdmVcclxuICAgICAgICB0aGlzLmxpZ2h0cy5sZW5ndGggPSAwO1xyXG4gICAgICAgIHRoaXMuc2hhZG93RW5hYmxlZFNwb3RMaWdodHMubGVuZ3RoID0gMDtcclxuICAgICAgICAvLyBzcG90IGxpZ2h0c1xyXG4gICAgICAgIGZvciAoY29uc3QgbGlnaHQgb2Ygc2NlbmUuc3BvdExpZ2h0cykge1xyXG4gICAgICAgICAgICBpZiAobGlnaHQuYmFrZWQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFNwaGVyZS5zZXQodGhpcy5fc3BoZXJlLCBsaWdodC5wb3NpdGlvbi54LCBsaWdodC5wb3NpdGlvbi55LCBsaWdodC5wb3NpdGlvbi56LCBsaWdodC5yYW5nZSk7XHJcbiAgICAgICAgICAgIGlmIChpbnRlcnNlY3Quc3BoZXJlRnJ1c3R1bSh0aGlzLl9zcGhlcmUsIGZydXN0dW0pKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobGlnaHQuc2hhZG93RW5hYmxlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hhZG93RW5hYmxlZFNwb3RMaWdodHMucHVzaChsaWdodCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGlnaHRzLnB1c2gobGlnaHQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIHNwaGVyZSBsaWdodHNcclxuICAgICAgICBmb3IgKGNvbnN0IGxpZ2h0IG9mIHNjZW5lLnNwaGVyZUxpZ2h0cykge1xyXG4gICAgICAgICAgICBpZiAobGlnaHQuYmFrZWQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFNwaGVyZS5zZXQodGhpcy5fc3BoZXJlLCBsaWdodC5wb3NpdGlvbi54LCBsaWdodC5wb3NpdGlvbi55LCBsaWdodC5wb3NpdGlvbi56LCBsaWdodC5yYW5nZSk7XHJcbiAgICAgICAgICAgIGlmIChpbnRlcnNlY3Quc3BoZXJlRnJ1c3R1bSh0aGlzLl9zcGhlcmUsIGZydXN0dW0pKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxpZ2h0cy5wdXNoKGxpZ2h0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBwb2ludCBsaWdodHNcclxuICAgICAgICBmb3IgKGNvbnN0IGxpZ2h0IG9mIHNjZW5lLnBvaW50TGlnaHRzKSB7XHJcbiAgICAgICAgICAgIGlmIChsaWdodC5iYWtlZCkge1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgU3BoZXJlLnNldCh0aGlzLl9zcGhlcmUsIGxpZ2h0LnBvc2l0aW9uLngsIGxpZ2h0LnBvc2l0aW9uLnksIGxpZ2h0LnBvc2l0aW9uLnosIGxpZ2h0LnJhbmdlKTtcclxuICAgICAgICAgICAgaWYgKGludGVyc2VjdC5zcGhlcmVGcnVzdHVtKHRoaXMuX3NwaGVyZSwgZnJ1c3R1bSkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubGlnaHRzLnB1c2gobGlnaHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIHJhbmdlZCBkaXIgbGlnaHRzXHJcbiAgICAgICAgZm9yIChjb25zdCBsaWdodCBvZiBzY2VuZS5yYW5nZWREaXJMaWdodHMpIHtcclxuICAgICAgICAgICAgQUFCQi50cmFuc2Zvcm0odGhpcy5fYm91bmRpbmdCb3gsIHRoaXMuX3JhbmdlZERpckxpZ2h0Qm91bmRpbmdCb3gsIGxpZ2h0Lm5vZGUhLmdldFdvcmxkTWF0cml4KCkpO1xyXG4gICAgICAgICAgICBpZiAoaW50ZXJzZWN0LmFhYmJGcnVzdHVtKHRoaXMuX2JvdW5kaW5nQm94LCBmcnVzdHVtKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5saWdodHMucHVzaChsaWdodCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjYW1lcmFQb3MpIHtcclxuICAgICAgICAgICAgdGhpcy5zaGFkb3dFbmFibGVkU3BvdExpZ2h0cy5zb3J0KFxyXG4gICAgICAgICAgICAgICAgKGxocywgcmhzKSA9PiBWZWMzLnNxdWFyZWREaXN0YW5jZShjYW1lcmFQb3MsIGxocy5wb3NpdGlvbikgLSBWZWMzLnNxdWFyZWREaXN0YW5jZShjYW1lcmFQb3MsIHJocy5wb3NpdGlvbiksXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBfYWRkTGlnaHRRdWV1ZXMoY2FtZXJhOiByZW5kZXJlci5zY2VuZS5DYW1lcmEsIHBhc3M6IHJlbmRlcmluZy5CYXNpY1JlbmRlclBhc3NCdWlsZGVyKTogdm9pZCB7XHJcbiAgICAgICAgZm9yIChjb25zdCBsaWdodCBvZiB0aGlzLmxpZ2h0cykge1xyXG4gICAgICAgICAgICBjb25zdCBxdWV1ZSA9IHBhc3MuYWRkUXVldWUocmVuZGVyaW5nLlF1ZXVlSGludC5CTEVORCwgJ2ZvcndhcmQtYWRkJyk7XHJcbiAgICAgICAgICAgIHN3aXRjaCAobGlnaHQudHlwZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBMaWdodFR5cGUuU1BIRVJFOlxyXG4gICAgICAgICAgICAgICAgICAgIHF1ZXVlLm5hbWUgPSAnc3BoZXJlLWxpZ2h0JztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgTGlnaHRUeXBlLlNQT1Q6XHJcbiAgICAgICAgICAgICAgICAgICAgcXVldWUubmFtZSA9ICdzcG90LWxpZ2h0JztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgTGlnaHRUeXBlLlBPSU5UOlxyXG4gICAgICAgICAgICAgICAgICAgIHF1ZXVlLm5hbWUgPSAncG9pbnQtbGlnaHQnO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBMaWdodFR5cGUuUkFOR0VEX0RJUkVDVElPTkFMOlxyXG4gICAgICAgICAgICAgICAgICAgIHF1ZXVlLm5hbWUgPSAncmFuZ2VkLWRpcmVjdGlvbmFsLWxpZ2h0JztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgcXVldWUubmFtZSA9ICd1bmtub3duLWxpZ2h0JztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBxdWV1ZS5hZGRTY2VuZShcclxuICAgICAgICAgICAgICAgIGNhbWVyYSxcclxuICAgICAgICAgICAgICAgIHJlbmRlcmluZy5TY2VuZUZsYWdzLkJMRU5ELFxyXG4gICAgICAgICAgICAgICAgbGlnaHQsXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHVibGljIGFkZFNwb3RsaWdodFNoYWRvd1Bhc3NlcyhcclxuICAgICAgICBwcGw6IHJlbmRlcmluZy5CYXNpY1BpcGVsaW5lLFxyXG4gICAgICAgIGNhbWVyYTogcmVuZGVyZXIuc2NlbmUuQ2FtZXJhLFxyXG4gICAgICAgIG1heE51bVNoYWRvd01hcHM6IG51bWJlcixcclxuICAgICk6IHZvaWQge1xyXG4gICAgICAgIGxldCBpID0gMDtcclxuICAgICAgICBmb3IgKGNvbnN0IGxpZ2h0IG9mIHRoaXMuc2hhZG93RW5hYmxlZFNwb3RMaWdodHMpIHtcclxuICAgICAgICAgICAgY29uc3Qgc2hhZG93TWFwU2l6ZSA9IHBwbC5waXBlbGluZVNjZW5lRGF0YS5zaGFkb3dzLnNpemU7XHJcbiAgICAgICAgICAgIGNvbnN0IHNoYWRvd1Bhc3MgPSBwcGwuYWRkUmVuZGVyUGFzcyhzaGFkb3dNYXBTaXplLngsIHNoYWRvd01hcFNpemUueSwgJ2RlZmF1bHQnKTtcclxuICAgICAgICAgICAgc2hhZG93UGFzcy5uYW1lID0gYFNwb3RMaWdodFNoYWRvd1Bhc3Mke2l9YDtcclxuICAgICAgICAgICAgc2hhZG93UGFzcy5hZGRSZW5kZXJUYXJnZXQoYFNwb3RTaGFkb3dNYXAke2l9YCwgTG9hZE9wLkNMRUFSLCBTdG9yZU9wLlNUT1JFLCBuZXcgQ29sb3IoMSwgMSwgMSwgMSkpO1xyXG4gICAgICAgICAgICBzaGFkb3dQYXNzLmFkZERlcHRoU3RlbmNpbChgU3BvdFNoYWRvd0RlcHRoJHtpfWAsIExvYWRPcC5DTEVBUiwgU3RvcmVPcC5ESVNDQVJEKTtcclxuICAgICAgICAgICAgc2hhZG93UGFzcy5hZGRRdWV1ZShyZW5kZXJpbmcuUXVldWVIaW50Lk5PTkUsICdzaGFkb3ctY2FzdGVyJylcclxuICAgICAgICAgICAgICAgIC5hZGRTY2VuZShjYW1lcmEsIHJlbmRlcmluZy5TY2VuZUZsYWdzLk9QQVFVRSB8IHJlbmRlcmluZy5TY2VuZUZsYWdzLk1BU0sgfCByZW5kZXJpbmcuU2NlbmVGbGFncy5TSEFET1dfQ0FTVEVSKVxyXG4gICAgICAgICAgICAgICAgLnVzZUxpZ2h0RnJ1c3R1bShsaWdodCk7XHJcbiAgICAgICAgICAgICsraTtcclxuICAgICAgICAgICAgaWYgKGkgPj0gbWF4TnVtU2hhZG93TWFwcykge1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYWRkTGlnaHRRdWV1ZXMocGFzczogcmVuZGVyaW5nLkJhc2ljUmVuZGVyUGFzc0J1aWxkZXIsXHJcbiAgICAgICAgY2FtZXJhOiByZW5kZXJlci5zY2VuZS5DYW1lcmEsIG1heE51bVNoYWRvd01hcHM6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuX2FkZExpZ2h0UXVldWVzKGNhbWVyYSwgcGFzcyk7XHJcbiAgICAgICAgbGV0IGkgPSAwO1xyXG4gICAgICAgIGZvciAoY29uc3QgbGlnaHQgb2YgdGhpcy5zaGFkb3dFbmFibGVkU3BvdExpZ2h0cykge1xyXG4gICAgICAgICAgICAvLyBBZGQgc3BvdC1saWdodCBwYXNzXHJcbiAgICAgICAgICAgIC8vIFNhdmUgbGFzdCBSZW5kZXJQYXNzIHRvIHRoZSBgcGFzc2AgdmFyaWFibGVcclxuICAgICAgICAgICAgLy8gVE9ETyh6aG91emhlbmdsb25nKTogRml4IHBlciBxdWV1ZSBhZGRUZXh0dXJlXHJcbiAgICAgICAgICAgIHBhc3MuYWRkVGV4dHVyZShgU3BvdFNoYWRvd01hcCR7aX1gLCAnY2Nfc3BvdFNoYWRvd01hcCcpO1xyXG4gICAgICAgICAgICBjb25zdCBxdWV1ZSA9IHBhc3MuYWRkUXVldWUocmVuZGVyaW5nLlF1ZXVlSGludC5CTEVORCwgJ2ZvcndhcmQtYWRkJyk7XHJcbiAgICAgICAgICAgIHF1ZXVlLmFkZFNjZW5lKGNhbWVyYSwgcmVuZGVyaW5nLlNjZW5lRmxhZ3MuQkxFTkQsIGxpZ2h0KTtcclxuICAgICAgICAgICAgKytpO1xyXG4gICAgICAgICAgICBpZiAoaSA+PSBtYXhOdW1TaGFkb3dNYXBzKSB7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBOb3RpY2U6IEZvcndhcmRMaWdodGluZyBjYW5ub3QgaGFuZGxlIGEgbG90IG9mIGxpZ2h0cy5cclxuICAgIC8vIElmIHRoZXJlIGFyZSB0b28gbWFueSBsaWdodHMsIHRoZSBwZXJmb3JtYW5jZSB3aWxsIGJlIHZlcnkgcG9vci5cclxuICAgIC8vIElmIG1hbnkgbGlnaHRzIGFyZSBuZWVkZWQsIHBsZWFzZSBpbXBsZW1lbnQgYSBmb3J3YXJkKyBvciBkZWZlcnJlZCByZW5kZXJpbmcgcGlwZWxpbmUuXHJcbiAgICBwdWJsaWMgYWRkTGlnaHRQYXNzZXMoXHJcbiAgICAgICAgY29sb3JOYW1lOiBzdHJpbmcsXHJcbiAgICAgICAgZGVwdGhTdGVuY2lsTmFtZTogc3RyaW5nLFxyXG4gICAgICAgIGRlcHRoU3RlbmNpbFN0b3JlT3A6IGdmeC5TdG9yZU9wLFxyXG4gICAgICAgIGlkOiBudW1iZXIsIC8vIHdpbmRvdyBpZFxyXG4gICAgICAgIHdpZHRoOiBudW1iZXIsXHJcbiAgICAgICAgaGVpZ2h0OiBudW1iZXIsXHJcbiAgICAgICAgY2FtZXJhOiByZW5kZXJlci5zY2VuZS5DYW1lcmEsXHJcbiAgICAgICAgdmlld3BvcnQ6IGdmeC5WaWV3cG9ydCxcclxuICAgICAgICBwcGw6IHJlbmRlcmluZy5CYXNpY1BpcGVsaW5lLFxyXG4gICAgICAgIHBhc3M6IHJlbmRlcmluZy5CYXNpY1JlbmRlclBhc3NCdWlsZGVyLFxyXG4gICAgKTogcmVuZGVyaW5nLkJhc2ljUmVuZGVyUGFzc0J1aWxkZXIge1xyXG4gICAgICAgIHRoaXMuX2FkZExpZ2h0UXVldWVzKGNhbWVyYSwgcGFzcyk7XHJcblxyXG4gICAgICAgIGxldCBjb3VudCA9IDA7XHJcbiAgICAgICAgY29uc3Qgc2hhZG93TWFwU2l6ZSA9IHBwbC5waXBlbGluZVNjZW5lRGF0YS5zaGFkb3dzLnNpemU7XHJcbiAgICAgICAgZm9yIChjb25zdCBsaWdodCBvZiB0aGlzLnNoYWRvd0VuYWJsZWRTcG90TGlnaHRzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNoYWRvd1Bhc3MgPSBwcGwuYWRkUmVuZGVyUGFzcyhzaGFkb3dNYXBTaXplLngsIHNoYWRvd01hcFNpemUueSwgJ2RlZmF1bHQnKTtcclxuICAgICAgICAgICAgc2hhZG93UGFzcy5uYW1lID0gJ1Nwb3RsaWdodFNoYWRvd1Bhc3MnO1xyXG4gICAgICAgICAgICAvLyBSZXVzZSBjc20gc2hhZG93IG1hcFxyXG4gICAgICAgICAgICBzaGFkb3dQYXNzLmFkZFJlbmRlclRhcmdldChgU2hhZG93TWFwJHtpZH1gLCBMb2FkT3AuQ0xFQVIsIFN0b3JlT3AuU1RPUkUsIG5ldyBDb2xvcigxLCAxLCAxLCAxKSk7XHJcbiAgICAgICAgICAgIHNoYWRvd1Bhc3MuYWRkRGVwdGhTdGVuY2lsKGBTaGFkb3dEZXB0aCR7aWR9YCwgTG9hZE9wLkNMRUFSLCBTdG9yZU9wLkRJU0NBUkQpO1xyXG4gICAgICAgICAgICBzaGFkb3dQYXNzLmFkZFF1ZXVlKHJlbmRlcmluZy5RdWV1ZUhpbnQuTk9ORSwgJ3NoYWRvdy1jYXN0ZXInKVxyXG4gICAgICAgICAgICAgICAgLmFkZFNjZW5lKGNhbWVyYSwgcmVuZGVyaW5nLlNjZW5lRmxhZ3MuT1BBUVVFIHwgcmVuZGVyaW5nLlNjZW5lRmxhZ3MuTUFTSyB8IHJlbmRlcmluZy5TY2VuZUZsYWdzLlNIQURPV19DQVNURVIpXHJcbiAgICAgICAgICAgICAgICAudXNlTGlnaHRGcnVzdHVtKGxpZ2h0KTtcclxuXHJcbiAgICAgICAgICAgIC8vIEFkZCBzcG90LWxpZ2h0IHBhc3NcclxuICAgICAgICAgICAgLy8gU2F2ZSBsYXN0IFJlbmRlclBhc3MgdG8gdGhlIGBwYXNzYCB2YXJpYWJsZVxyXG4gICAgICAgICAgICArK2NvdW50O1xyXG4gICAgICAgICAgICBjb25zdCBzdG9yZU9wID0gY291bnQgPT09IHRoaXMuc2hhZG93RW5hYmxlZFNwb3RMaWdodHMubGVuZ3RoXHJcbiAgICAgICAgICAgICAgICA/IGRlcHRoU3RlbmNpbFN0b3JlT3BcclxuICAgICAgICAgICAgICAgIDogU3RvcmVPcC5TVE9SRTtcclxuXHJcbiAgICAgICAgICAgIHBhc3MgPSBwcGwuYWRkUmVuZGVyUGFzcyh3aWR0aCwgaGVpZ2h0LCAnZGVmYXVsdCcpO1xyXG4gICAgICAgICAgICBwYXNzLm5hbWUgPSAnU3BvdGxpZ2h0V2l0aFNoYWRvd01hcCc7XHJcbiAgICAgICAgICAgIHBhc3Muc2V0Vmlld3BvcnQodmlld3BvcnQpO1xyXG4gICAgICAgICAgICBwYXNzLmFkZFJlbmRlclRhcmdldChjb2xvck5hbWUsIExvYWRPcC5MT0FEKTtcclxuICAgICAgICAgICAgcGFzcy5hZGREZXB0aFN0ZW5jaWwoZGVwdGhTdGVuY2lsTmFtZSwgTG9hZE9wLkxPQUQsIHN0b3JlT3ApO1xyXG4gICAgICAgICAgICBwYXNzLmFkZFRleHR1cmUoYFNoYWRvd01hcCR7aWR9YCwgJ2NjX3Nwb3RTaGFkb3dNYXAnKTtcclxuICAgICAgICAgICAgY29uc3QgcXVldWUgPSBwYXNzLmFkZFF1ZXVlKHJlbmRlcmluZy5RdWV1ZUhpbnQuQkxFTkQsICdmb3J3YXJkLWFkZCcpO1xyXG4gICAgICAgICAgICBxdWV1ZS5hZGRTY2VuZShcclxuICAgICAgICAgICAgICAgIGNhbWVyYSxcclxuICAgICAgICAgICAgICAgIHJlbmRlcmluZy5TY2VuZUZsYWdzLkJMRU5ELFxyXG4gICAgICAgICAgICAgICAgbGlnaHQsXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBwYXNzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBpc011bHRpcGxlTGlnaHRQYXNzZXNOZWVkZWQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2hhZG93RW5hYmxlZFNwb3RMaWdodHMubGVuZ3RoID4gMDtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBGb3J3YXJkUGFzc0NvbmZpZ3Mge1xyXG4gICAgZW5hYmxlTWFpbkxpZ2h0U2hhZG93TWFwOiBib29sZWFuO1xyXG4gICAgZW5hYmxlTWFpbkxpZ2h0UGxhbmFyU2hhZG93TWFwOiBib29sZWFuO1xyXG4gICAgZW5hYmxlUGxhbmFyUmVmbGVjdGlvblByb2JlOiBib29sZWFuO1xyXG4gICAgZW5hYmxlTVNBQTogYm9vbGVhbjtcclxuICAgIGVuYWJsZVNpbmdsZUZvcndhcmRQYXNzOiBib29sZWFuO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQnVpbHRpbkZvcndhcmRQYXNzQnVpbGRlciBpbXBsZW1lbnRzIHJlbmRlcmluZy5QaXBlbGluZVBhc3NCdWlsZGVyIHtcclxuICAgIHN0YXRpYyBDb25maWdPcmRlciA9IDEwMDtcclxuICAgIHN0YXRpYyBSZW5kZXJPcmRlciA9IDEwMDtcclxuICAgIGdldENvbmZpZ09yZGVyKCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIEJ1aWx0aW5Gb3J3YXJkUGFzc0J1aWxkZXIuQ29uZmlnT3JkZXI7XHJcbiAgICB9XHJcbiAgICBnZXRSZW5kZXJPcmRlcigpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiBCdWlsdGluRm9yd2FyZFBhc3NCdWlsZGVyLlJlbmRlck9yZGVyO1xyXG4gICAgfVxyXG4gICAgY29uZmlnQ2FtZXJhKFxyXG4gICAgICAgIGNhbWVyYTogUmVhZG9ubHk8cmVuZGVyZXIuc2NlbmUuQ2FtZXJhPixcclxuICAgICAgICBwaXBlbGluZUNvbmZpZ3M6IFJlYWRvbmx5PFBpcGVsaW5lQ29uZmlncz4sXHJcbiAgICAgICAgY2FtZXJhQ29uZmlnczogQ2FtZXJhQ29uZmlncyAmIEZvcndhcmRQYXNzQ29uZmlncyk6IHZvaWQge1xyXG4gICAgICAgIC8vIFNoYWRvd1xyXG4gICAgICAgIGNhbWVyYUNvbmZpZ3MuZW5hYmxlTWFpbkxpZ2h0U2hhZG93TWFwID0gcGlwZWxpbmVDb25maWdzLnNoYWRvd0VuYWJsZWRcclxuICAgICAgICAgICAgJiYgIXBpcGVsaW5lQ29uZmlncy51c2VQbGFuYXJTaGFkb3dcclxuICAgICAgICAgICAgJiYgISFjYW1lcmEuc2NlbmVcclxuICAgICAgICAgICAgJiYgISFjYW1lcmEuc2NlbmUubWFpbkxpZ2h0XHJcbiAgICAgICAgICAgICYmIGNhbWVyYS5zY2VuZS5tYWluTGlnaHQuc2hhZG93RW5hYmxlZDtcclxuXHJcbiAgICAgICAgY2FtZXJhQ29uZmlncy5lbmFibGVNYWluTGlnaHRQbGFuYXJTaGFkb3dNYXAgPSBwaXBlbGluZUNvbmZpZ3Muc2hhZG93RW5hYmxlZFxyXG4gICAgICAgICAgICAmJiBwaXBlbGluZUNvbmZpZ3MudXNlUGxhbmFyU2hhZG93XHJcbiAgICAgICAgICAgICYmICEhY2FtZXJhLnNjZW5lXHJcbiAgICAgICAgICAgICYmICEhY2FtZXJhLnNjZW5lLm1haW5MaWdodFxyXG4gICAgICAgICAgICAmJiBjYW1lcmEuc2NlbmUubWFpbkxpZ2h0LnNoYWRvd0VuYWJsZWQ7XHJcblxyXG4gICAgICAgIC8vIFJlZmxlY3Rpb24gUHJvYmVcclxuICAgICAgICBjYW1lcmFDb25maWdzLmVuYWJsZVBsYW5hclJlZmxlY3Rpb25Qcm9iZSA9IGNhbWVyYUNvbmZpZ3MuaXNNYWluR2FtZVdpbmRvd1xyXG4gICAgICAgICAgICB8fCBjYW1lcmEuY2FtZXJhVXNhZ2UgPT09IENhbWVyYVVzYWdlLlNDRU5FX1ZJRVdcclxuICAgICAgICAgICAgfHwgY2FtZXJhLmNhbWVyYVVzYWdlID09PSBDYW1lcmFVc2FnZS5HQU1FX1ZJRVc7XHJcblxyXG4gICAgICAgIC8vIE1TQUFcclxuICAgICAgICBjYW1lcmFDb25maWdzLmVuYWJsZU1TQUEgPSBjYW1lcmFDb25maWdzLnNldHRpbmdzLm1zYWEuZW5hYmxlZFxyXG4gICAgICAgICAgICAmJiAhY2FtZXJhQ29uZmlncy5lbmFibGVTdG9yZVNjZW5lRGVwdGggLy8gQ2Fubm90IHN0b3JlIE1TIGRlcHRoLCByZXNvbHZlIGRlcHRoIGlzIGFsc28gbm90IGNyb3NzLXBsYXRmb3JtXHJcbiAgICAgICAgICAgICYmICFwaXBlbGluZUNvbmZpZ3MuaXNXZWIgLy8gVE9ETyh6aG91emhlbmdsb25nKTogcmVtb3ZlIHRoaXMgY29uc3RyYWludFxyXG4gICAgICAgICAgICAmJiAhcGlwZWxpbmVDb25maWdzLmlzV2ViR0wxO1xyXG5cclxuICAgICAgICAvLyBGb3J3YXJkIHJlbmRlcmluZyAoRGVwZW5kIG9uIE1TQUEgYW5kIFRCUilcclxuICAgICAgICBjYW1lcmFDb25maWdzLmVuYWJsZVNpbmdsZUZvcndhcmRQYXNzXHJcbiAgICAgICAgICAgID0gcGlwZWxpbmVDb25maWdzLmlzTW9iaWxlIHx8IGNhbWVyYUNvbmZpZ3MuZW5hYmxlTVNBQTtcclxuXHJcbiAgICAgICAgKytjYW1lcmFDb25maWdzLnJlbWFpbmluZ1Bhc3NlcztcclxuICAgIH1cclxuICAgIHdpbmRvd1Jlc2l6ZShcclxuICAgICAgICBwcGw6IHJlbmRlcmluZy5CYXNpY1BpcGVsaW5lLFxyXG4gICAgICAgIHBwbENvbmZpZ3M6IFJlYWRvbmx5PFBpcGVsaW5lQ29uZmlncz4sXHJcbiAgICAgICAgY2FtZXJhQ29uZmlnczogUmVhZG9ubHk8Q2FtZXJhQ29uZmlncyAmIEZvcndhcmRQYXNzQ29uZmlncz4sXHJcbiAgICAgICAgd2luZG93OiByZW5kZXJlci5SZW5kZXJXaW5kb3csXHJcbiAgICAgICAgY2FtZXJhOiByZW5kZXJlci5zY2VuZS5DYW1lcmEsXHJcbiAgICAgICAgbmF0aXZlV2lkdGg6IG51bWJlcixcclxuICAgICAgICBuYXRpdmVIZWlnaHQ6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IFJlc291cmNlRmxhZ3MgPSByZW5kZXJpbmcuUmVzb3VyY2VGbGFncztcclxuICAgICAgICBjb25zdCBSZXNvdXJjZVJlc2lkZW5jeSA9IHJlbmRlcmluZy5SZXNvdXJjZVJlc2lkZW5jeTtcclxuICAgICAgICBjb25zdCBpZCA9IHdpbmRvdy5yZW5kZXJXaW5kb3dJZDtcclxuICAgICAgICBjb25zdCBzZXR0aW5ncyA9IGNhbWVyYUNvbmZpZ3Muc2V0dGluZ3M7XHJcblxyXG4gICAgICAgIGNvbnN0IHdpZHRoID0gY2FtZXJhQ29uZmlncy5lbmFibGVTaGFkaW5nU2NhbGVcclxuICAgICAgICAgICAgPyBNYXRoLm1heChNYXRoLmZsb29yKG5hdGl2ZVdpZHRoICogY2FtZXJhQ29uZmlncy5zaGFkaW5nU2NhbGUpLCAxKVxyXG4gICAgICAgICAgICA6IG5hdGl2ZVdpZHRoO1xyXG4gICAgICAgIGNvbnN0IGhlaWdodCA9IGNhbWVyYUNvbmZpZ3MuZW5hYmxlU2hhZGluZ1NjYWxlXHJcbiAgICAgICAgICAgID8gTWF0aC5tYXgoTWF0aC5mbG9vcihuYXRpdmVIZWlnaHQgKiBjYW1lcmFDb25maWdzLnNoYWRpbmdTY2FsZSksIDEpXHJcbiAgICAgICAgICAgIDogbmF0aXZlSGVpZ2h0O1xyXG5cclxuICAgICAgICAvLyBNc2FhUmFkaWFuY2VcclxuICAgICAgICBpZiAoY2FtZXJhQ29uZmlncy5lbmFibGVNU0FBKSB7XHJcbiAgICAgICAgICAgIC8vIE5vdGljZTogV2UgbmV2ZXIgc3RvcmUgbXVsdGlzYW1wbGUgcmVzdWx0cy5cclxuICAgICAgICAgICAgLy8gVGhlc2Ugc2FtcGxlcyBhcmUgYWx3YXlzIHJlc29sdmVkIGFuZCBkaXNjYXJkZWQgYXQgdGhlIGVuZCBvZiB0aGUgcmVuZGVyIHBhc3MuXHJcbiAgICAgICAgICAgIC8vIFNvIHRoZSBSZXNvdXJjZVJlc2lkZW5jeSBzaG91bGQgYmUgTUVNT1JZTEVTUy5cclxuICAgICAgICAgICAgaWYgKGNhbWVyYUNvbmZpZ3MuZW5hYmxlSERSKSB7XHJcbiAgICAgICAgICAgICAgICBwcGwuYWRkVGV4dHVyZShgTXNhYVJhZGlhbmNlJHtpZH1gLCBUZXh0dXJlVHlwZS5URVgyRCwgY2FtZXJhQ29uZmlncy5yYWRpYW5jZUZvcm1hdCwgd2lkdGgsIGhlaWdodCwgMSwgMSwgMSxcclxuICAgICAgICAgICAgICAgICAgICBzZXR0aW5ncy5tc2FhLnNhbXBsZUNvdW50LCBSZXNvdXJjZUZsYWdzLkNPTE9SX0FUVEFDSE1FTlQsIFJlc291cmNlUmVzaWRlbmN5Lk1FTU9SWUxFU1MpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcHBsLmFkZFRleHR1cmUoYE1zYWFSYWRpYW5jZSR7aWR9YCwgVGV4dHVyZVR5cGUuVEVYMkQsIEZvcm1hdC5SR0JBOCwgd2lkdGgsIGhlaWdodCwgMSwgMSwgMSxcclxuICAgICAgICAgICAgICAgICAgICBzZXR0aW5ncy5tc2FhLnNhbXBsZUNvdW50LCBSZXNvdXJjZUZsYWdzLkNPTE9SX0FUVEFDSE1FTlQsIFJlc291cmNlUmVzaWRlbmN5Lk1FTU9SWUxFU1MpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHBwbC5hZGRUZXh0dXJlKGBNc2FhRGVwdGhTdGVuY2lsJHtpZH1gLCBUZXh0dXJlVHlwZS5URVgyRCwgRm9ybWF0LkRFUFRIX1NURU5DSUwsIHdpZHRoLCBoZWlnaHQsIDEsIDEsIDEsXHJcbiAgICAgICAgICAgICAgICBzZXR0aW5ncy5tc2FhLnNhbXBsZUNvdW50LCBSZXNvdXJjZUZsYWdzLkRFUFRIX1NURU5DSUxfQVRUQUNITUVOVCwgUmVzb3VyY2VSZXNpZGVuY3kuTUVNT1JZTEVTUyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBNYWlubGlnaHQgU2hhZG93TWFwXHJcbiAgICAgICAgcHBsLmFkZFJlbmRlclRhcmdldChcclxuICAgICAgICAgICAgYFNoYWRvd01hcCR7aWR9YCxcclxuICAgICAgICAgICAgcHBsQ29uZmlncy5zaGFkb3dNYXBGb3JtYXQsXHJcbiAgICAgICAgICAgIHBwbENvbmZpZ3Muc2hhZG93TWFwU2l6ZS54LFxyXG4gICAgICAgICAgICBwcGxDb25maWdzLnNoYWRvd01hcFNpemUueSxcclxuICAgICAgICApO1xyXG4gICAgICAgIHBwbC5hZGREZXB0aFN0ZW5jaWwoXHJcbiAgICAgICAgICAgIGBTaGFkb3dEZXB0aCR7aWR9YCxcclxuICAgICAgICAgICAgRm9ybWF0LkRFUFRIX1NURU5DSUwsXHJcbiAgICAgICAgICAgIHBwbENvbmZpZ3Muc2hhZG93TWFwU2l6ZS54LFxyXG4gICAgICAgICAgICBwcGxDb25maWdzLnNoYWRvd01hcFNpemUueSxcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICAvLyBTcG90LWxpZ2h0IHNoYWRvdyBtYXBzXHJcbiAgICAgICAgaWYgKGNhbWVyYUNvbmZpZ3MuZW5hYmxlU2luZ2xlRm9yd2FyZFBhc3MpIHtcclxuICAgICAgICAgICAgY29uc3QgY291bnQgPSBwcGxDb25maWdzLm1vYmlsZU1heFNwb3RMaWdodFNoYWRvd01hcHM7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBjb3VudDsgKytpKSB7XHJcbiAgICAgICAgICAgICAgICBwcGwuYWRkUmVuZGVyVGFyZ2V0KFxyXG4gICAgICAgICAgICAgICAgICAgIGBTcG90U2hhZG93TWFwJHtpfWAsXHJcbiAgICAgICAgICAgICAgICAgICAgcHBsQ29uZmlncy5zaGFkb3dNYXBGb3JtYXQsXHJcbiAgICAgICAgICAgICAgICAgICAgcHBsQ29uZmlncy5zaGFkb3dNYXBTaXplLngsXHJcbiAgICAgICAgICAgICAgICAgICAgcHBsQ29uZmlncy5zaGFkb3dNYXBTaXplLnksXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgcHBsLmFkZERlcHRoU3RlbmNpbChcclxuICAgICAgICAgICAgICAgICAgICBgU3BvdFNoYWRvd0RlcHRoJHtpfWAsXHJcbiAgICAgICAgICAgICAgICAgICAgRm9ybWF0LkRFUFRIX1NURU5DSUwsXHJcbiAgICAgICAgICAgICAgICAgICAgcHBsQ29uZmlncy5zaGFkb3dNYXBTaXplLngsXHJcbiAgICAgICAgICAgICAgICAgICAgcHBsQ29uZmlncy5zaGFkb3dNYXBTaXplLnksXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgc2V0dXAoXHJcbiAgICAgICAgcHBsOiByZW5kZXJpbmcuQmFzaWNQaXBlbGluZSxcclxuICAgICAgICBwcGxDb25maWdzOiBSZWFkb25seTxQaXBlbGluZUNvbmZpZ3M+LFxyXG4gICAgICAgIGNhbWVyYUNvbmZpZ3M6IENhbWVyYUNvbmZpZ3MgJiBGb3J3YXJkUGFzc0NvbmZpZ3MsXHJcbiAgICAgICAgY2FtZXJhOiByZW5kZXJlci5zY2VuZS5DYW1lcmEsXHJcbiAgICAgICAgY29udGV4dDogUGlwZWxpbmVDb250ZXh0KTogcmVuZGVyaW5nLkJhc2ljUmVuZGVyUGFzc0J1aWxkZXIgfCB1bmRlZmluZWQge1xyXG4gICAgICAgIGNvbnN0IGlkID0gY2FtZXJhLndpbmRvdy5yZW5kZXJXaW5kb3dJZDtcclxuXHJcbiAgICAgICAgY29uc3Qgc2NlbmUgPSBjYW1lcmEuc2NlbmUhO1xyXG4gICAgICAgIGNvbnN0IG1haW5MaWdodCA9IHNjZW5lLm1haW5MaWdodDtcclxuXHJcbiAgICAgICAgLS1jYW1lcmFDb25maWdzLnJlbWFpbmluZ1Bhc3NlcztcclxuICAgICAgICBhc3NlcnQoY2FtZXJhQ29uZmlncy5yZW1haW5pbmdQYXNzZXMgPj0gMCk7XHJcblxyXG4gICAgICAgIC8vIEZvcndhcmQgTGlnaHRpbmcgKExpZ2h0IEN1bGxpbmcpXHJcbiAgICAgICAgdGhpcy5mb3J3YXJkTGlnaHRpbmcuY3VsbExpZ2h0cyhzY2VuZSwgY2FtZXJhLmZydXN0dW0pO1xyXG5cclxuICAgICAgICAvLyBNYWluIERpcmVjdGlvbmFsIGxpZ2h0IENTTSBTaGFkb3cgTWFwXHJcbiAgICAgICAgaWYgKGNhbWVyYUNvbmZpZ3MuZW5hYmxlTWFpbkxpZ2h0U2hhZG93TWFwKSB7XHJcbiAgICAgICAgICAgIGFzc2VydCghIW1haW5MaWdodCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2FkZENhc2NhZGVkU2hhZG93TWFwUGFzcyhwcGwsIHBwbENvbmZpZ3MsIGlkLCBtYWluTGlnaHQsIGNhbWVyYSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBTcG90IGxpZ2h0IHNoYWRvdyBtYXBzIChNb2JpbGUgb3IgTVNBQSlcclxuICAgICAgICBpZiAoY2FtZXJhQ29uZmlncy5lbmFibGVTaW5nbGVGb3J3YXJkUGFzcykge1xyXG4gICAgICAgICAgICAvLyBDdXJyZW50bHksIG9ubHkgc3VwcG9ydCAxIHNwb3QgbGlnaHQgd2l0aCBzaGFkb3cgbWFwIG9uIG1vYmlsZSBwbGF0Zm9ybS5cclxuICAgICAgICAgICAgLy8gVE9ETyh6aG91emhlbmdsb25nKTogUmVsZXggdGhpcyBsaW1pdGF0aW9uLlxyXG4gICAgICAgICAgICB0aGlzLmZvcndhcmRMaWdodGluZy5hZGRTcG90bGlnaHRTaGFkb3dQYXNzZXMoXHJcbiAgICAgICAgICAgICAgICBwcGwsIGNhbWVyYSwgcHBsQ29uZmlncy5tb2JpbGVNYXhTcG90TGlnaHRTaGFkb3dNYXBzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX3RyeUFkZFJlZmxlY3Rpb25Qcm9iZVBhc3NlcyhwcGwsIGNhbWVyYUNvbmZpZ3MsIGlkLCBtYWluTGlnaHQsIGNhbWVyYS5zY2VuZSk7XHJcblxyXG4gICAgICAgIGlmIChjYW1lcmFDb25maWdzLnJlbWFpbmluZ1Bhc3NlcyA+IDAgfHwgY2FtZXJhQ29uZmlncy5lbmFibGVTaGFkaW5nU2NhbGUpIHtcclxuICAgICAgICAgICAgY29udGV4dC5jb2xvck5hbWUgPSBjYW1lcmFDb25maWdzLmVuYWJsZVNoYWRpbmdTY2FsZVxyXG4gICAgICAgICAgICAgICAgPyBgU2NhbGVkUmFkaWFuY2UwXyR7aWR9YFxyXG4gICAgICAgICAgICAgICAgOiBgUmFkaWFuY2UwXyR7aWR9YDtcclxuICAgICAgICAgICAgY29udGV4dC5kZXB0aFN0ZW5jaWxOYW1lID0gY2FtZXJhQ29uZmlncy5lbmFibGVTaGFkaW5nU2NhbGVcclxuICAgICAgICAgICAgICAgID8gYFNjYWxlZFNjZW5lRGVwdGhfJHtpZH1gXHJcbiAgICAgICAgICAgICAgICA6IGBTY2VuZURlcHRoXyR7aWR9YDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb250ZXh0LmNvbG9yTmFtZSA9IGNhbWVyYUNvbmZpZ3MuY29sb3JOYW1lO1xyXG4gICAgICAgICAgICBjb250ZXh0LmRlcHRoU3RlbmNpbE5hbWUgPSBjYW1lcmFDb25maWdzLmRlcHRoU3RlbmNpbE5hbWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBwYXNzID0gdGhpcy5fYWRkRm9yd2FyZFJhZGlhbmNlUGFzc2VzKFxyXG4gICAgICAgICAgICBwcGwsIHBwbENvbmZpZ3MsIGNhbWVyYUNvbmZpZ3MsIGlkLCBjYW1lcmEsXHJcbiAgICAgICAgICAgIGNhbWVyYUNvbmZpZ3Mud2lkdGgsIGNhbWVyYUNvbmZpZ3MuaGVpZ2h0LCBtYWluTGlnaHQsXHJcbiAgICAgICAgICAgIGNvbnRleHQuY29sb3JOYW1lLCBjb250ZXh0LmRlcHRoU3RlbmNpbE5hbWUsXHJcbiAgICAgICAgICAgICFjYW1lcmFDb25maWdzLmVuYWJsZU1TQUEsXHJcbiAgICAgICAgICAgIGNhbWVyYUNvbmZpZ3MuZW5hYmxlU3RvcmVTY2VuZURlcHRoID8gU3RvcmVPcC5TVE9SRSA6IFN0b3JlT3AuRElTQ0FSRCk7XHJcblxyXG4gICAgICAgIGlmICghY2FtZXJhQ29uZmlncy5lbmFibGVTdG9yZVNjZW5lRGVwdGgpIHtcclxuICAgICAgICAgICAgY29udGV4dC5kZXB0aFN0ZW5jaWxOYW1lID0gJyc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY2FtZXJhQ29uZmlncy5yZW1haW5pbmdQYXNzZXMgPT09IDAgJiYgY2FtZXJhQ29uZmlncy5lbmFibGVTaGFkaW5nU2NhbGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGFkZENvcHlUb1NjcmVlblBhc3MocHBsLCBwcGxDb25maWdzLCBjYW1lcmFDb25maWdzLCBjb250ZXh0LmNvbG9yTmFtZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHBhc3M7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBfYWRkQ2FzY2FkZWRTaGFkb3dNYXBQYXNzKFxyXG4gICAgICAgIHBwbDogcmVuZGVyaW5nLkJhc2ljUGlwZWxpbmUsXHJcbiAgICAgICAgcHBsQ29uZmlnczogUmVhZG9ubHk8UGlwZWxpbmVDb25maWdzPixcclxuICAgICAgICBpZDogbnVtYmVyLFxyXG4gICAgICAgIGxpZ2h0OiByZW5kZXJlci5zY2VuZS5EaXJlY3Rpb25hbExpZ2h0LFxyXG4gICAgICAgIGNhbWVyYTogcmVuZGVyZXIuc2NlbmUuQ2FtZXJhLFxyXG4gICAgKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgUXVldWVIaW50ID0gcmVuZGVyaW5nLlF1ZXVlSGludDtcclxuICAgICAgICBjb25zdCBTY2VuZUZsYWdzID0gcmVuZGVyaW5nLlNjZW5lRmxhZ3M7XHJcbiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgICAgIC8vIER5bmFtaWMgc3RhdGVzXHJcbiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgICAgIGNvbnN0IHNoYWRvd1NpemUgPSBwcGwucGlwZWxpbmVTY2VuZURhdGEuc2hhZG93cy5zaXplO1xyXG4gICAgICAgIGNvbnN0IHdpZHRoID0gc2hhZG93U2l6ZS54O1xyXG4gICAgICAgIGNvbnN0IGhlaWdodCA9IHNoYWRvd1NpemUueTtcclxuXHJcbiAgICAgICAgY29uc3Qgdmlld3BvcnQgPSB0aGlzLl92aWV3cG9ydDtcclxuICAgICAgICB2aWV3cG9ydC5sZWZ0ID0gdmlld3BvcnQudG9wID0gMDtcclxuICAgICAgICB2aWV3cG9ydC53aWR0aCA9IHdpZHRoO1xyXG4gICAgICAgIHZpZXdwb3J0LmhlaWdodCA9IGhlaWdodDtcclxuXHJcbiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgICAgIC8vIENTTSBTaGFkb3cgTWFwXHJcbiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgICAgIGNvbnN0IHBhc3MgPSBwcGwuYWRkUmVuZGVyUGFzcyh3aWR0aCwgaGVpZ2h0LCAnZGVmYXVsdCcpO1xyXG4gICAgICAgIHBhc3MubmFtZSA9ICdDYXNjYWRlZFNoYWRvd01hcCc7XHJcbiAgICAgICAgcGFzcy5hZGRSZW5kZXJUYXJnZXQoYFNoYWRvd01hcCR7aWR9YCwgTG9hZE9wLkNMRUFSLCBTdG9yZU9wLlNUT1JFLCBuZXcgQ29sb3IoMSwgMSwgMSwgMSkpO1xyXG4gICAgICAgIHBhc3MuYWRkRGVwdGhTdGVuY2lsKGBTaGFkb3dEZXB0aCR7aWR9YCwgTG9hZE9wLkNMRUFSLCBTdG9yZU9wLkRJU0NBUkQpO1xyXG4gICAgICAgIGNvbnN0IGNzbUxldmVsID0gcHBsLnBpcGVsaW5lU2NlbmVEYXRhLmNzbVN1cHBvcnRlZCA/IGxpZ2h0LmNzbUxldmVsIDogMTtcclxuXHJcbiAgICAgICAgLy8gQWRkIHNoYWRvdyBtYXAgdmlld3BvcnRzXHJcbiAgICAgICAgZm9yIChsZXQgbGV2ZWwgPSAwOyBsZXZlbCAhPT0gY3NtTGV2ZWw7ICsrbGV2ZWwpIHtcclxuICAgICAgICAgICAgZ2V0Q3NtTWFpbkxpZ2h0Vmlld3BvcnQobGlnaHQsIHdpZHRoLCBoZWlnaHQsIGxldmVsLCB0aGlzLl92aWV3cG9ydCwgcHBsQ29uZmlncy5zY3JlZW5TcGFjZVNpZ25ZKTtcclxuICAgICAgICAgICAgY29uc3QgcXVldWUgPSBwYXNzLmFkZFF1ZXVlKFF1ZXVlSGludC5OT05FLCAnc2hhZG93LWNhc3RlcicpO1xyXG4gICAgICAgICAgICBpZiAoIXBwbENvbmZpZ3MuaXNXZWJHUFUpIHsgLy8gVGVtcG9yYXJ5IHdvcmthcm91bmQgZm9yIFdlYkdQVVxyXG4gICAgICAgICAgICAgICAgcXVldWUuc2V0Vmlld3BvcnQodGhpcy5fdmlld3BvcnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHF1ZXVlXHJcbiAgICAgICAgICAgICAgICAuYWRkU2NlbmUoY2FtZXJhLCBTY2VuZUZsYWdzLk9QQVFVRSB8IFNjZW5lRmxhZ3MuTUFTSyB8IFNjZW5lRmxhZ3MuU0hBRE9XX0NBU1RFUilcclxuICAgICAgICAgICAgICAgIC51c2VMaWdodEZydXN0dW0obGlnaHQsIGxldmVsKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIF90cnlBZGRSZWZsZWN0aW9uUHJvYmVQYXNzZXMoXHJcbiAgICAgICAgcHBsOiByZW5kZXJpbmcuQmFzaWNQaXBlbGluZSxcclxuICAgICAgICBjYW1lcmFDb25maWdzOiBSZWFkb25seTxDYW1lcmFDb25maWdzICYgRm9yd2FyZFBhc3NDb25maWdzPixcclxuICAgICAgICBpZDogbnVtYmVyLFxyXG4gICAgICAgIG1haW5MaWdodDogcmVuZGVyZXIuc2NlbmUuRGlyZWN0aW9uYWxMaWdodCB8IG51bGwsXHJcbiAgICAgICAgc2NlbmU6IHJlbmRlcmVyLlJlbmRlclNjZW5lIHwgbnVsbCxcclxuICAgICk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IHJlZmxlY3Rpb25Qcm9iZU1hbmFnZXIgPSBjY2xlZ2FjeS5pbnRlcm5hbC5yZWZsZWN0aW9uUHJvYmVNYW5hZ2VyIGFzIFJlZmxlY3Rpb25Qcm9iZU1hbmFnZXIgfCB1bmRlZmluZWQ7XHJcbiAgICAgICAgaWYgKCFyZWZsZWN0aW9uUHJvYmVNYW5hZ2VyKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgUmVzb3VyY2VSZXNpZGVuY3kgPSByZW5kZXJpbmcuUmVzb3VyY2VSZXNpZGVuY3k7XHJcbiAgICAgICAgY29uc3QgcHJvYmVzID0gcmVmbGVjdGlvblByb2JlTWFuYWdlci5nZXRQcm9iZXMoKTtcclxuICAgICAgICBjb25zdCBtYXhQcm9iZUNvdW50ID0gNDtcclxuICAgICAgICBsZXQgcHJvYmVJRCA9IDA7XHJcbiAgICAgICAgZm9yIChjb25zdCBwcm9iZSBvZiBwcm9iZXMpIHtcclxuICAgICAgICAgICAgaWYgKCFwcm9iZS5uZWVkUmVuZGVyKSB7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBhcmVhID0gcHJvYmUucmVuZGVyQXJlYSgpO1xyXG4gICAgICAgICAgICBjb25zdCB3aWR0aCA9IE1hdGgubWF4KE1hdGguZmxvb3IoYXJlYS54KSwgMSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGhlaWdodCA9IE1hdGgubWF4KE1hdGguZmxvb3IoYXJlYS55KSwgMSk7XHJcblxyXG4gICAgICAgICAgICBpZiAocHJvYmUucHJvYmVUeXBlID09PSByZW5kZXJlci5zY2VuZS5Qcm9iZVR5cGUuUExBTkFSKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWNhbWVyYUNvbmZpZ3MuZW5hYmxlUGxhbmFyUmVmbGVjdGlvblByb2JlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb25zdCB3aW5kb3c6IHJlbmRlcmVyLlJlbmRlcldpbmRvdyA9IHByb2JlLnJlYWx0aW1lUGxhbmFyVGV4dHVyZSEud2luZG93ITtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbG9yTmFtZSA9IGBQbGFuYXJQcm9iZVJUJHtwcm9iZUlEfWA7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkZXB0aFN0ZW5jaWxOYW1lID0gYFBsYW5hclByb2JlRFMke3Byb2JlSUR9YDtcclxuICAgICAgICAgICAgICAgIC8vIFByb2JlUmVzb3VyY2VcclxuICAgICAgICAgICAgICAgIHBwbC5hZGRSZW5kZXJXaW5kb3coY29sb3JOYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIGNhbWVyYUNvbmZpZ3MucmFkaWFuY2VGb3JtYXQsIHdpZHRoLCBoZWlnaHQsIHdpbmRvdyk7XHJcbiAgICAgICAgICAgICAgICBwcGwuYWRkRGVwdGhTdGVuY2lsKGRlcHRoU3RlbmNpbE5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgZ2Z4LkZvcm1hdC5ERVBUSF9TVEVOQ0lMLCB3aWR0aCwgaGVpZ2h0LCBSZXNvdXJjZVJlc2lkZW5jeS5NRU1PUllMRVNTKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBSZW5kZXJpbmdcclxuICAgICAgICAgICAgICAgIGNvbnN0IHByb2JlUGFzcyA9IHBwbC5hZGRSZW5kZXJQYXNzKHdpZHRoLCBoZWlnaHQsICdkZWZhdWx0Jyk7XHJcbiAgICAgICAgICAgICAgICBwcm9iZVBhc3MubmFtZSA9IGBQbGFuYXJSZWZsZWN0aW9uUHJvYmUke3Byb2JlSUR9YDtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2J1aWxkUmVmbGVjdGlvblByb2JlUGFzcyhwcm9iZVBhc3MsIGNhbWVyYUNvbmZpZ3MsIGlkLCBwcm9iZS5jYW1lcmEsXHJcbiAgICAgICAgICAgICAgICAgICAgY29sb3JOYW1lLCBkZXB0aFN0ZW5jaWxOYW1lLCBtYWluTGlnaHQsIHNjZW5lKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChFRElUT1IpIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGZhY2VJZHggPSAwOyBmYWNlSWR4IDwgcHJvYmUuYmFrZWRDdWJlVGV4dHVyZXMubGVuZ3RoOyBmYWNlSWR4KyspIHtcclxuICAgICAgICAgICAgICAgICAgICBwcm9iZS51cGRhdGVDYW1lcmFEaXIoZmFjZUlkeCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgd2luZG93OiByZW5kZXJlci5SZW5kZXJXaW5kb3cgPSBwcm9iZS5iYWtlZEN1YmVUZXh0dXJlc1tmYWNlSWR4XS53aW5kb3chO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbG9yTmFtZSA9IGBDdWJlUHJvYmVSVCR7cHJvYmVJRH0ke2ZhY2VJZHh9YDtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBkZXB0aFN0ZW5jaWxOYW1lID0gYEN1YmVQcm9iZURTJHtwcm9iZUlEfSR7ZmFjZUlkeH1gO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFByb2JlUmVzb3VyY2VcclxuICAgICAgICAgICAgICAgICAgICBwcGwuYWRkUmVuZGVyV2luZG93KGNvbG9yTmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FtZXJhQ29uZmlncy5yYWRpYW5jZUZvcm1hdCwgd2lkdGgsIGhlaWdodCwgd2luZG93KTtcclxuICAgICAgICAgICAgICAgICAgICBwcGwuYWRkRGVwdGhTdGVuY2lsKGRlcHRoU3RlbmNpbE5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdmeC5Gb3JtYXQuREVQVEhfU1RFTkNJTCwgd2lkdGgsIGhlaWdodCwgUmVzb3VyY2VSZXNpZGVuY3kuTUVNT1JZTEVTUyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFJlbmRlcmluZ1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb2JlUGFzcyA9IHBwbC5hZGRSZW5kZXJQYXNzKHdpZHRoLCBoZWlnaHQsICdkZWZhdWx0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvYmVQYXNzLm5hbWUgPSBgQ3ViZVByb2JlJHtwcm9iZUlEfSR7ZmFjZUlkeH1gO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2J1aWxkUmVmbGVjdGlvblByb2JlUGFzcyhwcm9iZVBhc3MsIGNhbWVyYUNvbmZpZ3MsIGlkLCBwcm9iZS5jYW1lcmEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yTmFtZSwgZGVwdGhTdGVuY2lsTmFtZSwgbWFpbkxpZ2h0LCBzY2VuZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBwcm9iZS5uZWVkUmVuZGVyID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKytwcm9iZUlEO1xyXG4gICAgICAgICAgICBpZiAocHJvYmVJRCA9PT0gbWF4UHJvYmVDb3VudCkge1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIF9idWlsZFJlZmxlY3Rpb25Qcm9iZVBhc3MoXHJcbiAgICAgICAgcGFzczogcmVuZGVyaW5nLkJhc2ljUmVuZGVyUGFzc0J1aWxkZXIsXHJcbiAgICAgICAgY2FtZXJhQ29uZmlnczogUmVhZG9ubHk8Q2FtZXJhQ29uZmlncyAmIEZvcndhcmRQYXNzQ29uZmlncz4sXHJcbiAgICAgICAgaWQ6IG51bWJlcixcclxuICAgICAgICBjYW1lcmE6IHJlbmRlcmVyLnNjZW5lLkNhbWVyYSxcclxuICAgICAgICBjb2xvck5hbWU6IHN0cmluZyxcclxuICAgICAgICBkZXB0aFN0ZW5jaWxOYW1lOiBzdHJpbmcsXHJcbiAgICAgICAgbWFpbkxpZ2h0OiByZW5kZXJlci5zY2VuZS5EaXJlY3Rpb25hbExpZ2h0IHwgbnVsbCxcclxuICAgICAgICBzY2VuZTogcmVuZGVyZXIuUmVuZGVyU2NlbmUgfCBudWxsID0gbnVsbCxcclxuICAgICk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IFF1ZXVlSGludCA9IHJlbmRlcmluZy5RdWV1ZUhpbnQ7XHJcbiAgICAgICAgY29uc3QgU2NlbmVGbGFncyA9IHJlbmRlcmluZy5TY2VuZUZsYWdzO1xyXG4gICAgICAgIC8vIHNldCB2aWV3cG9ydFxyXG4gICAgICAgIGNvbnN0IGNvbG9yU3RvcmVPcCA9IGNhbWVyYUNvbmZpZ3MuZW5hYmxlTVNBQSA/IFN0b3JlT3AuRElTQ0FSRCA6IFN0b3JlT3AuU1RPUkU7XHJcblxyXG4gICAgICAgIC8vIGJpbmQgb3V0cHV0IHJlbmRlciB0YXJnZXRcclxuICAgICAgICBpZiAoZm9yd2FyZE5lZWRDbGVhckNvbG9yKGNhbWVyYSkpIHtcclxuICAgICAgICAgICAgdGhpcy5fcmVmbGVjdGlvblByb2JlQ2xlYXJDb2xvci54ID0gY2FtZXJhLmNsZWFyQ29sb3IueDtcclxuICAgICAgICAgICAgdGhpcy5fcmVmbGVjdGlvblByb2JlQ2xlYXJDb2xvci55ID0gY2FtZXJhLmNsZWFyQ29sb3IueTtcclxuICAgICAgICAgICAgdGhpcy5fcmVmbGVjdGlvblByb2JlQ2xlYXJDb2xvci56ID0gY2FtZXJhLmNsZWFyQ29sb3IuejtcclxuICAgICAgICAgICAgY29uc3QgY2xlYXJDb2xvciA9IHJlbmRlcmluZy5wYWNrUkdCRSh0aGlzLl9yZWZsZWN0aW9uUHJvYmVDbGVhckNvbG9yKTtcclxuICAgICAgICAgICAgdGhpcy5fY2xlYXJDb2xvci54ID0gY2xlYXJDb2xvci54O1xyXG4gICAgICAgICAgICB0aGlzLl9jbGVhckNvbG9yLnkgPSBjbGVhckNvbG9yLnk7XHJcbiAgICAgICAgICAgIHRoaXMuX2NsZWFyQ29sb3IueiA9IGNsZWFyQ29sb3IuejtcclxuICAgICAgICAgICAgdGhpcy5fY2xlYXJDb2xvci53ID0gY2xlYXJDb2xvci53O1xyXG4gICAgICAgICAgICBwYXNzLmFkZFJlbmRlclRhcmdldChjb2xvck5hbWUsIExvYWRPcC5DTEVBUiwgY29sb3JTdG9yZU9wLCB0aGlzLl9jbGVhckNvbG9yKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBwYXNzLmFkZFJlbmRlclRhcmdldChjb2xvck5hbWUsIExvYWRPcC5MT0FELCBjb2xvclN0b3JlT3ApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gYmluZCBkZXB0aCBzdGVuY2lsIGJ1ZmZlclxyXG4gICAgICAgIGlmIChjYW1lcmEuY2xlYXJGbGFnICYgQ2xlYXJGbGFnQml0LkRFUFRIX1NURU5DSUwpIHtcclxuICAgICAgICAgICAgcGFzcy5hZGREZXB0aFN0ZW5jaWwoXHJcbiAgICAgICAgICAgICAgICBkZXB0aFN0ZW5jaWxOYW1lLFxyXG4gICAgICAgICAgICAgICAgTG9hZE9wLkNMRUFSLFxyXG4gICAgICAgICAgICAgICAgU3RvcmVPcC5ESVNDQVJELFxyXG4gICAgICAgICAgICAgICAgY2FtZXJhLmNsZWFyRGVwdGgsXHJcbiAgICAgICAgICAgICAgICBjYW1lcmEuY2xlYXJTdGVuY2lsLFxyXG4gICAgICAgICAgICAgICAgY2FtZXJhLmNsZWFyRmxhZyAmIENsZWFyRmxhZ0JpdC5ERVBUSF9TVEVOQ0lMLFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHBhc3MuYWRkRGVwdGhTdGVuY2lsKGRlcHRoU3RlbmNpbE5hbWUsIExvYWRPcC5MT0FELCBTdG9yZU9wLkRJU0NBUkQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gU2V0IHNoYWRvdyBtYXAgaWYgZW5hYmxlZFxyXG4gICAgICAgIGlmIChjYW1lcmFDb25maWdzLmVuYWJsZU1haW5MaWdodFNoYWRvd01hcCkge1xyXG4gICAgICAgICAgICBwYXNzLmFkZFRleHR1cmUoYFNoYWRvd01hcCR7aWR9YCwgJ2NjX3NoYWRvd01hcCcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gVE9ETyh6aG91emhlbmdsb25nKTogU2VwYXJhdGUgT1BBUVVFIGFuZCBNQVNLIHF1ZXVlXHJcblxyXG4gICAgICAgIC8vIGFkZCBvcGFxdWUgYW5kIG1hc2sgcXVldWVcclxuICAgICAgICBwYXNzLmFkZFF1ZXVlKFF1ZXVlSGludC5OT05FLCAncmVmbGVjdC1tYXAnKSAvLyBDdXJyZW50bHkgd2UgcHV0IE9QQVFVRSBhbmQgTUFTSyBpbnRvIG9uZSBxdWV1ZSwgc28gUXVldWVIaW50IGlzIE5PTkVcclxuICAgICAgICAgICAgLmFkZFNjZW5lKGNhbWVyYSxcclxuICAgICAgICAgICAgICAgIFNjZW5lRmxhZ3MuT1BBUVVFIHwgU2NlbmVGbGFncy5NQVNLIHwgU2NlbmVGbGFncy5SRUZMRUNUSU9OX1BST0JFLFxyXG4gICAgICAgICAgICAgICAgbWFpbkxpZ2h0IHx8IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICAgIHNjZW5lID8gc2NlbmUgOiB1bmRlZmluZWQpO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBfYWRkRm9yd2FyZFJhZGlhbmNlUGFzc2VzKFxyXG4gICAgICAgIHBwbDogcmVuZGVyaW5nLkJhc2ljUGlwZWxpbmUsXHJcbiAgICAgICAgcHBsQ29uZmlnczogUmVhZG9ubHk8UGlwZWxpbmVDb25maWdzPixcclxuICAgICAgICBjYW1lcmFDb25maWdzOiBSZWFkb25seTxDYW1lcmFDb25maWdzICYgRm9yd2FyZFBhc3NDb25maWdzPixcclxuICAgICAgICBpZDogbnVtYmVyLFxyXG4gICAgICAgIGNhbWVyYTogcmVuZGVyZXIuc2NlbmUuQ2FtZXJhLFxyXG4gICAgICAgIHdpZHRoOiBudW1iZXIsXHJcbiAgICAgICAgaGVpZ2h0OiBudW1iZXIsXHJcbiAgICAgICAgbWFpbkxpZ2h0OiByZW5kZXJlci5zY2VuZS5EaXJlY3Rpb25hbExpZ2h0IHwgbnVsbCxcclxuICAgICAgICBjb2xvck5hbWU6IHN0cmluZyxcclxuICAgICAgICBkZXB0aFN0ZW5jaWxOYW1lOiBzdHJpbmcsXHJcbiAgICAgICAgZGlzYWJsZU1TQUE6IGJvb2xlYW4gPSBmYWxzZSxcclxuICAgICAgICBkZXB0aFN0ZW5jaWxTdG9yZU9wOiBnZnguU3RvcmVPcCA9IFN0b3JlT3AuRElTQ0FSRCxcclxuICAgICk6IHJlbmRlcmluZy5CYXNpY1JlbmRlclBhc3NCdWlsZGVyIHtcclxuICAgICAgICBjb25zdCBRdWV1ZUhpbnQgPSByZW5kZXJpbmcuUXVldWVIaW50O1xyXG4gICAgICAgIGNvbnN0IFNjZW5lRmxhZ3MgPSByZW5kZXJpbmcuU2NlbmVGbGFncztcclxuICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAgICAgLy8gRHluYW1pYyBzdGF0ZXNcclxuICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAgICAgLy8gUHJlcGFyZSBjYW1lcmEgY2xlYXIgY29sb3JcclxuICAgICAgICBjb25zdCBjbGVhckNvbG9yID0gY2FtZXJhLmNsZWFyQ29sb3I7IC8vIFJlZHVjZSBDKysvVFMgaW50ZXJvcFxyXG4gICAgICAgIHRoaXMuX2NsZWFyQ29sb3IueCA9IGNsZWFyQ29sb3IueDtcclxuICAgICAgICB0aGlzLl9jbGVhckNvbG9yLnkgPSBjbGVhckNvbG9yLnk7XHJcbiAgICAgICAgdGhpcy5fY2xlYXJDb2xvci56ID0gY2xlYXJDb2xvci56O1xyXG4gICAgICAgIHRoaXMuX2NsZWFyQ29sb3IudyA9IGNsZWFyQ29sb3IudztcclxuXHJcbiAgICAgICAgLy8gUHJlcGFyZSBjYW1lcmEgdmlld3BvcnRcclxuICAgICAgICBjb25zdCB2aWV3cG9ydCA9IGNhbWVyYS52aWV3cG9ydDsgLy8gUmVkdWNlIEMrKy9UUyBpbnRlcm9wXHJcbiAgICAgICAgdGhpcy5fdmlld3BvcnQubGVmdCA9IE1hdGgucm91bmQodmlld3BvcnQueCAqIHdpZHRoKTtcclxuICAgICAgICB0aGlzLl92aWV3cG9ydC50b3AgPSBNYXRoLnJvdW5kKHZpZXdwb3J0LnkgKiBoZWlnaHQpO1xyXG4gICAgICAgIC8vIEhlcmUgd2UgbXVzdCB1c2UgY2FtZXJhLnZpZXdwb3J0LndpZHRoIGluc3RlYWQgb2YgY2FtZXJhLnZpZXdwb3J0LnosIHdoaWNoXHJcbiAgICAgICAgLy8gaXMgdW5kZWZpbmVkIG9uIG5hdGl2ZSBwbGF0Zm9ybS4gVGhlIHNhbWUgYXMgY2FtZXJhLnZpZXdwb3J0LmhlaWdodC5cclxuICAgICAgICB0aGlzLl92aWV3cG9ydC53aWR0aCA9IE1hdGgubWF4KE1hdGgucm91bmQodmlld3BvcnQud2lkdGggKiB3aWR0aCksIDEpO1xyXG4gICAgICAgIHRoaXMuX3ZpZXdwb3J0LmhlaWdodCA9IE1hdGgubWF4KE1hdGgucm91bmQodmlld3BvcnQuaGVpZ2h0ICogaGVpZ2h0KSwgMSk7XHJcblxyXG4gICAgICAgIC8vIE1TQUFcclxuICAgICAgICBjb25zdCBlbmFibGVNU0FBID0gIWRpc2FibGVNU0FBICYmIGNhbWVyYUNvbmZpZ3MuZW5hYmxlTVNBQTtcclxuICAgICAgICBhc3NlcnQoIWVuYWJsZU1TQUEgfHwgY2FtZXJhQ29uZmlncy5lbmFibGVTaW5nbGVGb3J3YXJkUGFzcyk7XHJcblxyXG4gICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgICAgICAvLyBGb3J3YXJkIExpZ2h0aW5nIChNYWluIERpcmVjdGlvbmFsIExpZ2h0KVxyXG4gICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgICAgICBjb25zdCBwYXNzID0gY2FtZXJhQ29uZmlncy5lbmFibGVTaW5nbGVGb3J3YXJkUGFzc1xyXG4gICAgICAgICAgICA/IHRoaXMuX2FkZEZvcndhcmRTaW5nbGVSYWRpYW5jZVBhc3MocHBsLCBwcGxDb25maWdzLCBjYW1lcmFDb25maWdzLFxyXG4gICAgICAgICAgICAgICAgaWQsIGNhbWVyYSwgZW5hYmxlTVNBQSwgd2lkdGgsIGhlaWdodCwgbWFpbkxpZ2h0LFxyXG4gICAgICAgICAgICAgICAgY29sb3JOYW1lLCBkZXB0aFN0ZW5jaWxOYW1lLCBkZXB0aFN0ZW5jaWxTdG9yZU9wKVxyXG4gICAgICAgICAgICA6IHRoaXMuX2FkZEZvcndhcmRNdWx0aXBsZVJhZGlhbmNlUGFzc2VzKHBwbCwgY2FtZXJhQ29uZmlncyxcclxuICAgICAgICAgICAgICAgIGlkLCBjYW1lcmEsIHdpZHRoLCBoZWlnaHQsIG1haW5MaWdodCxcclxuICAgICAgICAgICAgICAgIGNvbG9yTmFtZSwgZGVwdGhTdGVuY2lsTmFtZSwgZGVwdGhTdGVuY2lsU3RvcmVPcCk7XHJcblxyXG4gICAgICAgIC8vIFBsYW5hciBTaGFkb3dcclxuICAgICAgICBpZiAoY2FtZXJhQ29uZmlncy5lbmFibGVNYWluTGlnaHRQbGFuYXJTaGFkb3dNYXApIHtcclxuICAgICAgICAgICAgdGhpcy5fYWRkUGxhbmFyU2hhZG93UXVldWUoY2FtZXJhLCBtYWluTGlnaHQsIHBhc3MpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgICAgIC8vIEZvcndhcmQgTGlnaHRpbmcgKEJsZW5kKVxyXG4gICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgICAgICAvLyBBZGQgdHJhbnNwYXJlbnQgcXVldWVcclxuXHJcbiAgICAgICAgY29uc3Qgc2NlbmVGbGFncyA9IFNjZW5lRmxhZ3MuQkxFTkQgfFxyXG4gICAgICAgICAgICAoY2FtZXJhLmdlb21ldHJ5UmVuZGVyZXJcclxuICAgICAgICAgICAgICAgID8gU2NlbmVGbGFncy5HRU9NRVRSWVxyXG4gICAgICAgICAgICAgICAgOiBTY2VuZUZsYWdzLk5PTkUpO1xyXG5cclxuICAgICAgICBwYXNzXHJcbiAgICAgICAgICAgIC5hZGRRdWV1ZShRdWV1ZUhpbnQuQkxFTkQpXHJcbiAgICAgICAgICAgIC5hZGRTY2VuZShjYW1lcmEsIHNjZW5lRmxhZ3MsIG1haW5MaWdodCB8fCB1bmRlZmluZWQpO1xyXG5cclxuICAgICAgICByZXR1cm4gcGFzcztcclxuICAgIH1cclxuICAgIHByaXZhdGUgX2FkZEZvcndhcmRTaW5nbGVSYWRpYW5jZVBhc3MoXHJcbiAgICAgICAgcHBsOiByZW5kZXJpbmcuQmFzaWNQaXBlbGluZSxcclxuICAgICAgICBwcGxDb25maWdzOiBSZWFkb25seTxQaXBlbGluZUNvbmZpZ3M+LFxyXG4gICAgICAgIGNhbWVyYUNvbmZpZ3M6IFJlYWRvbmx5PENhbWVyYUNvbmZpZ3MgJiBGb3J3YXJkUGFzc0NvbmZpZ3M+LFxyXG4gICAgICAgIGlkOiBudW1iZXIsXHJcbiAgICAgICAgY2FtZXJhOiByZW5kZXJlci5zY2VuZS5DYW1lcmEsXHJcbiAgICAgICAgZW5hYmxlTVNBQTogYm9vbGVhbixcclxuICAgICAgICB3aWR0aDogbnVtYmVyLFxyXG4gICAgICAgIGhlaWdodDogbnVtYmVyLFxyXG4gICAgICAgIG1haW5MaWdodDogcmVuZGVyZXIuc2NlbmUuRGlyZWN0aW9uYWxMaWdodCB8IG51bGwsXHJcbiAgICAgICAgY29sb3JOYW1lOiBzdHJpbmcsXHJcbiAgICAgICAgZGVwdGhTdGVuY2lsTmFtZTogc3RyaW5nLFxyXG4gICAgICAgIGRlcHRoU3RlbmNpbFN0b3JlT3A6IGdmeC5TdG9yZU9wXHJcbiAgICApOiByZW5kZXJpbmcuQmFzaWNSZW5kZXJQYXNzQnVpbGRlciB7XHJcbiAgICAgICAgYXNzZXJ0KGNhbWVyYUNvbmZpZ3MuZW5hYmxlU2luZ2xlRm9yd2FyZFBhc3MpO1xyXG4gICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgICAgICAvLyBGb3J3YXJkIExpZ2h0aW5nIChNYWluIERpcmVjdGlvbmFsIExpZ2h0KVxyXG4gICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgICAgICBsZXQgcGFzczogcmVuZGVyaW5nLkJhc2ljUmVuZGVyUGFzc0J1aWxkZXI7XHJcbiAgICAgICAgaWYgKGVuYWJsZU1TQUEpIHtcclxuICAgICAgICAgICAgY29uc3QgbXNhYVJhZGlhbmNlTmFtZSA9IGBNc2FhUmFkaWFuY2Uke2lkfWA7XHJcbiAgICAgICAgICAgIGNvbnN0IG1zYWFEZXB0aFN0ZW5jaWxOYW1lID0gYE1zYWFEZXB0aFN0ZW5jaWwke2lkfWA7XHJcbiAgICAgICAgICAgIGNvbnN0IHNhbXBsZUNvdW50ID0gY2FtZXJhQ29uZmlncy5zZXR0aW5ncy5tc2FhLnNhbXBsZUNvdW50O1xyXG5cclxuICAgICAgICAgICAgY29uc3QgbXNQYXNzID0gcHBsLmFkZE11bHRpc2FtcGxlUmVuZGVyUGFzcyh3aWR0aCwgaGVpZ2h0LCBzYW1wbGVDb3VudCwgMCwgJ2RlZmF1bHQnKTtcclxuICAgICAgICAgICAgbXNQYXNzLm5hbWUgPSAnTXNhYUZvcndhcmRQYXNzJztcclxuXHJcbiAgICAgICAgICAgIC8vIE1TQUEgYWx3YXlzIGRpc2NhcmRzIGRlcHRoIHN0ZW5jaWxcclxuICAgICAgICAgICAgdGhpcy5fYnVpbGRGb3J3YXJkTWFpbkxpZ2h0UGFzcyhtc1Bhc3MsIGNhbWVyYUNvbmZpZ3MsIGlkLCBjYW1lcmEsXHJcbiAgICAgICAgICAgICAgICBtc2FhUmFkaWFuY2VOYW1lLCBtc2FhRGVwdGhTdGVuY2lsTmFtZSwgU3RvcmVPcC5ESVNDQVJELCBtYWluTGlnaHQpO1xyXG5cclxuICAgICAgICAgICAgbXNQYXNzLnJlc29sdmVSZW5kZXJUYXJnZXQobXNhYVJhZGlhbmNlTmFtZSwgY29sb3JOYW1lKTtcclxuXHJcbiAgICAgICAgICAgIHBhc3MgPSBtc1Bhc3M7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcGFzcyA9IHBwbC5hZGRSZW5kZXJQYXNzKHdpZHRoLCBoZWlnaHQsICdkZWZhdWx0Jyk7XHJcbiAgICAgICAgICAgIHBhc3MubmFtZSA9ICdGb3J3YXJkUGFzcyc7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9idWlsZEZvcndhcmRNYWluTGlnaHRQYXNzKHBhc3MsIGNhbWVyYUNvbmZpZ3MsIGlkLCBjYW1lcmEsXHJcbiAgICAgICAgICAgICAgICBjb2xvck5hbWUsIGRlcHRoU3RlbmNpbE5hbWUsIGRlcHRoU3RlbmNpbFN0b3JlT3AsIG1haW5MaWdodCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGFzc2VydChwYXNzICE9PSB1bmRlZmluZWQpO1xyXG5cclxuICAgICAgICAvLyBGb3J3YXJkIExpZ2h0aW5nIChBZGRpdGl2ZSBMaWdodHMpXHJcbiAgICAgICAgdGhpcy5mb3J3YXJkTGlnaHRpbmcuYWRkTGlnaHRRdWV1ZXMoXHJcbiAgICAgICAgICAgIHBhc3MsXHJcbiAgICAgICAgICAgIGNhbWVyYSxcclxuICAgICAgICAgICAgcHBsQ29uZmlncy5tb2JpbGVNYXhTcG90TGlnaHRTaGFkb3dNYXBzLFxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHJldHVybiBwYXNzO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBfYWRkRm9yd2FyZE11bHRpcGxlUmFkaWFuY2VQYXNzZXMoXHJcbiAgICAgICAgcHBsOiByZW5kZXJpbmcuQmFzaWNQaXBlbGluZSxcclxuICAgICAgICBjYW1lcmFDb25maWdzOiBSZWFkb25seTxDYW1lcmFDb25maWdzICYgRm9yd2FyZFBhc3NDb25maWdzPixcclxuICAgICAgICBpZDogbnVtYmVyLFxyXG4gICAgICAgIGNhbWVyYTogcmVuZGVyZXIuc2NlbmUuQ2FtZXJhLFxyXG4gICAgICAgIHdpZHRoOiBudW1iZXIsXHJcbiAgICAgICAgaGVpZ2h0OiBudW1iZXIsXHJcbiAgICAgICAgbWFpbkxpZ2h0OiByZW5kZXJlci5zY2VuZS5EaXJlY3Rpb25hbExpZ2h0IHwgbnVsbCxcclxuICAgICAgICBjb2xvck5hbWU6IHN0cmluZyxcclxuICAgICAgICBkZXB0aFN0ZW5jaWxOYW1lOiBzdHJpbmcsXHJcbiAgICAgICAgZGVwdGhTdGVuY2lsU3RvcmVPcDogZ2Z4LlN0b3JlT3BcclxuICAgICk6IHJlbmRlcmluZy5CYXNpY1JlbmRlclBhc3NCdWlsZGVyIHtcclxuICAgICAgICBhc3NlcnQoIWNhbWVyYUNvbmZpZ3MuZW5hYmxlU2luZ2xlRm9yd2FyZFBhc3MpO1xyXG5cclxuICAgICAgICAvLyBGb3J3YXJkIExpZ2h0aW5nIChNYWluIERpcmVjdGlvbmFsIExpZ2h0KVxyXG4gICAgICAgIGxldCBwYXNzID0gcHBsLmFkZFJlbmRlclBhc3Mod2lkdGgsIGhlaWdodCwgJ2RlZmF1bHQnKTtcclxuICAgICAgICBwYXNzLm5hbWUgPSAnRm9yd2FyZFBhc3MnO1xyXG5cclxuICAgICAgICBjb25zdCBmaXJzdFN0b3JlT3AgPSB0aGlzLmZvcndhcmRMaWdodGluZy5pc011bHRpcGxlTGlnaHRQYXNzZXNOZWVkZWQoKVxyXG4gICAgICAgICAgICA/IFN0b3JlT3AuU1RPUkVcclxuICAgICAgICAgICAgOiBkZXB0aFN0ZW5jaWxTdG9yZU9wO1xyXG5cclxuICAgICAgICB0aGlzLl9idWlsZEZvcndhcmRNYWluTGlnaHRQYXNzKHBhc3MsIGNhbWVyYUNvbmZpZ3MsXHJcbiAgICAgICAgICAgIGlkLCBjYW1lcmEsIGNvbG9yTmFtZSwgZGVwdGhTdGVuY2lsTmFtZSwgZmlyc3RTdG9yZU9wLCBtYWluTGlnaHQpO1xyXG5cclxuICAgICAgICAvLyBGb3J3YXJkIExpZ2h0aW5nIChBZGRpdGl2ZSBMaWdodHMpXHJcbiAgICAgICAgcGFzcyA9IHRoaXMuZm9yd2FyZExpZ2h0aW5nXHJcbiAgICAgICAgICAgIC5hZGRMaWdodFBhc3Nlcyhjb2xvck5hbWUsIGRlcHRoU3RlbmNpbE5hbWUsIGRlcHRoU3RlbmNpbFN0b3JlT3AsXHJcbiAgICAgICAgICAgICAgICBpZCwgd2lkdGgsIGhlaWdodCwgY2FtZXJhLCB0aGlzLl92aWV3cG9ydCwgcHBsLCBwYXNzKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHBhc3M7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIF9idWlsZEZvcndhcmRNYWluTGlnaHRQYXNzKFxyXG4gICAgICAgIHBhc3M6IHJlbmRlcmluZy5CYXNpY1JlbmRlclBhc3NCdWlsZGVyLFxyXG4gICAgICAgIGNhbWVyYUNvbmZpZ3M6IFJlYWRvbmx5PENhbWVyYUNvbmZpZ3MgJiBGb3J3YXJkUGFzc0NvbmZpZ3M+LFxyXG4gICAgICAgIGlkOiBudW1iZXIsXHJcbiAgICAgICAgY2FtZXJhOiByZW5kZXJlci5zY2VuZS5DYW1lcmEsXHJcbiAgICAgICAgY29sb3JOYW1lOiBzdHJpbmcsXHJcbiAgICAgICAgZGVwdGhTdGVuY2lsTmFtZTogc3RyaW5nLFxyXG4gICAgICAgIGRlcHRoU3RlbmNpbFN0b3JlT3A6IGdmeC5TdG9yZU9wLFxyXG4gICAgICAgIG1haW5MaWdodDogcmVuZGVyZXIuc2NlbmUuRGlyZWN0aW9uYWxMaWdodCB8IG51bGwsXHJcbiAgICAgICAgc2NlbmU6IHJlbmRlcmVyLlJlbmRlclNjZW5lIHwgbnVsbCA9IG51bGwsXHJcbiAgICApOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBRdWV1ZUhpbnQgPSByZW5kZXJpbmcuUXVldWVIaW50O1xyXG4gICAgICAgIGNvbnN0IFNjZW5lRmxhZ3MgPSByZW5kZXJpbmcuU2NlbmVGbGFncztcclxuICAgICAgICAvLyBzZXQgdmlld3BvcnRcclxuICAgICAgICBwYXNzLnNldFZpZXdwb3J0KHRoaXMuX3ZpZXdwb3J0KTtcclxuXHJcbiAgICAgICAgY29uc3QgY29sb3JTdG9yZU9wID0gY2FtZXJhQ29uZmlncy5lbmFibGVNU0FBID8gU3RvcmVPcC5ESVNDQVJEIDogU3RvcmVPcC5TVE9SRTtcclxuXHJcbiAgICAgICAgLy8gYmluZCBvdXRwdXQgcmVuZGVyIHRhcmdldFxyXG4gICAgICAgIGlmIChmb3J3YXJkTmVlZENsZWFyQ29sb3IoY2FtZXJhKSkge1xyXG4gICAgICAgICAgICBwYXNzLmFkZFJlbmRlclRhcmdldChjb2xvck5hbWUsIExvYWRPcC5DTEVBUiwgY29sb3JTdG9yZU9wLCB0aGlzLl9jbGVhckNvbG9yKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBwYXNzLmFkZFJlbmRlclRhcmdldChjb2xvck5hbWUsIExvYWRPcC5MT0FELCBjb2xvclN0b3JlT3ApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gYmluZCBkZXB0aCBzdGVuY2lsIGJ1ZmZlclxyXG4gICAgICAgIGlmIChERUJVRykge1xyXG4gICAgICAgICAgICBpZiAoY29sb3JOYW1lID09PSBjYW1lcmFDb25maWdzLmNvbG9yTmFtZSAmJlxyXG4gICAgICAgICAgICAgICAgZGVwdGhTdGVuY2lsTmFtZSAhPT0gY2FtZXJhQ29uZmlncy5kZXB0aFN0ZW5jaWxOYW1lKSB7XHJcbiAgICAgICAgICAgICAgICB3YXJuKCdEZWZhdWx0IGZyYW1lYnVmZmVyIGNhbm5vdCB1c2UgY3VzdG9tIGRlcHRoIHN0ZW5jaWwgYnVmZmVyJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjYW1lcmEuY2xlYXJGbGFnICYgQ2xlYXJGbGFnQml0LkRFUFRIX1NURU5DSUwpIHtcclxuICAgICAgICAgICAgcGFzcy5hZGREZXB0aFN0ZW5jaWwoXHJcbiAgICAgICAgICAgICAgICBkZXB0aFN0ZW5jaWxOYW1lLFxyXG4gICAgICAgICAgICAgICAgTG9hZE9wLkNMRUFSLFxyXG4gICAgICAgICAgICAgICAgZGVwdGhTdGVuY2lsU3RvcmVPcCxcclxuICAgICAgICAgICAgICAgIGNhbWVyYS5jbGVhckRlcHRoLFxyXG4gICAgICAgICAgICAgICAgY2FtZXJhLmNsZWFyU3RlbmNpbCxcclxuICAgICAgICAgICAgICAgIGNhbWVyYS5jbGVhckZsYWcgJiBDbGVhckZsYWdCaXQuREVQVEhfU1RFTkNJTCxcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBwYXNzLmFkZERlcHRoU3RlbmNpbChkZXB0aFN0ZW5jaWxOYW1lLCBMb2FkT3AuTE9BRCwgZGVwdGhTdGVuY2lsU3RvcmVPcCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBTZXQgc2hhZG93IG1hcCBpZiBlbmFibGVkXHJcbiAgICAgICAgaWYgKGNhbWVyYUNvbmZpZ3MuZW5hYmxlTWFpbkxpZ2h0U2hhZG93TWFwKSB7XHJcbiAgICAgICAgICAgIHBhc3MuYWRkVGV4dHVyZShgU2hhZG93TWFwJHtpZH1gLCAnY2Nfc2hhZG93TWFwJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBUT0RPKHpob3V6aGVuZ2xvbmcpOiBTZXBhcmF0ZSBPUEFRVUUgYW5kIE1BU0sgcXVldWVcclxuXHJcbiAgICAgICAgLy8gYWRkIG9wYXF1ZSBhbmQgbWFzayBxdWV1ZVxyXG4gICAgICAgIHBhc3MuYWRkUXVldWUoUXVldWVIaW50Lk5PTkUpIC8vIEN1cnJlbnRseSB3ZSBwdXQgT1BBUVVFIGFuZCBNQVNLIGludG8gb25lIHF1ZXVlLCBzbyBRdWV1ZUhpbnQgaXMgTk9ORVxyXG4gICAgICAgICAgICAuYWRkU2NlbmUoY2FtZXJhLFxyXG4gICAgICAgICAgICAgICAgU2NlbmVGbGFncy5PUEFRVUUgfCBTY2VuZUZsYWdzLk1BU0ssXHJcbiAgICAgICAgICAgICAgICBtYWluTGlnaHQgfHwgdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAgc2NlbmUgPyBzY2VuZSA6IHVuZGVmaW5lZCk7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIF9hZGRQbGFuYXJTaGFkb3dRdWV1ZShcclxuICAgICAgICBjYW1lcmE6IHJlbmRlcmVyLnNjZW5lLkNhbWVyYSxcclxuICAgICAgICBtYWluTGlnaHQ6IHJlbmRlcmVyLnNjZW5lLkRpcmVjdGlvbmFsTGlnaHQgfCBudWxsLFxyXG4gICAgICAgIHBhc3M6IHJlbmRlcmluZy5CYXNpY1JlbmRlclBhc3NCdWlsZGVyLFxyXG4gICAgKSB7XHJcbiAgICAgICAgY29uc3QgUXVldWVIaW50ID0gcmVuZGVyaW5nLlF1ZXVlSGludDtcclxuICAgICAgICBjb25zdCBTY2VuZUZsYWdzID0gcmVuZGVyaW5nLlNjZW5lRmxhZ3M7XHJcbiAgICAgICAgcGFzcy5hZGRRdWV1ZShRdWV1ZUhpbnQuQkxFTkQsICdwbGFuYXItc2hhZG93JylcclxuICAgICAgICAgICAgLmFkZFNjZW5lKFxyXG4gICAgICAgICAgICAgICAgY2FtZXJhLFxyXG4gICAgICAgICAgICAgICAgU2NlbmVGbGFncy5TSEFET1dfQ0FTVEVSIHwgU2NlbmVGbGFncy5QTEFOQVJfU0hBRE9XIHwgU2NlbmVGbGFncy5CTEVORCxcclxuICAgICAgICAgICAgICAgIG1haW5MaWdodCB8fCB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgICk7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IGZvcndhcmRMaWdodGluZyA9IG5ldyBGb3J3YXJkTGlnaHRpbmcoKTtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX3ZpZXdwb3J0ID0gbmV3IFZpZXdwb3J0KCk7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9jbGVhckNvbG9yID0gbmV3IENvbG9yKDAsIDAsIDAsIDEpO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfcmVmbGVjdGlvblByb2JlQ2xlYXJDb2xvciA9IG5ldyBWZWMzKDAsIDAsIDApO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEJsb29tUGFzc0NvbmZpZ3Mge1xyXG4gICAgZW5hYmxlQmxvb206IGJvb2xlYW47XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBCdWlsdGluQmxvb21QYXNzQnVpbGRlciBpbXBsZW1lbnRzIHJlbmRlcmluZy5QaXBlbGluZVBhc3NCdWlsZGVyIHtcclxuICAgIGdldENvbmZpZ09yZGVyKCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIDA7XHJcbiAgICB9XHJcbiAgICBnZXRSZW5kZXJPcmRlcigpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiAyMDA7XHJcbiAgICB9XHJcbiAgICBjb25maWdDYW1lcmEoXHJcbiAgICAgICAgY2FtZXJhOiBSZWFkb25seTxyZW5kZXJlci5zY2VuZS5DYW1lcmE+LFxyXG4gICAgICAgIHBpcGVsaW5lQ29uZmlnczogUmVhZG9ubHk8UGlwZWxpbmVDb25maWdzPixcclxuICAgICAgICBjYW1lcmFDb25maWdzOiBDYW1lcmFDb25maWdzICYgQmxvb21QYXNzQ29uZmlncyk6IHZvaWQge1xyXG4gICAgICAgIGNhbWVyYUNvbmZpZ3MuZW5hYmxlQmxvb21cclxuICAgICAgICAgICAgPSBjYW1lcmFDb25maWdzLnNldHRpbmdzLmJsb29tLmVuYWJsZWRcclxuICAgICAgICAgICAgJiYgISFjYW1lcmFDb25maWdzLnNldHRpbmdzLmJsb29tLm1hdGVyaWFsO1xyXG4gICAgICAgIGlmIChjYW1lcmFDb25maWdzLmVuYWJsZUJsb29tKSB7XHJcbiAgICAgICAgICAgICsrY2FtZXJhQ29uZmlncy5yZW1haW5pbmdQYXNzZXM7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgd2luZG93UmVzaXplKFxyXG4gICAgICAgIHBwbDogcmVuZGVyaW5nLkJhc2ljUGlwZWxpbmUsXHJcbiAgICAgICAgcHBsQ29uZmlnczogUmVhZG9ubHk8UGlwZWxpbmVDb25maWdzPixcclxuICAgICAgICBjYW1lcmFDb25maWdzOiBDYW1lcmFDb25maWdzICYgQmxvb21QYXNzQ29uZmlncyxcclxuICAgICAgICB3aW5kb3c6IHJlbmRlcmVyLlJlbmRlcldpbmRvdyk6IHZvaWQge1xyXG4gICAgICAgIGlmIChjYW1lcmFDb25maWdzLmVuYWJsZUJsb29tKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGlkID0gd2luZG93LnJlbmRlcldpbmRvd0lkO1xyXG4gICAgICAgICAgICBsZXQgYmxvb21XaWR0aCA9IGNhbWVyYUNvbmZpZ3Mud2lkdGg7XHJcbiAgICAgICAgICAgIGxldCBibG9vbUhlaWdodCA9IGNhbWVyYUNvbmZpZ3MuaGVpZ2h0O1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gY2FtZXJhQ29uZmlncy5zZXR0aW5ncy5ibG9vbS5pdGVyYXRpb25zICsgMTsgKytpKSB7XHJcbiAgICAgICAgICAgICAgICBibG9vbVdpZHRoID0gTWF0aC5tYXgoTWF0aC5mbG9vcihibG9vbVdpZHRoIC8gMiksIDEpO1xyXG4gICAgICAgICAgICAgICAgYmxvb21IZWlnaHQgPSBNYXRoLm1heChNYXRoLmZsb29yKGJsb29tSGVpZ2h0IC8gMiksIDEpO1xyXG4gICAgICAgICAgICAgICAgcHBsLmFkZFJlbmRlclRhcmdldChgQmxvb21UZXgke2lkfV8ke2l9YCxcclxuICAgICAgICAgICAgICAgICAgICBjYW1lcmFDb25maWdzLnJhZGlhbmNlRm9ybWF0LCBibG9vbVdpZHRoLCBibG9vbUhlaWdodCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0dXAoXHJcbiAgICAgICAgcHBsOiByZW5kZXJpbmcuQmFzaWNQaXBlbGluZSxcclxuICAgICAgICBwcGxDb25maWdzOiBSZWFkb25seTxQaXBlbGluZUNvbmZpZ3M+LFxyXG4gICAgICAgIGNhbWVyYUNvbmZpZ3M6IENhbWVyYUNvbmZpZ3MgJiBCbG9vbVBhc3NDb25maWdzLFxyXG4gICAgICAgIGNhbWVyYTogcmVuZGVyZXIuc2NlbmUuQ2FtZXJhLFxyXG4gICAgICAgIGNvbnRleHQ6IFBpcGVsaW5lQ29udGV4dCxcclxuICAgICAgICBwcmV2UmVuZGVyUGFzcz86IHJlbmRlcmluZy5CYXNpY1JlbmRlclBhc3NCdWlsZGVyKVxyXG4gICAgICAgIDogcmVuZGVyaW5nLkJhc2ljUmVuZGVyUGFzc0J1aWxkZXIgfCB1bmRlZmluZWQge1xyXG4gICAgICAgIGlmICghY2FtZXJhQ29uZmlncy5lbmFibGVCbG9vbSkge1xyXG4gICAgICAgICAgICByZXR1cm4gcHJldlJlbmRlclBhc3M7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAtLWNhbWVyYUNvbmZpZ3MucmVtYWluaW5nUGFzc2VzO1xyXG4gICAgICAgIGFzc2VydChjYW1lcmFDb25maWdzLnJlbWFpbmluZ1Bhc3NlcyA+PSAwKTtcclxuICAgICAgICBjb25zdCBpZCA9IGNhbWVyYS53aW5kb3cucmVuZGVyV2luZG93SWQ7XHJcbiAgICAgICAgYXNzZXJ0KCEhY2FtZXJhQ29uZmlncy5zZXR0aW5ncy5ibG9vbS5tYXRlcmlhbCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZEthd2FzZUR1YWxGaWx0ZXJCbG9vbVBhc3NlcyhcclxuICAgICAgICAgICAgcHBsLCBwcGxDb25maWdzLFxyXG4gICAgICAgICAgICBjYW1lcmFDb25maWdzLFxyXG4gICAgICAgICAgICBjYW1lcmFDb25maWdzLnNldHRpbmdzLFxyXG4gICAgICAgICAgICBjYW1lcmFDb25maWdzLnNldHRpbmdzLmJsb29tLm1hdGVyaWFsLFxyXG4gICAgICAgICAgICBpZCxcclxuICAgICAgICAgICAgY2FtZXJhQ29uZmlncy53aWR0aCxcclxuICAgICAgICAgICAgY2FtZXJhQ29uZmlncy5oZWlnaHQsXHJcbiAgICAgICAgICAgIGNvbnRleHQuY29sb3JOYW1lKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9hZGRLYXdhc2VEdWFsRmlsdGVyQmxvb21QYXNzZXMoXHJcbiAgICAgICAgcHBsOiByZW5kZXJpbmcuQmFzaWNQaXBlbGluZSxcclxuICAgICAgICBwcGxDb25maWdzOiBSZWFkb25seTxQaXBlbGluZUNvbmZpZ3M+LFxyXG4gICAgICAgIGNhbWVyYUNvbmZpZ3M6IENhbWVyYUNvbmZpZ3MgJiBSZWFkb25seTxCbG9vbVBhc3NDb25maWdzPixcclxuICAgICAgICBzZXR0aW5nczogUGlwZWxpbmVTZXR0aW5ncyxcclxuICAgICAgICBibG9vbU1hdGVyaWFsOiBNYXRlcmlhbCxcclxuICAgICAgICBpZDogbnVtYmVyLFxyXG4gICAgICAgIHdpZHRoOiBudW1iZXIsXHJcbiAgICAgICAgaGVpZ2h0OiBudW1iZXIsXHJcbiAgICAgICAgcmFkaWFuY2VOYW1lOiBzdHJpbmcsXHJcbiAgICApOiByZW5kZXJpbmcuQmFzaWNSZW5kZXJQYXNzQnVpbGRlciB7XHJcbiAgICAgICAgY29uc3QgUXVldWVIaW50ID0gcmVuZGVyaW5nLlF1ZXVlSGludDtcclxuICAgICAgICAvLyBCYXNlZCBvbiBLYXdhc2UgRHVhbCBGaWx0ZXIgQmx1ci4gU2F2ZXMgYmFuZHdpZHRoIG9uIG1vYmlsZSBkZXZpY2VzLlxyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBtYXgtbGVuXHJcbiAgICAgICAgLy8gaHR0cHM6Ly9jb21tdW5pdHkuYXJtLmNvbS9jZnMtZmlsZS9fX2tleS9jb21tdW5pdHlzZXJ2ZXItYmxvZ3MtY29tcG9uZW50cy13ZWJsb2dmaWxlcy8wMC0wMC0wMC0yMC02Ni9zaWdncmFwaDIwMTVfMkQwMF9tbWdfMkQwMF9tYXJpdXNfMkQwMF9zbGlkZXMucGRmXHJcblxyXG4gICAgICAgIC8vIFNpemU6IFtwcmVmaWx0ZXIoMS8yKSwgZG93bnNhbXBsZSgxLzQpLCBkb3duc2FtcGxlKDEvOCksIGRvd25zYW1wbGUoMS8xNiksIC4uLl1cclxuICAgICAgICBjb25zdCBpdGVyYXRpb25zID0gc2V0dGluZ3MuYmxvb20uaXRlcmF0aW9ucztcclxuICAgICAgICBjb25zdCBzaXplQ291bnQgPSBpdGVyYXRpb25zICsgMTtcclxuICAgICAgICB0aGlzLl9ibG9vbVdpZHRocy5sZW5ndGggPSBzaXplQ291bnQ7XHJcbiAgICAgICAgdGhpcy5fYmxvb21IZWlnaHRzLmxlbmd0aCA9IHNpemVDb3VudDtcclxuICAgICAgICB0aGlzLl9ibG9vbVdpZHRoc1swXSA9IE1hdGgubWF4KE1hdGguZmxvb3Iod2lkdGggLyAyKSwgMSk7XHJcbiAgICAgICAgdGhpcy5fYmxvb21IZWlnaHRzWzBdID0gTWF0aC5tYXgoTWF0aC5mbG9vcihoZWlnaHQgLyAyKSwgMSk7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgIT09IHNpemVDb3VudDsgKytpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2Jsb29tV2lkdGhzW2ldID0gTWF0aC5tYXgoTWF0aC5mbG9vcih0aGlzLl9ibG9vbVdpZHRoc1tpIC0gMV0gLyAyKSwgMSk7XHJcbiAgICAgICAgICAgIHRoaXMuX2Jsb29tSGVpZ2h0c1tpXSA9IE1hdGgubWF4KE1hdGguZmxvb3IodGhpcy5fYmxvb21IZWlnaHRzW2kgLSAxXSAvIDIpLCAxKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEJsb29tIHRleHR1cmUgbmFtZXNcclxuICAgICAgICB0aGlzLl9ibG9vbVRleE5hbWVzLmxlbmd0aCA9IHNpemVDb3VudDtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gc2l6ZUNvdW50OyArK2kpIHtcclxuICAgICAgICAgICAgdGhpcy5fYmxvb21UZXhOYW1lc1tpXSA9IGBCbG9vbVRleCR7aWR9XyR7aX1gO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gU2V0dXAgYmxvb20gcGFyYW1ldGVyc1xyXG4gICAgICAgIHRoaXMuX2Jsb29tUGFyYW1zLnggPSBwcGxDb25maWdzLnVzZUZsb2F0T3V0cHV0ID8gMSA6IDA7XHJcbiAgICAgICAgdGhpcy5fYmxvb21QYXJhbXMueCA9IDA7IC8vIHVudXNlZFxyXG4gICAgICAgIHRoaXMuX2Jsb29tUGFyYW1zLnogPSBzZXR0aW5ncy5ibG9vbS50aHJlc2hvbGQ7XHJcbiAgICAgICAgdGhpcy5fYmxvb21QYXJhbXMudyA9IHNldHRpbmdzLmJsb29tLmVuYWJsZUFscGhhTWFzayA/IDEgOiAwO1xyXG5cclxuICAgICAgICAvLyBQcmVmaWx0ZXIgcGFzc1xyXG4gICAgICAgIGNvbnN0IHByZWZpbHRlclBhc3MgPSBwcGwuYWRkUmVuZGVyUGFzcyh0aGlzLl9ibG9vbVdpZHRoc1swXSwgdGhpcy5fYmxvb21IZWlnaHRzWzBdLCAnY2MtYmxvb20tcHJlZmlsdGVyJyk7XHJcbiAgICAgICAgcHJlZmlsdGVyUGFzcy5hZGRSZW5kZXJUYXJnZXQoXHJcbiAgICAgICAgICAgIHRoaXMuX2Jsb29tVGV4TmFtZXNbMF0sXHJcbiAgICAgICAgICAgIExvYWRPcC5DTEVBUixcclxuICAgICAgICAgICAgU3RvcmVPcC5TVE9SRSxcclxuICAgICAgICAgICAgdGhpcy5fY2xlYXJDb2xvclRyYW5zcGFyZW50QmxhY2ssXHJcbiAgICAgICAgKTtcclxuICAgICAgICBwcmVmaWx0ZXJQYXNzLmFkZFRleHR1cmUocmFkaWFuY2VOYW1lLCAnaW5wdXRUZXh0dXJlJyk7XHJcbiAgICAgICAgcHJlZmlsdGVyUGFzcy5zZXRWZWM0KCdnX3BsYXRmb3JtJywgcHBsQ29uZmlncy5wbGF0Zm9ybSk7XHJcbiAgICAgICAgcHJlZmlsdGVyUGFzcy5zZXRWZWM0KCdibG9vbVBhcmFtcycsIHRoaXMuX2Jsb29tUGFyYW1zKTtcclxuICAgICAgICBwcmVmaWx0ZXJQYXNzXHJcbiAgICAgICAgICAgIC5hZGRRdWV1ZShRdWV1ZUhpbnQuT1BBUVVFKVxyXG4gICAgICAgICAgICAuYWRkRnVsbHNjcmVlblF1YWQoYmxvb21NYXRlcmlhbCwgMCk7XHJcblxyXG4gICAgICAgIC8vIERvd25zYW1wbGUgcGFzc2VzXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgIT09IHNpemVDb3VudDsgKytpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRvd25QYXNzID0gcHBsLmFkZFJlbmRlclBhc3ModGhpcy5fYmxvb21XaWR0aHNbaV0sIHRoaXMuX2Jsb29tSGVpZ2h0c1tpXSwgJ2NjLWJsb29tLWRvd25zYW1wbGUnKTtcclxuICAgICAgICAgICAgZG93blBhc3MuYWRkUmVuZGVyVGFyZ2V0KHRoaXMuX2Jsb29tVGV4TmFtZXNbaV0sIExvYWRPcC5DTEVBUiwgU3RvcmVPcC5TVE9SRSwgdGhpcy5fY2xlYXJDb2xvclRyYW5zcGFyZW50QmxhY2spO1xyXG4gICAgICAgICAgICBkb3duUGFzcy5hZGRUZXh0dXJlKHRoaXMuX2Jsb29tVGV4TmFtZXNbaSAtIDFdLCAnYmxvb21UZXh0dXJlJyk7XHJcbiAgICAgICAgICAgIHRoaXMuX2Jsb29tVGV4U2l6ZS54ID0gdGhpcy5fYmxvb21XaWR0aHNbaSAtIDFdO1xyXG4gICAgICAgICAgICB0aGlzLl9ibG9vbVRleFNpemUueSA9IHRoaXMuX2Jsb29tSGVpZ2h0c1tpIC0gMV07XHJcbiAgICAgICAgICAgIGRvd25QYXNzLnNldFZlYzQoJ2dfcGxhdGZvcm0nLCBwcGxDb25maWdzLnBsYXRmb3JtKTtcclxuICAgICAgICAgICAgZG93blBhc3Muc2V0VmVjNCgnYmxvb21UZXhTaXplJywgdGhpcy5fYmxvb21UZXhTaXplKTtcclxuICAgICAgICAgICAgZG93blBhc3NcclxuICAgICAgICAgICAgICAgIC5hZGRRdWV1ZShRdWV1ZUhpbnQuT1BBUVVFKVxyXG4gICAgICAgICAgICAgICAgLmFkZEZ1bGxzY3JlZW5RdWFkKGJsb29tTWF0ZXJpYWwsIDEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gVXBzYW1wbGUgcGFzc2VzXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IGl0ZXJhdGlvbnM7IGktLSA+IDA7KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHVwUGFzcyA9IHBwbC5hZGRSZW5kZXJQYXNzKHRoaXMuX2Jsb29tV2lkdGhzW2ldLCB0aGlzLl9ibG9vbUhlaWdodHNbaV0sICdjYy1ibG9vbS11cHNhbXBsZScpO1xyXG4gICAgICAgICAgICB1cFBhc3MuYWRkUmVuZGVyVGFyZ2V0KHRoaXMuX2Jsb29tVGV4TmFtZXNbaV0sIExvYWRPcC5DTEVBUiwgU3RvcmVPcC5TVE9SRSwgdGhpcy5fY2xlYXJDb2xvclRyYW5zcGFyZW50QmxhY2spO1xyXG4gICAgICAgICAgICB1cFBhc3MuYWRkVGV4dHVyZSh0aGlzLl9ibG9vbVRleE5hbWVzW2kgKyAxXSwgJ2Jsb29tVGV4dHVyZScpO1xyXG4gICAgICAgICAgICB0aGlzLl9ibG9vbVRleFNpemUueCA9IHRoaXMuX2Jsb29tV2lkdGhzW2kgKyAxXTtcclxuICAgICAgICAgICAgdGhpcy5fYmxvb21UZXhTaXplLnkgPSB0aGlzLl9ibG9vbUhlaWdodHNbaSArIDFdO1xyXG4gICAgICAgICAgICB1cFBhc3Muc2V0VmVjNCgnZ19wbGF0Zm9ybScsIHBwbENvbmZpZ3MucGxhdGZvcm0pO1xyXG4gICAgICAgICAgICB1cFBhc3Muc2V0VmVjNCgnYmxvb21UZXhTaXplJywgdGhpcy5fYmxvb21UZXhTaXplKTtcclxuICAgICAgICAgICAgdXBQYXNzXHJcbiAgICAgICAgICAgICAgICAuYWRkUXVldWUoUXVldWVIaW50Lk9QQVFVRSlcclxuICAgICAgICAgICAgICAgIC5hZGRGdWxsc2NyZWVuUXVhZChibG9vbU1hdGVyaWFsLCAyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIENvbWJpbmUgcGFzc1xyXG4gICAgICAgIGNvbnN0IGNvbWJpbmVQYXNzID0gcHBsLmFkZFJlbmRlclBhc3Mod2lkdGgsIGhlaWdodCwgJ2NjLWJsb29tLWNvbWJpbmUnKTtcclxuICAgICAgICBjb21iaW5lUGFzcy5hZGRSZW5kZXJUYXJnZXQocmFkaWFuY2VOYW1lLCBMb2FkT3AuTE9BRCwgU3RvcmVPcC5TVE9SRSk7XHJcbiAgICAgICAgY29tYmluZVBhc3MuYWRkVGV4dHVyZSh0aGlzLl9ibG9vbVRleE5hbWVzWzBdLCAnYmxvb21UZXh0dXJlJyk7XHJcbiAgICAgICAgY29tYmluZVBhc3Muc2V0VmVjNCgnZ19wbGF0Zm9ybScsIHBwbENvbmZpZ3MucGxhdGZvcm0pO1xyXG4gICAgICAgIGNvbWJpbmVQYXNzLnNldFZlYzQoJ2Jsb29tUGFyYW1zJywgdGhpcy5fYmxvb21QYXJhbXMpO1xyXG4gICAgICAgIGNvbWJpbmVQYXNzXHJcbiAgICAgICAgICAgIC5hZGRRdWV1ZShRdWV1ZUhpbnQuQkxFTkQpXHJcbiAgICAgICAgICAgIC5hZGRGdWxsc2NyZWVuUXVhZChibG9vbU1hdGVyaWFsLCAzKTtcclxuXHJcbiAgICAgICAgaWYgKGNhbWVyYUNvbmZpZ3MucmVtYWluaW5nUGFzc2VzID09PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhZGRDb3B5VG9TY3JlZW5QYXNzKHBwbCwgcHBsQ29uZmlncywgY2FtZXJhQ29uZmlncywgcmFkaWFuY2VOYW1lKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gY29tYmluZVBhc3M7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gQmxvb21cclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2NsZWFyQ29sb3JUcmFuc3BhcmVudEJsYWNrID0gbmV3IENvbG9yKDAsIDAsIDAsIDApO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfYmxvb21QYXJhbXMgPSBuZXcgVmVjNCgwLCAwLCAwLCAwKTtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2Jsb29tVGV4U2l6ZSA9IG5ldyBWZWM0KDAsIDAsIDAsIDApO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfYmxvb21XaWR0aHM6IEFycmF5PG51bWJlcj4gPSBbXTtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2Jsb29tSGVpZ2h0czogQXJyYXk8bnVtYmVyPiA9IFtdO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfYmxvb21UZXhOYW1lczogQXJyYXk8c3RyaW5nPiA9IFtdO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFRvbmVNYXBwaW5nUGFzc0NvbmZpZ3Mge1xyXG4gICAgZW5hYmxlVG9uZU1hcHBpbmc6IGJvb2xlYW47XHJcbiAgICBlbmFibGVDb2xvckdyYWRpbmc6IGJvb2xlYW47XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBCdWlsdGluVG9uZU1hcHBpbmdQYXNzQnVpbGRlciBpbXBsZW1lbnRzIHJlbmRlcmluZy5QaXBlbGluZVBhc3NCdWlsZGVyIHtcclxuICAgIGdldENvbmZpZ09yZGVyKCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIDA7XHJcbiAgICB9XHJcbiAgICBnZXRSZW5kZXJPcmRlcigpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiAzMDA7XHJcbiAgICB9XHJcbiAgICBjb25maWdDYW1lcmEoXHJcbiAgICAgICAgY2FtZXJhOiBSZWFkb25seTxyZW5kZXJlci5zY2VuZS5DYW1lcmE+LFxyXG4gICAgICAgIHBwbENvbmZpZ3M6IFJlYWRvbmx5PFBpcGVsaW5lQ29uZmlncz4sXHJcbiAgICAgICAgY2FtZXJhQ29uZmlnczogQ2FtZXJhQ29uZmlncyAmIFRvbmVNYXBwaW5nUGFzc0NvbmZpZ3MpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBzZXR0aW5ncyA9IGNhbWVyYUNvbmZpZ3Muc2V0dGluZ3M7XHJcblxyXG4gICAgICAgIGNhbWVyYUNvbmZpZ3MuZW5hYmxlQ29sb3JHcmFkaW5nXHJcbiAgICAgICAgICAgID0gc2V0dGluZ3MuY29sb3JHcmFkaW5nLmVuYWJsZWRcclxuICAgICAgICAgICAgJiYgISFzZXR0aW5ncy5jb2xvckdyYWRpbmcubWF0ZXJpYWxcclxuICAgICAgICAgICAgJiYgISFzZXR0aW5ncy5jb2xvckdyYWRpbmcuY29sb3JHcmFkaW5nTWFwO1xyXG5cclxuICAgICAgICBjYW1lcmFDb25maWdzLmVuYWJsZVRvbmVNYXBwaW5nXHJcbiAgICAgICAgICAgID0gY2FtZXJhQ29uZmlncy5lbmFibGVIRFIgLy8gRnJvbSBIYWxmIHRvIFJHQkE4XHJcbiAgICAgICAgICAgIHx8IGNhbWVyYUNvbmZpZ3MuZW5hYmxlQ29sb3JHcmFkaW5nOyAvLyBDb2xvciBncmFkaW5nXHJcblxyXG4gICAgICAgIGlmIChjYW1lcmFDb25maWdzLmVuYWJsZVRvbmVNYXBwaW5nKSB7XHJcbiAgICAgICAgICAgICsrY2FtZXJhQ29uZmlncy5yZW1haW5pbmdQYXNzZXM7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgd2luZG93UmVzaXplKFxyXG4gICAgICAgIHBwbDogcmVuZGVyaW5nLkJhc2ljUGlwZWxpbmUsXHJcbiAgICAgICAgcHBsQ29uZmlnczogUmVhZG9ubHk8UGlwZWxpbmVDb25maWdzPixcclxuICAgICAgICBjYW1lcmFDb25maWdzOiBDYW1lcmFDb25maWdzICYgVG9uZU1hcHBpbmdQYXNzQ29uZmlncyk6IHZvaWQge1xyXG4gICAgICAgIGlmIChjYW1lcmFDb25maWdzLmVuYWJsZUNvbG9yR3JhZGluZykge1xyXG4gICAgICAgICAgICBhc3NlcnQoISFjYW1lcmFDb25maWdzLnNldHRpbmdzLmNvbG9yR3JhZGluZy5tYXRlcmlhbCk7XHJcbiAgICAgICAgICAgIGNhbWVyYUNvbmZpZ3Muc2V0dGluZ3MuY29sb3JHcmFkaW5nLm1hdGVyaWFsLnNldFByb3BlcnR5KFxyXG4gICAgICAgICAgICAgICAgJ2NvbG9yR3JhZGluZ01hcCcsXHJcbiAgICAgICAgICAgICAgICBjYW1lcmFDb25maWdzLnNldHRpbmdzLmNvbG9yR3JhZGluZy5jb2xvckdyYWRpbmdNYXApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHNldHVwKFxyXG4gICAgICAgIHBwbDogcmVuZGVyaW5nLkJhc2ljUGlwZWxpbmUsXHJcbiAgICAgICAgcHBsQ29uZmlnczogUmVhZG9ubHk8UGlwZWxpbmVDb25maWdzPixcclxuICAgICAgICBjYW1lcmFDb25maWdzOiBDYW1lcmFDb25maWdzICYgVG9uZU1hcHBpbmdQYXNzQ29uZmlncyxcclxuICAgICAgICBjYW1lcmE6IHJlbmRlcmVyLnNjZW5lLkNhbWVyYSxcclxuICAgICAgICBjb250ZXh0OiBQaXBlbGluZUNvbnRleHQsXHJcbiAgICAgICAgcHJldlJlbmRlclBhc3M/OiByZW5kZXJpbmcuQmFzaWNSZW5kZXJQYXNzQnVpbGRlcilcclxuICAgICAgICA6IHJlbmRlcmluZy5CYXNpY1JlbmRlclBhc3NCdWlsZGVyIHwgdW5kZWZpbmVkIHtcclxuICAgICAgICBpZiAoIWNhbWVyYUNvbmZpZ3MuZW5hYmxlVG9uZU1hcHBpbmcpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHByZXZSZW5kZXJQYXNzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLS1jYW1lcmFDb25maWdzLnJlbWFpbmluZ1Bhc3NlcztcclxuICAgICAgICBhc3NlcnQoY2FtZXJhQ29uZmlncy5yZW1haW5pbmdQYXNzZXMgPj0gMCk7XHJcbiAgICAgICAgaWYgKGNhbWVyYUNvbmZpZ3MucmVtYWluaW5nUGFzc2VzID09PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9hZGRDb3B5QW5kVG9uZW1hcFBhc3MocHBsLCBwcGxDb25maWdzLCBjYW1lcmFDb25maWdzLFxyXG4gICAgICAgICAgICAgICAgY2FtZXJhQ29uZmlncy53aWR0aCwgY2FtZXJhQ29uZmlncy5oZWlnaHQsXHJcbiAgICAgICAgICAgICAgICBjb250ZXh0LmNvbG9yTmFtZSwgY2FtZXJhQ29uZmlncy5jb2xvck5hbWUpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGlkID0gY2FtZXJhQ29uZmlncy5yZW5kZXJXaW5kb3dJZDtcclxuICAgICAgICAgICAgY29uc3QgbGRyQ29sb3JQcmVmaXggPSBjYW1lcmFDb25maWdzLmVuYWJsZVNoYWRpbmdTY2FsZVxyXG4gICAgICAgICAgICAgICAgPyBgU2NhbGVkTGRyQ29sb3JgXHJcbiAgICAgICAgICAgICAgICA6IGBMZHJDb2xvcmA7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBsZHJDb2xvck5hbWUgPSBnZXRQaW5nUG9uZ1JlbmRlclRhcmdldChjb250ZXh0LmNvbG9yTmFtZSwgbGRyQ29sb3JQcmVmaXgsIGlkKTtcclxuICAgICAgICAgICAgY29uc3QgcmFkaWFuY2VOYW1lID0gY29udGV4dC5jb2xvck5hbWU7XHJcbiAgICAgICAgICAgIGNvbnRleHQuY29sb3JOYW1lID0gbGRyQ29sb3JOYW1lO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENvcHlBbmRUb25lbWFwUGFzcyhwcGwsIHBwbENvbmZpZ3MsIGNhbWVyYUNvbmZpZ3MsXHJcbiAgICAgICAgICAgICAgICBjYW1lcmFDb25maWdzLndpZHRoLCBjYW1lcmFDb25maWdzLmhlaWdodCxcclxuICAgICAgICAgICAgICAgIHJhZGlhbmNlTmFtZSwgbGRyQ29sb3JOYW1lKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIF9hZGRDb3B5QW5kVG9uZW1hcFBhc3MoXHJcbiAgICAgICAgcHBsOiByZW5kZXJpbmcuQmFzaWNQaXBlbGluZSxcclxuICAgICAgICBwcGxDb25maWdzOiBSZWFkb25seTxQaXBlbGluZUNvbmZpZ3M+LFxyXG4gICAgICAgIGNhbWVyYUNvbmZpZ3M6IENhbWVyYUNvbmZpZ3MgJiBUb25lTWFwcGluZ1Bhc3NDb25maWdzLFxyXG4gICAgICAgIHdpZHRoOiBudW1iZXIsXHJcbiAgICAgICAgaGVpZ2h0OiBudW1iZXIsXHJcbiAgICAgICAgcmFkaWFuY2VOYW1lOiBzdHJpbmcsXHJcbiAgICAgICAgY29sb3JOYW1lOiBzdHJpbmcsXHJcbiAgICApOiByZW5kZXJpbmcuQmFzaWNSZW5kZXJQYXNzQnVpbGRlciB7XHJcbiAgICAgICAgbGV0IHBhc3M6IHJlbmRlcmluZy5CYXNpY1JlbmRlclBhc3NCdWlsZGVyO1xyXG4gICAgICAgIGNvbnN0IHNldHRpbmdzID0gY2FtZXJhQ29uZmlncy5zZXR0aW5ncztcclxuICAgICAgICBpZiAoY2FtZXJhQ29uZmlncy5lbmFibGVDb2xvckdyYWRpbmcpIHtcclxuICAgICAgICAgICAgYXNzZXJ0KCEhc2V0dGluZ3MuY29sb3JHcmFkaW5nLm1hdGVyaWFsKTtcclxuICAgICAgICAgICAgYXNzZXJ0KCEhc2V0dGluZ3MuY29sb3JHcmFkaW5nLmNvbG9yR3JhZGluZ01hcCk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBsdXRUZXggPSBzZXR0aW5ncy5jb2xvckdyYWRpbmcuY29sb3JHcmFkaW5nTWFwO1xyXG4gICAgICAgICAgICB0aGlzLl9jb2xvckdyYWRpbmdUZXhTaXplLnggPSBsdXRUZXgud2lkdGg7XHJcbiAgICAgICAgICAgIHRoaXMuX2NvbG9yR3JhZGluZ1RleFNpemUueSA9IGx1dFRleC5oZWlnaHQ7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBpc1NxdWFyZU1hcCA9IGx1dFRleC53aWR0aCA9PT0gbHV0VGV4LmhlaWdodDtcclxuICAgICAgICAgICAgaWYgKGlzU3F1YXJlTWFwKSB7XHJcbiAgICAgICAgICAgICAgICBwYXNzID0gcHBsLmFkZFJlbmRlclBhc3Mod2lkdGgsIGhlaWdodCwgJ2NjLWNvbG9yLWdyYWRpbmctOHg4Jyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBwYXNzID0gcHBsLmFkZFJlbmRlclBhc3Mod2lkdGgsIGhlaWdodCwgJ2NjLWNvbG9yLWdyYWRpbmctbngxJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcGFzcy5hZGRSZW5kZXJUYXJnZXQoY29sb3JOYW1lLCBMb2FkT3AuQ0xFQVIsIFN0b3JlT3AuU1RPUkUsIHNDbGVhckNvbG9yVHJhbnNwYXJlbnRCbGFjayk7XHJcbiAgICAgICAgICAgIHBhc3MuYWRkVGV4dHVyZShyYWRpYW5jZU5hbWUsICdzY2VuZUNvbG9yTWFwJyk7XHJcbiAgICAgICAgICAgIHBhc3Muc2V0VmVjNCgnZ19wbGF0Zm9ybScsIHBwbENvbmZpZ3MucGxhdGZvcm0pO1xyXG4gICAgICAgICAgICBwYXNzLnNldFZlYzIoJ2x1dFRleHR1cmVTaXplJywgdGhpcy5fY29sb3JHcmFkaW5nVGV4U2l6ZSk7XHJcbiAgICAgICAgICAgIHBhc3Muc2V0RmxvYXQoJ2NvbnRyaWJ1dGUnLCBzZXR0aW5ncy5jb2xvckdyYWRpbmcuY29udHJpYnV0ZSk7XHJcbiAgICAgICAgICAgIHBhc3MuYWRkUXVldWUocmVuZGVyaW5nLlF1ZXVlSGludC5PUEFRVUUpXHJcbiAgICAgICAgICAgICAgICAuYWRkRnVsbHNjcmVlblF1YWQoc2V0dGluZ3MuY29sb3JHcmFkaW5nLm1hdGVyaWFsLCBpc1NxdWFyZU1hcCA/IDEgOiAwKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBwYXNzID0gcHBsLmFkZFJlbmRlclBhc3Mod2lkdGgsIGhlaWdodCwgJ2NjLXRvbmUtbWFwcGluZycpO1xyXG4gICAgICAgICAgICBwYXNzLmFkZFJlbmRlclRhcmdldChjb2xvck5hbWUsIExvYWRPcC5DTEVBUiwgU3RvcmVPcC5TVE9SRSwgc0NsZWFyQ29sb3JUcmFuc3BhcmVudEJsYWNrKTtcclxuICAgICAgICAgICAgcGFzcy5hZGRUZXh0dXJlKHJhZGlhbmNlTmFtZSwgJ2lucHV0VGV4dHVyZScpO1xyXG4gICAgICAgICAgICBwYXNzLnNldFZlYzQoJ2dfcGxhdGZvcm0nLCBwcGxDb25maWdzLnBsYXRmb3JtKTtcclxuICAgICAgICAgICAgaWYgKHNldHRpbmdzLnRvbmVNYXBwaW5nLm1hdGVyaWFsKSB7XHJcbiAgICAgICAgICAgICAgICBwYXNzLmFkZFF1ZXVlKHJlbmRlcmluZy5RdWV1ZUhpbnQuT1BBUVVFKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGRGdWxsc2NyZWVuUXVhZChzZXR0aW5ncy50b25lTWFwcGluZy5tYXRlcmlhbCwgMCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBhc3NlcnQoISFjYW1lcmFDb25maWdzLmNvcHlBbmRUb25lbWFwTWF0ZXJpYWwpO1xyXG4gICAgICAgICAgICAgICAgcGFzcy5hZGRRdWV1ZShyZW5kZXJpbmcuUXVldWVIaW50Lk9QQVFVRSlcclxuICAgICAgICAgICAgICAgICAgICAuYWRkRnVsbHNjcmVlblF1YWQoY2FtZXJhQ29uZmlncy5jb3B5QW5kVG9uZW1hcE1hdGVyaWFsLCAwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcGFzcztcclxuICAgIH1cclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2NvbG9yR3JhZGluZ1RleFNpemUgPSBuZXcgVmVjMigwLCAwKTtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBGWEFBUGFzc0NvbmZpZ3Mge1xyXG4gICAgZW5hYmxlRlhBQTogYm9vbGVhbjtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEJ1aWx0aW5GWEFBUGFzc0J1aWxkZXIgaW1wbGVtZW50cyByZW5kZXJpbmcuUGlwZWxpbmVQYXNzQnVpbGRlciB7XHJcbiAgICBnZXRDb25maWdPcmRlcigpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiAwO1xyXG4gICAgfVxyXG4gICAgZ2V0UmVuZGVyT3JkZXIoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gNDAwO1xyXG4gICAgfVxyXG4gICAgY29uZmlnQ2FtZXJhKFxyXG4gICAgICAgIGNhbWVyYTogUmVhZG9ubHk8cmVuZGVyZXIuc2NlbmUuQ2FtZXJhPixcclxuICAgICAgICBwcGxDb25maWdzOiBSZWFkb25seTxQaXBlbGluZUNvbmZpZ3M+LFxyXG4gICAgICAgIGNhbWVyYUNvbmZpZ3M6IENhbWVyYUNvbmZpZ3MgJiBGWEFBUGFzc0NvbmZpZ3MpOiB2b2lkIHtcclxuICAgICAgICBjYW1lcmFDb25maWdzLmVuYWJsZUZYQUFcclxuICAgICAgICAgICAgPSBjYW1lcmFDb25maWdzLnNldHRpbmdzLmZ4YWEuZW5hYmxlZFxyXG4gICAgICAgICAgICAmJiAhIWNhbWVyYUNvbmZpZ3Muc2V0dGluZ3MuZnhhYS5tYXRlcmlhbDtcclxuICAgICAgICBpZiAoY2FtZXJhQ29uZmlncy5lbmFibGVGWEFBKSB7XHJcbiAgICAgICAgICAgICsrY2FtZXJhQ29uZmlncy5yZW1haW5pbmdQYXNzZXM7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgc2V0dXAoXHJcbiAgICAgICAgcHBsOiByZW5kZXJpbmcuQmFzaWNQaXBlbGluZSxcclxuICAgICAgICBwcGxDb25maWdzOiBSZWFkb25seTxQaXBlbGluZUNvbmZpZ3M+LFxyXG4gICAgICAgIGNhbWVyYUNvbmZpZ3M6IENhbWVyYUNvbmZpZ3MgJiBGWEFBUGFzc0NvbmZpZ3MsXHJcbiAgICAgICAgY2FtZXJhOiByZW5kZXJlci5zY2VuZS5DYW1lcmEsXHJcbiAgICAgICAgY29udGV4dDogUGlwZWxpbmVDb250ZXh0LFxyXG4gICAgICAgIHByZXZSZW5kZXJQYXNzPzogcmVuZGVyaW5nLkJhc2ljUmVuZGVyUGFzc0J1aWxkZXIpXHJcbiAgICAgICAgOiByZW5kZXJpbmcuQmFzaWNSZW5kZXJQYXNzQnVpbGRlciB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgaWYgKCFjYW1lcmFDb25maWdzLmVuYWJsZUZYQUEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHByZXZSZW5kZXJQYXNzO1xyXG4gICAgICAgIH1cclxuICAgICAgICAtLWNhbWVyYUNvbmZpZ3MucmVtYWluaW5nUGFzc2VzO1xyXG4gICAgICAgIGFzc2VydChjYW1lcmFDb25maWdzLnJlbWFpbmluZ1Bhc3NlcyA+PSAwKTtcclxuXHJcbiAgICAgICAgY29uc3QgaWQgPSBjYW1lcmFDb25maWdzLnJlbmRlcldpbmRvd0lkO1xyXG4gICAgICAgIGNvbnN0IGxkckNvbG9yUHJlZml4ID0gY2FtZXJhQ29uZmlncy5lbmFibGVTaGFkaW5nU2NhbGVcclxuICAgICAgICAgICAgPyBgU2NhbGVkTGRyQ29sb3JgXHJcbiAgICAgICAgICAgIDogYExkckNvbG9yYDtcclxuICAgICAgICBjb25zdCBsZHJDb2xvck5hbWUgPSBnZXRQaW5nUG9uZ1JlbmRlclRhcmdldChjb250ZXh0LmNvbG9yTmFtZSwgbGRyQ29sb3JQcmVmaXgsIGlkKTtcclxuXHJcbiAgICAgICAgYXNzZXJ0KCEhY2FtZXJhQ29uZmlncy5zZXR0aW5ncy5meGFhLm1hdGVyaWFsKTtcclxuICAgICAgICBpZiAoY2FtZXJhQ29uZmlncy5yZW1haW5pbmdQYXNzZXMgPT09IDApIHtcclxuICAgICAgICAgICAgaWYgKGNhbWVyYUNvbmZpZ3MuZW5hYmxlU2hhZGluZ1NjYWxlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9hZGRGeGFhUGFzcyhwcGwsIHBwbENvbmZpZ3MsXHJcbiAgICAgICAgICAgICAgICAgICAgY2FtZXJhQ29uZmlncy5zZXR0aW5ncy5meGFhLm1hdGVyaWFsLFxyXG4gICAgICAgICAgICAgICAgICAgIGNhbWVyYUNvbmZpZ3Mud2lkdGgsXHJcbiAgICAgICAgICAgICAgICAgICAgY2FtZXJhQ29uZmlncy5oZWlnaHQsXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5jb2xvck5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgbGRyQ29sb3JOYW1lKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBhZGRDb3B5VG9TY3JlZW5QYXNzKHBwbCwgcHBsQ29uZmlncywgY2FtZXJhQ29uZmlncywgbGRyQ29sb3JOYW1lKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGFzc2VydChjYW1lcmFDb25maWdzLndpZHRoID09PSBjYW1lcmFDb25maWdzLm5hdGl2ZVdpZHRoKTtcclxuICAgICAgICAgICAgICAgIGFzc2VydChjYW1lcmFDb25maWdzLmhlaWdodCA9PT0gY2FtZXJhQ29uZmlncy5uYXRpdmVIZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2FkZEZ4YWFQYXNzKHBwbCwgcHBsQ29uZmlncyxcclxuICAgICAgICAgICAgICAgICAgICBjYW1lcmFDb25maWdzLnNldHRpbmdzLmZ4YWEubWF0ZXJpYWwsXHJcbiAgICAgICAgICAgICAgICAgICAgY2FtZXJhQ29uZmlncy53aWR0aCxcclxuICAgICAgICAgICAgICAgICAgICBjYW1lcmFDb25maWdzLmhlaWdodCxcclxuICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmNvbG9yTmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBjYW1lcmFDb25maWdzLmNvbG9yTmFtZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBpbnB1dENvbG9yTmFtZSA9IGNvbnRleHQuY29sb3JOYW1lO1xyXG4gICAgICAgICAgICBjb250ZXh0LmNvbG9yTmFtZSA9IGxkckNvbG9yTmFtZTtcclxuICAgICAgICAgICAgY29uc3QgbGFzdFBhc3MgPSB0aGlzLl9hZGRGeGFhUGFzcyhwcGwsIHBwbENvbmZpZ3MsXHJcbiAgICAgICAgICAgICAgICBjYW1lcmFDb25maWdzLnNldHRpbmdzLmZ4YWEubWF0ZXJpYWwsXHJcbiAgICAgICAgICAgICAgICBjYW1lcmFDb25maWdzLndpZHRoLFxyXG4gICAgICAgICAgICAgICAgY2FtZXJhQ29uZmlncy5oZWlnaHQsXHJcbiAgICAgICAgICAgICAgICBpbnB1dENvbG9yTmFtZSxcclxuICAgICAgICAgICAgICAgIGxkckNvbG9yTmFtZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBsYXN0UGFzcztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIF9hZGRGeGFhUGFzcyhcclxuICAgICAgICBwcGw6IHJlbmRlcmluZy5CYXNpY1BpcGVsaW5lLFxyXG4gICAgICAgIHBwbENvbmZpZ3M6IFJlYWRvbmx5PFBpcGVsaW5lQ29uZmlncz4sXHJcbiAgICAgICAgZnhhYU1hdGVyaWFsOiBNYXRlcmlhbCxcclxuICAgICAgICB3aWR0aDogbnVtYmVyLFxyXG4gICAgICAgIGhlaWdodDogbnVtYmVyLFxyXG4gICAgICAgIGxkckNvbG9yTmFtZTogc3RyaW5nLFxyXG4gICAgICAgIGNvbG9yTmFtZTogc3RyaW5nLFxyXG4gICAgKTogcmVuZGVyaW5nLkJhc2ljUmVuZGVyUGFzc0J1aWxkZXIge1xyXG4gICAgICAgIHRoaXMuX2Z4YWFQYXJhbXMueCA9IHdpZHRoO1xyXG4gICAgICAgIHRoaXMuX2Z4YWFQYXJhbXMueSA9IGhlaWdodDtcclxuICAgICAgICB0aGlzLl9meGFhUGFyYW1zLnogPSAxIC8gd2lkdGg7XHJcbiAgICAgICAgdGhpcy5fZnhhYVBhcmFtcy53ID0gMSAvIGhlaWdodDtcclxuXHJcbiAgICAgICAgY29uc3QgcGFzcyA9IHBwbC5hZGRSZW5kZXJQYXNzKHdpZHRoLCBoZWlnaHQsICdjYy1meGFhJyk7XHJcbiAgICAgICAgcGFzcy5hZGRSZW5kZXJUYXJnZXQoY29sb3JOYW1lLCBMb2FkT3AuQ0xFQVIsIFN0b3JlT3AuU1RPUkUsIHNDbGVhckNvbG9yVHJhbnNwYXJlbnRCbGFjayk7XHJcbiAgICAgICAgcGFzcy5hZGRUZXh0dXJlKGxkckNvbG9yTmFtZSwgJ3NjZW5lQ29sb3JNYXAnKTtcclxuICAgICAgICBwYXNzLnNldFZlYzQoJ2dfcGxhdGZvcm0nLCBwcGxDb25maWdzLnBsYXRmb3JtKTtcclxuICAgICAgICBwYXNzLnNldFZlYzQoJ3RleFNpemUnLCB0aGlzLl9meGFhUGFyYW1zKTtcclxuICAgICAgICBwYXNzLmFkZFF1ZXVlKHJlbmRlcmluZy5RdWV1ZUhpbnQuT1BBUVVFKVxyXG4gICAgICAgICAgICAuYWRkRnVsbHNjcmVlblF1YWQoZnhhYU1hdGVyaWFsLCAwKTtcclxuICAgICAgICByZXR1cm4gcGFzcztcclxuICAgIH1cclxuICAgIC8vIEZYQUFcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2Z4YWFQYXJhbXMgPSBuZXcgVmVjNCgwLCAwLCAwLCAwKTtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBGU1JQYXNzQ29uZmlncyB7XHJcbiAgICBlbmFibGVGU1I6IGJvb2xlYW47XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBCdWlsdGluRnNyUGFzc0J1aWxkZXIgaW1wbGVtZW50cyByZW5kZXJpbmcuUGlwZWxpbmVQYXNzQnVpbGRlciB7XHJcbiAgICBnZXRDb25maWdPcmRlcigpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiAwO1xyXG4gICAgfVxyXG4gICAgZ2V0UmVuZGVyT3JkZXIoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gNTAwO1xyXG4gICAgfVxyXG4gICAgY29uZmlnQ2FtZXJhKFxyXG4gICAgICAgIGNhbWVyYTogUmVhZG9ubHk8cmVuZGVyZXIuc2NlbmUuQ2FtZXJhPixcclxuICAgICAgICBwcGxDb25maWdzOiBSZWFkb25seTxQaXBlbGluZUNvbmZpZ3M+LFxyXG4gICAgICAgIGNhbWVyYUNvbmZpZ3M6IENhbWVyYUNvbmZpZ3MgJiBGU1JQYXNzQ29uZmlncyk6IHZvaWQge1xyXG4gICAgICAgIC8vIEZTUiAoRGVwZW5kIG9uIFNoYWRpbmcgc2NhbGUpXHJcbiAgICAgICAgY2FtZXJhQ29uZmlncy5lbmFibGVGU1IgPSBjYW1lcmFDb25maWdzLnNldHRpbmdzLmZzci5lbmFibGVkXHJcbiAgICAgICAgICAgICYmICEhY2FtZXJhQ29uZmlncy5zZXR0aW5ncy5mc3IubWF0ZXJpYWxcclxuICAgICAgICAgICAgJiYgY2FtZXJhQ29uZmlncy5lbmFibGVTaGFkaW5nU2NhbGVcclxuICAgICAgICAgICAgJiYgY2FtZXJhQ29uZmlncy5zaGFkaW5nU2NhbGUgPCAxLjA7XHJcblxyXG4gICAgICAgIGlmIChjYW1lcmFDb25maWdzLmVuYWJsZUZTUikge1xyXG4gICAgICAgICAgICArK2NhbWVyYUNvbmZpZ3MucmVtYWluaW5nUGFzc2VzO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHNldHVwKFxyXG4gICAgICAgIHBwbDogcmVuZGVyaW5nLkJhc2ljUGlwZWxpbmUsXHJcbiAgICAgICAgcHBsQ29uZmlnczogUmVhZG9ubHk8UGlwZWxpbmVDb25maWdzPixcclxuICAgICAgICBjYW1lcmFDb25maWdzOiBDYW1lcmFDb25maWdzICYgRlNSUGFzc0NvbmZpZ3MsXHJcbiAgICAgICAgY2FtZXJhOiByZW5kZXJlci5zY2VuZS5DYW1lcmEsXHJcbiAgICAgICAgY29udGV4dDogUGlwZWxpbmVDb250ZXh0LFxyXG4gICAgICAgIHByZXZSZW5kZXJQYXNzPzogcmVuZGVyaW5nLkJhc2ljUmVuZGVyUGFzc0J1aWxkZXIpXHJcbiAgICAgICAgOiByZW5kZXJpbmcuQmFzaWNSZW5kZXJQYXNzQnVpbGRlciB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgaWYgKCFjYW1lcmFDb25maWdzLmVuYWJsZUZTUikge1xyXG4gICAgICAgICAgICByZXR1cm4gcHJldlJlbmRlclBhc3M7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC0tY2FtZXJhQ29uZmlncy5yZW1haW5pbmdQYXNzZXM7XHJcblxyXG4gICAgICAgIGNvbnN0IGlucHV0Q29sb3JOYW1lID0gY29udGV4dC5jb2xvck5hbWU7XHJcbiAgICAgICAgY29uc3Qgb3V0cHV0Q29sb3JOYW1lXHJcbiAgICAgICAgICAgID0gY2FtZXJhQ29uZmlncy5yZW1haW5pbmdQYXNzZXMgPT09IDBcclxuICAgICAgICAgICAgICAgID8gY2FtZXJhQ29uZmlncy5jb2xvck5hbWVcclxuICAgICAgICAgICAgICAgIDogZ2V0UGluZ1BvbmdSZW5kZXJUYXJnZXQoY29udGV4dC5jb2xvck5hbWUsICdVaUNvbG9yJywgY2FtZXJhQ29uZmlncy5yZW5kZXJXaW5kb3dJZCk7XHJcbiAgICAgICAgY29udGV4dC5jb2xvck5hbWUgPSBvdXRwdXRDb2xvck5hbWU7XHJcblxyXG4gICAgICAgIGFzc2VydCghIWNhbWVyYUNvbmZpZ3Muc2V0dGluZ3MuZnNyLm1hdGVyaWFsKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fYWRkRnNyUGFzcyhwcGwsIHBwbENvbmZpZ3MsIGNhbWVyYUNvbmZpZ3MsXHJcbiAgICAgICAgICAgIGNhbWVyYUNvbmZpZ3Muc2V0dGluZ3MsXHJcbiAgICAgICAgICAgIGNhbWVyYUNvbmZpZ3Muc2V0dGluZ3MuZnNyLm1hdGVyaWFsLFxyXG4gICAgICAgICAgICBjYW1lcmFDb25maWdzLnJlbmRlcldpbmRvd0lkLFxyXG4gICAgICAgICAgICBjYW1lcmFDb25maWdzLndpZHRoLFxyXG4gICAgICAgICAgICBjYW1lcmFDb25maWdzLmhlaWdodCxcclxuICAgICAgICAgICAgaW5wdXRDb2xvck5hbWUsXHJcbiAgICAgICAgICAgIGNhbWVyYUNvbmZpZ3MubmF0aXZlV2lkdGgsXHJcbiAgICAgICAgICAgIGNhbWVyYUNvbmZpZ3MubmF0aXZlSGVpZ2h0LFxyXG4gICAgICAgICAgICBvdXRwdXRDb2xvck5hbWUpO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBfYWRkRnNyUGFzcyhcclxuICAgICAgICBwcGw6IHJlbmRlcmluZy5CYXNpY1BpcGVsaW5lLFxyXG4gICAgICAgIHBwbENvbmZpZ3M6IFJlYWRvbmx5PFBpcGVsaW5lQ29uZmlncz4sXHJcbiAgICAgICAgY2FtZXJhQ29uZmlnczogQ2FtZXJhQ29uZmlncyAmIEZTUlBhc3NDb25maWdzLFxyXG4gICAgICAgIHNldHRpbmdzOiBQaXBlbGluZVNldHRpbmdzLFxyXG4gICAgICAgIGZzck1hdGVyaWFsOiBNYXRlcmlhbCxcclxuICAgICAgICBpZDogbnVtYmVyLFxyXG4gICAgICAgIHdpZHRoOiBudW1iZXIsXHJcbiAgICAgICAgaGVpZ2h0OiBudW1iZXIsXHJcbiAgICAgICAgaW5wdXRDb2xvck5hbWU6IHN0cmluZyxcclxuICAgICAgICBuYXRpdmVXaWR0aDogbnVtYmVyLFxyXG4gICAgICAgIG5hdGl2ZUhlaWdodDogbnVtYmVyLFxyXG4gICAgICAgIG91dHB1dENvbG9yTmFtZTogc3RyaW5nLFxyXG4gICAgKTogcmVuZGVyaW5nLkJhc2ljUmVuZGVyUGFzc0J1aWxkZXIge1xyXG4gICAgICAgIHRoaXMuX2ZzclRleFNpemUueCA9IHdpZHRoO1xyXG4gICAgICAgIHRoaXMuX2ZzclRleFNpemUueSA9IGhlaWdodDtcclxuICAgICAgICB0aGlzLl9mc3JUZXhTaXplLnogPSBuYXRpdmVXaWR0aDtcclxuICAgICAgICB0aGlzLl9mc3JUZXhTaXplLncgPSBuYXRpdmVIZWlnaHQ7XHJcbiAgICAgICAgdGhpcy5fZnNyUGFyYW1zLnggPSBjbGFtcCgxLjAgLSBzZXR0aW5ncy5mc3Iuc2hhcnBuZXNzLCAwLjAyLCAwLjk4KTtcclxuXHJcbiAgICAgICAgY29uc3QgdWlDb2xvclByZWZpeCA9ICdVaUNvbG9yJztcclxuXHJcbiAgICAgICAgY29uc3QgZnNyQ29sb3JOYW1lID0gZ2V0UGluZ1BvbmdSZW5kZXJUYXJnZXQob3V0cHV0Q29sb3JOYW1lLCB1aUNvbG9yUHJlZml4LCBpZCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGVhc3VQYXNzID0gcHBsLmFkZFJlbmRlclBhc3MobmF0aXZlV2lkdGgsIG5hdGl2ZUhlaWdodCwgJ2NjLWZzci1lYXN1Jyk7XHJcbiAgICAgICAgZWFzdVBhc3MuYWRkUmVuZGVyVGFyZ2V0KGZzckNvbG9yTmFtZSwgTG9hZE9wLkNMRUFSLCBTdG9yZU9wLlNUT1JFLCBzQ2xlYXJDb2xvclRyYW5zcGFyZW50QmxhY2spO1xyXG4gICAgICAgIGVhc3VQYXNzLmFkZFRleHR1cmUoaW5wdXRDb2xvck5hbWUsICdvdXRwdXRSZXN1bHRNYXAnKTtcclxuICAgICAgICBlYXN1UGFzcy5zZXRWZWM0KCdnX3BsYXRmb3JtJywgcHBsQ29uZmlncy5wbGF0Zm9ybSk7XHJcbiAgICAgICAgZWFzdVBhc3Muc2V0VmVjNCgnZnNyVGV4U2l6ZScsIHRoaXMuX2ZzclRleFNpemUpO1xyXG4gICAgICAgIGVhc3VQYXNzXHJcbiAgICAgICAgICAgIC5hZGRRdWV1ZShyZW5kZXJpbmcuUXVldWVIaW50Lk9QQVFVRSlcclxuICAgICAgICAgICAgLmFkZEZ1bGxzY3JlZW5RdWFkKGZzck1hdGVyaWFsLCAwKTtcclxuXHJcbiAgICAgICAgY29uc3QgcmNhc1Bhc3MgPSBwcGwuYWRkUmVuZGVyUGFzcyhuYXRpdmVXaWR0aCwgbmF0aXZlSGVpZ2h0LCAnY2MtZnNyLXJjYXMnKTtcclxuICAgICAgICByY2FzUGFzcy5hZGRSZW5kZXJUYXJnZXQob3V0cHV0Q29sb3JOYW1lLCBMb2FkT3AuQ0xFQVIsIFN0b3JlT3AuU1RPUkUsIHNDbGVhckNvbG9yVHJhbnNwYXJlbnRCbGFjayk7XHJcbiAgICAgICAgcmNhc1Bhc3MuYWRkVGV4dHVyZShmc3JDb2xvck5hbWUsICdvdXRwdXRSZXN1bHRNYXAnKTtcclxuICAgICAgICByY2FzUGFzcy5zZXRWZWM0KCdnX3BsYXRmb3JtJywgcHBsQ29uZmlncy5wbGF0Zm9ybSk7XHJcbiAgICAgICAgcmNhc1Bhc3Muc2V0VmVjNCgnZnNyVGV4U2l6ZScsIHRoaXMuX2ZzclRleFNpemUpO1xyXG4gICAgICAgIHJjYXNQYXNzLnNldFZlYzQoJ2ZzclBhcmFtcycsIHRoaXMuX2ZzclBhcmFtcyk7XHJcbiAgICAgICAgcmNhc1Bhc3NcclxuICAgICAgICAgICAgLmFkZFF1ZXVlKHJlbmRlcmluZy5RdWV1ZUhpbnQuT1BBUVVFKVxyXG4gICAgICAgICAgICAuYWRkRnVsbHNjcmVlblF1YWQoZnNyTWF0ZXJpYWwsIDEpO1xyXG5cclxuICAgICAgICByZXR1cm4gcmNhc1Bhc3M7XHJcbiAgICB9XHJcbiAgICAvLyBGU1JcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2ZzclBhcmFtcyA9IG5ldyBWZWM0KDAsIDAsIDAsIDApO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfZnNyVGV4U2l6ZSA9IG5ldyBWZWM0KDAsIDAsIDAsIDApO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQnVpbHRpblVpUGFzc0J1aWxkZXIgaW1wbGVtZW50cyByZW5kZXJpbmcuUGlwZWxpbmVQYXNzQnVpbGRlciB7XHJcbiAgICBnZXRDb25maWdPcmRlcigpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiAwO1xyXG4gICAgfVxyXG4gICAgZ2V0UmVuZGVyT3JkZXIoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gMTAwMDtcclxuICAgIH1cclxuICAgIHNldHVwKFxyXG4gICAgICAgIHBwbDogcmVuZGVyaW5nLkJhc2ljUGlwZWxpbmUsXHJcbiAgICAgICAgcHBsQ29uZmlnczogUmVhZG9ubHk8UGlwZWxpbmVDb25maWdzPixcclxuICAgICAgICBjYW1lcmFDb25maWdzOiBDYW1lcmFDb25maWdzICYgRlNSUGFzc0NvbmZpZ3MsXHJcbiAgICAgICAgY2FtZXJhOiByZW5kZXJlci5zY2VuZS5DYW1lcmEsXHJcbiAgICAgICAgY29udGV4dDogUGlwZWxpbmVDb250ZXh0LFxyXG4gICAgICAgIHByZXZSZW5kZXJQYXNzPzogcmVuZGVyaW5nLkJhc2ljUmVuZGVyUGFzc0J1aWxkZXIpXHJcbiAgICAgICAgOiByZW5kZXJpbmcuQmFzaWNSZW5kZXJQYXNzQnVpbGRlciB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgYXNzZXJ0KCEhcHJldlJlbmRlclBhc3MpO1xyXG5cclxuICAgICAgICBsZXQgZmxhZ3MgPSByZW5kZXJpbmcuU2NlbmVGbGFncy5VSTtcclxuICAgICAgICBpZiAoY2FtZXJhQ29uZmlncy5lbmFibGVQcm9maWxlcikge1xyXG4gICAgICAgICAgICBmbGFncyB8PSByZW5kZXJpbmcuU2NlbmVGbGFncy5QUk9GSUxFUjtcclxuICAgICAgICAgICAgcHJldlJlbmRlclBhc3Muc2hvd1N0YXRpc3RpY3MgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwcmV2UmVuZGVyUGFzc1xyXG4gICAgICAgICAgICAuYWRkUXVldWUocmVuZGVyaW5nLlF1ZXVlSGludC5CTEVORCwgJ2RlZmF1bHQnLCAnZGVmYXVsdCcpXHJcbiAgICAgICAgICAgIC5hZGRTY2VuZShjYW1lcmEsIGZsYWdzKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHByZXZSZW5kZXJQYXNzO1xyXG4gICAgfVxyXG59XHJcblxyXG5pZiAocmVuZGVyaW5nKSB7XHJcblxyXG4gICAgY29uc3QgeyBRdWV1ZUhpbnQsIFNjZW5lRmxhZ3MgfSA9IHJlbmRlcmluZztcclxuXHJcbiAgICBjbGFzcyBCdWlsdGluUGlwZWxpbmVCdWlsZGVyIGltcGxlbWVudHMgcmVuZGVyaW5nLlBpcGVsaW5lQnVpbGRlciB7XHJcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBfcGlwZWxpbmVFdmVudDogUGlwZWxpbmVFdmVudFByb2Nlc3NvciA9IGNjbGVnYWN5LmRpcmVjdG9yLnJvb3QucGlwZWxpbmVFdmVudCBhcyBQaXBlbGluZUV2ZW50UHJvY2Vzc29yO1xyXG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgX2ZvcndhcmRQYXNzID0gbmV3IEJ1aWx0aW5Gb3J3YXJkUGFzc0J1aWxkZXIoKTtcclxuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IF9ibG9vbVBhc3MgPSBuZXcgQnVpbHRpbkJsb29tUGFzc0J1aWxkZXIoKTtcclxuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IF90b25lTWFwcGluZ1Bhc3MgPSBuZXcgQnVpbHRpblRvbmVNYXBwaW5nUGFzc0J1aWxkZXIoKTtcclxuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IF9meGFhUGFzcyA9IG5ldyBCdWlsdGluRlhBQVBhc3NCdWlsZGVyKCk7XHJcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBfZnNyUGFzcyA9IG5ldyBCdWlsdGluRnNyUGFzc0J1aWxkZXIoKTtcclxuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IF91aVBhc3MgPSBuZXcgQnVpbHRpblVpUGFzc0J1aWxkZXIoKTtcclxuICAgICAgICAvLyBJbnRlcm5hbCBjYWNoZWQgcmVzb3VyY2VzXHJcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBfY2xlYXJDb2xvciA9IG5ldyBDb2xvcigwLCAwLCAwLCAxKTtcclxuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IF92aWV3cG9ydCA9IG5ldyBWaWV3cG9ydCgpO1xyXG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgX2NvbmZpZ3MgPSBuZXcgUGlwZWxpbmVDb25maWdzKCk7XHJcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBfY2FtZXJhQ29uZmlncyA9IG5ldyBDYW1lcmFDb25maWdzKCk7XHJcbiAgICAgICAgLy8gTWF0ZXJpYWxzXHJcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBfY29weUFuZFRvbmVtYXBNYXRlcmlhbCA9IG5ldyBNYXRlcmlhbCgpO1xyXG5cclxuICAgICAgICAvLyBJbnRlcm5hbCBTdGF0ZXNcclxuICAgICAgICBwcml2YXRlIF9pbml0aWFsaXplZCA9IGZhbHNlOyAvLyBUT0RPKHpob3V6aGVuZ2xvbmcpOiBNYWtlIGRlZmF1bHQgZWZmZWN0IGFzc2V0IGxvYWRpbmcgZWFybGllciBhbmQgcmVtb3ZlIHRoaXMgZmxhZ1xyXG4gICAgICAgIHByaXZhdGUgX3Bhc3NCdWlsZGVyczogcmVuZGVyaW5nLlBpcGVsaW5lUGFzc0J1aWxkZXJbXSA9IFtdO1xyXG5cclxuICAgICAgICBwcml2YXRlIF9zZXR1cFBpcGVsaW5lUHJldmlldyhcclxuICAgICAgICAgICAgY2FtZXJhOiByZW5kZXJlci5zY2VuZS5DYW1lcmEsXHJcbiAgICAgICAgICAgIGNhbWVyYUNvbmZpZ3M6IENhbWVyYUNvbmZpZ3MpIHtcclxuICAgICAgICAgICAgY29uc3QgaXNFZGl0b3JWaWV3OiBib29sZWFuXHJcbiAgICAgICAgICAgICAgICA9IGNhbWVyYS5jYW1lcmFVc2FnZSA9PT0gQ2FtZXJhVXNhZ2UuU0NFTkVfVklFV1xyXG4gICAgICAgICAgICAgICAgfHwgY2FtZXJhLmNhbWVyYVVzYWdlID09PSBDYW1lcmFVc2FnZS5QUkVWSUVXO1xyXG5cclxuICAgICAgICAgICAgaWYgKGlzRWRpdG9yVmlldykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZWRpdG9yU2V0dGluZ3MgPSByZW5kZXJpbmcuZ2V0RWRpdG9yUGlwZWxpbmVTZXR0aW5ncygpIGFzIFBpcGVsaW5lU2V0dGluZ3MgfCBudWxsO1xyXG4gICAgICAgICAgICAgICAgaWYgKGVkaXRvclNldHRpbmdzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FtZXJhQ29uZmlncy5zZXR0aW5ncyA9IGVkaXRvclNldHRpbmdzO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjYW1lcmFDb25maWdzLnNldHRpbmdzID0gZGVmYXVsdFNldHRpbmdzO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNhbWVyYS5waXBlbGluZVNldHRpbmdzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FtZXJhQ29uZmlncy5zZXR0aW5ncyA9IGNhbWVyYS5waXBlbGluZVNldHRpbmdzIGFzIFBpcGVsaW5lU2V0dGluZ3M7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbWVyYUNvbmZpZ3Muc2V0dGluZ3MgPSBkZWZhdWx0U2V0dGluZ3M7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgX3ByZXBhcmVQaXBlbGluZVBhc3NlcyhjYW1lcmFDb25maWdzOiBDYW1lcmFDb25maWdzKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBhc3NCdWlsZGVycyA9IHRoaXMuX3Bhc3NCdWlsZGVycztcclxuICAgICAgICAgICAgcGFzc0J1aWxkZXJzLmxlbmd0aCA9IDA7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBzZXR0aW5ncyA9IGNhbWVyYUNvbmZpZ3Muc2V0dGluZ3MgYXMgUGlwZWxpbmVTZXR0aW5nczI7XHJcbiAgICAgICAgICAgIGlmIChzZXR0aW5ncy5fcGFzc2VzKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHBhc3Mgb2Ygc2V0dGluZ3MuX3Bhc3Nlcykge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhc3NCdWlsZGVycy5wdXNoKHBhc3MpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYXNzZXJ0KHBhc3NCdWlsZGVycy5sZW5ndGggPT09IHNldHRpbmdzLl9wYXNzZXMubGVuZ3RoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcGFzc0J1aWxkZXJzLnB1c2godGhpcy5fZm9yd2FyZFBhc3MpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHNldHRpbmdzLmJsb29tLmVuYWJsZWQpIHtcclxuICAgICAgICAgICAgICAgIHBhc3NCdWlsZGVycy5wdXNoKHRoaXMuX2Jsb29tUGFzcyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHBhc3NCdWlsZGVycy5wdXNoKHRoaXMuX3RvbmVNYXBwaW5nUGFzcyk7XHJcblxyXG4gICAgICAgICAgICBpZiAoc2V0dGluZ3MuZnhhYS5lbmFibGVkKSB7XHJcbiAgICAgICAgICAgICAgICBwYXNzQnVpbGRlcnMucHVzaCh0aGlzLl9meGFhUGFzcyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChzZXR0aW5ncy5mc3IuZW5hYmxlZCkge1xyXG4gICAgICAgICAgICAgICAgcGFzc0J1aWxkZXJzLnB1c2godGhpcy5fZnNyUGFzcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcGFzc0J1aWxkZXJzLnB1c2godGhpcy5fdWlQYXNzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgX3NldHVwQnVpbHRpbkNhbWVyYUNvbmZpZ3MoXHJcbiAgICAgICAgICAgIGNhbWVyYTogcmVuZGVyZXIuc2NlbmUuQ2FtZXJhLFxyXG4gICAgICAgICAgICBwaXBlbGluZUNvbmZpZ3M6IFBpcGVsaW5lQ29uZmlncyxcclxuICAgICAgICAgICAgY2FtZXJhQ29uZmlnczogQ2FtZXJhQ29uZmlnc1xyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICBjb25zdCB3aW5kb3cgPSBjYW1lcmEud2luZG93O1xyXG4gICAgICAgICAgICBjb25zdCBpc01haW5HYW1lV2luZG93OiBib29sZWFuID0gY2FtZXJhLmNhbWVyYVVzYWdlID09PSBDYW1lcmFVc2FnZS5HQU1FICYmICEhd2luZG93LnN3YXBjaGFpbjtcclxuXHJcbiAgICAgICAgICAgIC8vIFdpbmRvd1xyXG4gICAgICAgICAgICBjYW1lcmFDb25maWdzLmlzTWFpbkdhbWVXaW5kb3cgPSBpc01haW5HYW1lV2luZG93O1xyXG4gICAgICAgICAgICBjYW1lcmFDb25maWdzLnJlbmRlcldpbmRvd0lkID0gd2luZG93LnJlbmRlcldpbmRvd0lkO1xyXG5cclxuICAgICAgICAgICAgLy8gQ2FtZXJhXHJcbiAgICAgICAgICAgIGNhbWVyYUNvbmZpZ3MuY29sb3JOYW1lID0gd2luZG93LmNvbG9yTmFtZTtcclxuICAgICAgICAgICAgY2FtZXJhQ29uZmlncy5kZXB0aFN0ZW5jaWxOYW1lID0gd2luZG93LmRlcHRoU3RlbmNpbE5hbWU7XHJcblxyXG4gICAgICAgICAgICAvLyBQaXBlbGluZVxyXG4gICAgICAgICAgICBjYW1lcmFDb25maWdzLmVuYWJsZUZ1bGxQaXBlbGluZSA9IChjYW1lcmEudmlzaWJpbGl0eSAmIChMYXllcnMuRW51bS5ERUZBVUxUKSkgIT09IDA7XHJcbiAgICAgICAgICAgIGNhbWVyYUNvbmZpZ3MuZW5hYmxlUHJvZmlsZXIgPSBERUJVRyAmJiBpc01haW5HYW1lV2luZG93O1xyXG4gICAgICAgICAgICBjYW1lcmFDb25maWdzLnJlbWFpbmluZ1Bhc3NlcyA9IDA7XHJcblxyXG4gICAgICAgICAgICAvLyBTaGFkaW5nIHNjYWxlXHJcbiAgICAgICAgICAgIGNhbWVyYUNvbmZpZ3Muc2hhZGluZ1NjYWxlID0gY2FtZXJhQ29uZmlncy5zZXR0aW5ncy5zaGFkaW5nU2NhbGU7XHJcbiAgICAgICAgICAgIGNhbWVyYUNvbmZpZ3MuZW5hYmxlU2hhZGluZ1NjYWxlID0gY2FtZXJhQ29uZmlncy5zZXR0aW5ncy5lbmFibGVTaGFkaW5nU2NhbGVcclxuICAgICAgICAgICAgICAgICYmIGNhbWVyYUNvbmZpZ3Muc2hhZGluZ1NjYWxlICE9PSAxLjA7XHJcblxyXG4gICAgICAgICAgICBjYW1lcmFDb25maWdzLm5hdGl2ZVdpZHRoID0gTWF0aC5tYXgoTWF0aC5mbG9vcih3aW5kb3cud2lkdGgpLCAxKTtcclxuICAgICAgICAgICAgY2FtZXJhQ29uZmlncy5uYXRpdmVIZWlnaHQgPSBNYXRoLm1heChNYXRoLmZsb29yKHdpbmRvdy5oZWlnaHQpLCAxKTtcclxuXHJcbiAgICAgICAgICAgIGNhbWVyYUNvbmZpZ3Mud2lkdGggPSBjYW1lcmFDb25maWdzLmVuYWJsZVNoYWRpbmdTY2FsZVxyXG4gICAgICAgICAgICAgICAgPyBNYXRoLm1heChNYXRoLmZsb29yKGNhbWVyYUNvbmZpZ3MubmF0aXZlV2lkdGggKiBjYW1lcmFDb25maWdzLnNoYWRpbmdTY2FsZSksIDEpXHJcbiAgICAgICAgICAgICAgICA6IGNhbWVyYUNvbmZpZ3MubmF0aXZlV2lkdGg7XHJcbiAgICAgICAgICAgIGNhbWVyYUNvbmZpZ3MuaGVpZ2h0ID0gY2FtZXJhQ29uZmlncy5lbmFibGVTaGFkaW5nU2NhbGVcclxuICAgICAgICAgICAgICAgID8gTWF0aC5tYXgoTWF0aC5mbG9vcihjYW1lcmFDb25maWdzLm5hdGl2ZUhlaWdodCAqIGNhbWVyYUNvbmZpZ3Muc2hhZGluZ1NjYWxlKSwgMSlcclxuICAgICAgICAgICAgICAgIDogY2FtZXJhQ29uZmlncy5uYXRpdmVIZWlnaHQ7XHJcblxyXG4gICAgICAgICAgICAvLyBSYWRpYW5jZVxyXG4gICAgICAgICAgICBjYW1lcmFDb25maWdzLmVuYWJsZUhEUiA9IGNhbWVyYUNvbmZpZ3MuZW5hYmxlRnVsbFBpcGVsaW5lXHJcbiAgICAgICAgICAgICAgICAmJiBwaXBlbGluZUNvbmZpZ3MudXNlRmxvYXRPdXRwdXQ7XHJcbiAgICAgICAgICAgIGNhbWVyYUNvbmZpZ3MucmFkaWFuY2VGb3JtYXQgPSBjYW1lcmFDb25maWdzLmVuYWJsZUhEUlxyXG4gICAgICAgICAgICAgICAgPyBnZnguRm9ybWF0LlJHQkExNkYgOiBnZnguRm9ybWF0LlJHQkE4O1xyXG5cclxuICAgICAgICAgICAgLy8gVG9uZSBNYXBwaW5nXHJcbiAgICAgICAgICAgIGNhbWVyYUNvbmZpZ3MuY29weUFuZFRvbmVtYXBNYXRlcmlhbCA9IHRoaXMuX2NvcHlBbmRUb25lbWFwTWF0ZXJpYWw7XHJcblxyXG4gICAgICAgICAgICAvLyBEZXB0aFxyXG4gICAgICAgICAgICBjYW1lcmFDb25maWdzLmVuYWJsZVN0b3JlU2NlbmVEZXB0aCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBfc2V0dXBDYW1lcmFDb25maWdzKFxyXG4gICAgICAgICAgICBjYW1lcmE6IHJlbmRlcmVyLnNjZW5lLkNhbWVyYSxcclxuICAgICAgICAgICAgcGlwZWxpbmVDb25maWdzOiBQaXBlbGluZUNvbmZpZ3MsXHJcbiAgICAgICAgICAgIGNhbWVyYUNvbmZpZ3M6IENhbWVyYUNvbmZpZ3NcclxuICAgICAgICApOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5fc2V0dXBQaXBlbGluZVByZXZpZXcoY2FtZXJhLCBjYW1lcmFDb25maWdzKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX3ByZXBhcmVQaXBlbGluZVBhc3NlcyhjYW1lcmFDb25maWdzKTtcclxuXHJcbiAgICAgICAgICAgIHNvcnRQaXBlbGluZVBhc3NCdWlsZGVyc0J5Q29uZmlnT3JkZXIodGhpcy5fcGFzc0J1aWxkZXJzKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX3NldHVwQnVpbHRpbkNhbWVyYUNvbmZpZ3MoY2FtZXJhLCBwaXBlbGluZUNvbmZpZ3MsIGNhbWVyYUNvbmZpZ3MpO1xyXG5cclxuICAgICAgICAgICAgZm9yIChjb25zdCBidWlsZGVyIG9mIHRoaXMuX3Bhc3NCdWlsZGVycykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGJ1aWxkZXIuY29uZmlnQ2FtZXJhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnVpbGRlci5jb25maWdDYW1lcmEoY2FtZXJhLCBwaXBlbGluZUNvbmZpZ3MsIGNhbWVyYUNvbmZpZ3MpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAgICAgLy8gSW50ZXJmYWNlXHJcbiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgICAgIHdpbmRvd1Jlc2l6ZShcclxuICAgICAgICAgICAgcHBsOiByZW5kZXJpbmcuQmFzaWNQaXBlbGluZSxcclxuICAgICAgICAgICAgd2luZG93OiByZW5kZXJlci5SZW5kZXJXaW5kb3csXHJcbiAgICAgICAgICAgIGNhbWVyYTogcmVuZGVyZXIuc2NlbmUuQ2FtZXJhLFxyXG4gICAgICAgICAgICBuYXRpdmVXaWR0aDogbnVtYmVyLFxyXG4gICAgICAgICAgICBuYXRpdmVIZWlnaHQ6IG51bWJlcixcclxuICAgICAgICApOiB2b2lkIHtcclxuICAgICAgICAgICAgc2V0dXBQaXBlbGluZUNvbmZpZ3MocHBsLCB0aGlzLl9jb25maWdzKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX3NldHVwQ2FtZXJhQ29uZmlncyhjYW1lcmEsIHRoaXMuX2NvbmZpZ3MsIHRoaXMuX2NhbWVyYUNvbmZpZ3MpO1xyXG5cclxuICAgICAgICAgICAgLy8gUmVuZGVyIFdpbmRvdyAoVUkpXHJcbiAgICAgICAgICAgIGNvbnN0IGlkID0gd2luZG93LnJlbmRlcldpbmRvd0lkO1xyXG5cclxuICAgICAgICAgICAgcHBsLmFkZFJlbmRlcldpbmRvdyh0aGlzLl9jYW1lcmFDb25maWdzLmNvbG9yTmFtZSxcclxuICAgICAgICAgICAgICAgIEZvcm1hdC5SR0JBOCwgbmF0aXZlV2lkdGgsIG5hdGl2ZUhlaWdodCwgd2luZG93LFxyXG4gICAgICAgICAgICAgICAgdGhpcy5fY2FtZXJhQ29uZmlncy5kZXB0aFN0ZW5jaWxOYW1lKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHdpZHRoID0gdGhpcy5fY2FtZXJhQ29uZmlncy53aWR0aDtcclxuICAgICAgICAgICAgY29uc3QgaGVpZ2h0ID0gdGhpcy5fY2FtZXJhQ29uZmlncy5oZWlnaHQ7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5fY2FtZXJhQ29uZmlncy5lbmFibGVTaGFkaW5nU2NhbGUpIHtcclxuICAgICAgICAgICAgICAgIHBwbC5hZGREZXB0aFN0ZW5jaWwoYFNjYWxlZFNjZW5lRGVwdGhfJHtpZH1gLCBGb3JtYXQuREVQVEhfU1RFTkNJTCwgd2lkdGgsIGhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICBwcGwuYWRkUmVuZGVyVGFyZ2V0KGBTY2FsZWRSYWRpYW5jZTBfJHtpZH1gLCB0aGlzLl9jYW1lcmFDb25maWdzLnJhZGlhbmNlRm9ybWF0LCB3aWR0aCwgaGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgIHBwbC5hZGRSZW5kZXJUYXJnZXQoYFNjYWxlZFJhZGlhbmNlMV8ke2lkfWAsIHRoaXMuX2NhbWVyYUNvbmZpZ3MucmFkaWFuY2VGb3JtYXQsIHdpZHRoLCBoZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgcHBsLmFkZFJlbmRlclRhcmdldChgU2NhbGVkTGRyQ29sb3IwXyR7aWR9YCwgRm9ybWF0LlJHQkE4LCB3aWR0aCwgaGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgIHBwbC5hZGRSZW5kZXJUYXJnZXQoYFNjYWxlZExkckNvbG9yMV8ke2lkfWAsIEZvcm1hdC5SR0JBOCwgd2lkdGgsIGhlaWdodCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBwcGwuYWRkRGVwdGhTdGVuY2lsKGBTY2VuZURlcHRoXyR7aWR9YCwgRm9ybWF0LkRFUFRIX1NURU5DSUwsIHdpZHRoLCBoZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgcHBsLmFkZFJlbmRlclRhcmdldChgUmFkaWFuY2UwXyR7aWR9YCwgdGhpcy5fY2FtZXJhQ29uZmlncy5yYWRpYW5jZUZvcm1hdCwgd2lkdGgsIGhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICBwcGwuYWRkUmVuZGVyVGFyZ2V0KGBSYWRpYW5jZTFfJHtpZH1gLCB0aGlzLl9jYW1lcmFDb25maWdzLnJhZGlhbmNlRm9ybWF0LCB3aWR0aCwgaGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgIHBwbC5hZGRSZW5kZXJUYXJnZXQoYExkckNvbG9yMF8ke2lkfWAsIEZvcm1hdC5SR0JBOCwgd2lkdGgsIGhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICBwcGwuYWRkUmVuZGVyVGFyZ2V0KGBMZHJDb2xvcjFfJHtpZH1gLCBGb3JtYXQuUkdCQTgsIHdpZHRoLCBoZWlnaHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHBwbC5hZGRSZW5kZXJUYXJnZXQoYFVpQ29sb3IwXyR7aWR9YCwgRm9ybWF0LlJHQkE4LCBuYXRpdmVXaWR0aCwgbmF0aXZlSGVpZ2h0KTtcclxuICAgICAgICAgICAgcHBsLmFkZFJlbmRlclRhcmdldChgVWlDb2xvcjFfJHtpZH1gLCBGb3JtYXQuUkdCQTgsIG5hdGl2ZVdpZHRoLCBuYXRpdmVIZWlnaHQpO1xyXG5cclxuICAgICAgICAgICAgZm9yIChjb25zdCBidWlsZGVyIG9mIHRoaXMuX3Bhc3NCdWlsZGVycykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGJ1aWxkZXIud2luZG93UmVzaXplKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnVpbGRlci53aW5kb3dSZXNpemUocHBsLCB0aGlzLl9jb25maWdzLCB0aGlzLl9jYW1lcmFDb25maWdzLCB3aW5kb3csIGNhbWVyYSwgbmF0aXZlV2lkdGgsIG5hdGl2ZUhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgc2V0dXAoY2FtZXJhczogcmVuZGVyZXIuc2NlbmUuQ2FtZXJhW10sIHBwbDogcmVuZGVyaW5nLkJhc2ljUGlwZWxpbmUpOiB2b2lkIHtcclxuICAgICAgICAgICAgLy8gVE9ETyh6aG91emhlbmdsb25nKTogTWFrZSBkZWZhdWx0IGVmZmVjdCBhc3NldCBsb2FkaW5nIGVhcmxpZXIgYW5kIHJlbW92ZSBfaW5pdE1hdGVyaWFsc1xyXG4gICAgICAgICAgICBpZiAodGhpcy5faW5pdE1hdGVyaWFscyhwcGwpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gUmVuZGVyIGNhbWVyYXNcclxuICAgICAgICAgICAgLy8gbG9nKGA9PT09PT09PT09PT09PT09PT09PSBPbmUgRnJhbWUgPT09PT09PT09PT09PT09PT09PT1gKTtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBjYW1lcmEgb2YgY2FtZXJhcykge1xyXG4gICAgICAgICAgICAgICAgLy8gU2tpcCBpbnZhbGlkIGNhbWVyYVxyXG4gICAgICAgICAgICAgICAgaWYgKCFjYW1lcmEuc2NlbmUgfHwgIWNhbWVyYS53aW5kb3cpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIFNldHVwIGNhbWVyYSBjb25maWdzXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zZXR1cENhbWVyYUNvbmZpZ3MoY2FtZXJhLCB0aGlzLl9jb25maWdzLCB0aGlzLl9jYW1lcmFDb25maWdzKTtcclxuICAgICAgICAgICAgICAgIC8vIGxvZyhgU2V0dXAgY2FtZXJhOiAke2NhbWVyYS5ub2RlIS5uYW1lfSwgd2luZG93OiAke2NhbWVyYS53aW5kb3cucmVuZGVyV2luZG93SWR9LCBpc0Z1bGw6ICR7dGhpcy5fY2FtZXJhQ29uZmlncy5lbmFibGVGdWxsUGlwZWxpbmV9LCBgXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgKyBgc2l6ZTogJHtjYW1lcmEud2luZG93LndpZHRofXgke2NhbWVyYS53aW5kb3cuaGVpZ2h0fWApO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuX3BpcGVsaW5lRXZlbnQuZW1pdChQaXBlbGluZUV2ZW50VHlwZS5SRU5ERVJfQ0FNRVJBX0JFR0lOLCBjYW1lcmEpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIEJ1aWxkIHBpcGVsaW5lXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fY2FtZXJhQ29uZmlncy5lbmFibGVGdWxsUGlwZWxpbmUpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9idWlsZEZvcndhcmRQaXBlbGluZShwcGwsIGNhbWVyYSwgY2FtZXJhLnNjZW5lLCB0aGlzLl9wYXNzQnVpbGRlcnMpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9idWlsZFNpbXBsZVBpcGVsaW5lKHBwbCwgY2FtZXJhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9waXBlbGluZUV2ZW50LmVtaXQoUGlwZWxpbmVFdmVudFR5cGUuUkVOREVSX0NBTUVSQV9FTkQsIGNhbWVyYSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgICAgIC8vIFBpcGVsaW5lc1xyXG4gICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgICAgICBwcml2YXRlIF9idWlsZFNpbXBsZVBpcGVsaW5lKFxyXG4gICAgICAgICAgICBwcGw6IHJlbmRlcmluZy5CYXNpY1BpcGVsaW5lLFxyXG4gICAgICAgICAgICBjYW1lcmE6IHJlbmRlcmVyLnNjZW5lLkNhbWVyYSxcclxuICAgICAgICApOiB2b2lkIHtcclxuICAgICAgICAgICAgY29uc3Qgd2lkdGggPSBNYXRoLm1heChNYXRoLmZsb29yKGNhbWVyYS53aW5kb3cud2lkdGgpLCAxKTtcclxuICAgICAgICAgICAgY29uc3QgaGVpZ2h0ID0gTWF0aC5tYXgoTWF0aC5mbG9vcihjYW1lcmEud2luZG93LmhlaWdodCksIDEpO1xyXG4gICAgICAgICAgICBjb25zdCBjb2xvck5hbWUgPSB0aGlzLl9jYW1lcmFDb25maWdzLmNvbG9yTmFtZTtcclxuICAgICAgICAgICAgY29uc3QgZGVwdGhTdGVuY2lsTmFtZSA9IHRoaXMuX2NhbWVyYUNvbmZpZ3MuZGVwdGhTdGVuY2lsTmFtZTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHZpZXdwb3J0ID0gY2FtZXJhLnZpZXdwb3J0OyAgLy8gUmVkdWNlIEMrKy9UUyBpbnRlcm9wXHJcbiAgICAgICAgICAgIHRoaXMuX3ZpZXdwb3J0LmxlZnQgPSBNYXRoLnJvdW5kKHZpZXdwb3J0LnggKiB3aWR0aCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3ZpZXdwb3J0LnRvcCA9IE1hdGgucm91bmQodmlld3BvcnQueSAqIGhlaWdodCk7XHJcbiAgICAgICAgICAgIC8vIEhlcmUgd2UgbXVzdCB1c2UgY2FtZXJhLnZpZXdwb3J0LndpZHRoIGluc3RlYWQgb2YgY2FtZXJhLnZpZXdwb3J0LnosIHdoaWNoXHJcbiAgICAgICAgICAgIC8vIGlzIHVuZGVmaW5lZCBvbiBuYXRpdmUgcGxhdGZvcm0uIFRoZSBzYW1lIGFzIGNhbWVyYS52aWV3cG9ydC5oZWlnaHQuXHJcbiAgICAgICAgICAgIHRoaXMuX3ZpZXdwb3J0LndpZHRoID0gTWF0aC5tYXgoTWF0aC5yb3VuZCh2aWV3cG9ydC53aWR0aCAqIHdpZHRoKSwgMSk7XHJcbiAgICAgICAgICAgIHRoaXMuX3ZpZXdwb3J0LmhlaWdodCA9IE1hdGgubWF4KE1hdGgucm91bmQodmlld3BvcnQuaGVpZ2h0ICogaGVpZ2h0KSwgMSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBjbGVhckNvbG9yID0gY2FtZXJhLmNsZWFyQ29sb3I7ICAvLyBSZWR1Y2UgQysrL1RTIGludGVyb3BcclxuICAgICAgICAgICAgdGhpcy5fY2xlYXJDb2xvci54ID0gY2xlYXJDb2xvci54O1xyXG4gICAgICAgICAgICB0aGlzLl9jbGVhckNvbG9yLnkgPSBjbGVhckNvbG9yLnk7XHJcbiAgICAgICAgICAgIHRoaXMuX2NsZWFyQ29sb3IueiA9IGNsZWFyQ29sb3IuejtcclxuICAgICAgICAgICAgdGhpcy5fY2xlYXJDb2xvci53ID0gY2xlYXJDb2xvci53O1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcGFzcyA9IHBwbC5hZGRSZW5kZXJQYXNzKHdpZHRoLCBoZWlnaHQsICdkZWZhdWx0Jyk7XHJcblxyXG4gICAgICAgICAgICAvLyBiaW5kIG91dHB1dCByZW5kZXIgdGFyZ2V0XHJcbiAgICAgICAgICAgIGlmIChmb3J3YXJkTmVlZENsZWFyQ29sb3IoY2FtZXJhKSkge1xyXG4gICAgICAgICAgICAgICAgcGFzcy5hZGRSZW5kZXJUYXJnZXQoY29sb3JOYW1lLCBMb2FkT3AuQ0xFQVIsIFN0b3JlT3AuU1RPUkUsIHRoaXMuX2NsZWFyQ29sb3IpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcGFzcy5hZGRSZW5kZXJUYXJnZXQoY29sb3JOYW1lLCBMb2FkT3AuTE9BRCwgU3RvcmVPcC5TVE9SRSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIGJpbmQgZGVwdGggc3RlbmNpbCBidWZmZXJcclxuICAgICAgICAgICAgaWYgKGNhbWVyYS5jbGVhckZsYWcgJiBDbGVhckZsYWdCaXQuREVQVEhfU1RFTkNJTCkge1xyXG4gICAgICAgICAgICAgICAgcGFzcy5hZGREZXB0aFN0ZW5jaWwoXHJcbiAgICAgICAgICAgICAgICAgICAgZGVwdGhTdGVuY2lsTmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBMb2FkT3AuQ0xFQVIsXHJcbiAgICAgICAgICAgICAgICAgICAgU3RvcmVPcC5ESVNDQVJELFxyXG4gICAgICAgICAgICAgICAgICAgIGNhbWVyYS5jbGVhckRlcHRoLFxyXG4gICAgICAgICAgICAgICAgICAgIGNhbWVyYS5jbGVhclN0ZW5jaWwsXHJcbiAgICAgICAgICAgICAgICAgICAgY2FtZXJhLmNsZWFyRmxhZyAmIENsZWFyRmxhZ0JpdC5ERVBUSF9TVEVOQ0lMLFxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHBhc3MuYWRkRGVwdGhTdGVuY2lsKGRlcHRoU3RlbmNpbE5hbWUsIExvYWRPcC5MT0FELCBTdG9yZU9wLkRJU0NBUkQpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBwYXNzLnNldFZpZXdwb3J0KHRoaXMuX3ZpZXdwb3J0KTtcclxuXHJcbiAgICAgICAgICAgIC8vIFRoZSBvcGFxdWUgcXVldWUgaXMgdXNlZCBmb3IgUmVmbGVjdGlvbiBwcm9iZSBwcmV2aWV3XHJcbiAgICAgICAgICAgIHBhc3MuYWRkUXVldWUoUXVldWVIaW50Lk9QQVFVRSlcclxuICAgICAgICAgICAgICAgIC5hZGRTY2VuZShjYW1lcmEsIFNjZW5lRmxhZ3MuT1BBUVVFKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFRoZSBibGVuZCBxdWV1ZSBpcyB1c2VkIGZvciBVSSBhbmQgR2l6bW9zXHJcbiAgICAgICAgICAgIGxldCBmbGFncyA9IFNjZW5lRmxhZ3MuQkxFTkQgfCBTY2VuZUZsYWdzLlVJO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fY2FtZXJhQ29uZmlncy5lbmFibGVQcm9maWxlcikge1xyXG4gICAgICAgICAgICAgICAgZmxhZ3MgfD0gU2NlbmVGbGFncy5QUk9GSUxFUjtcclxuICAgICAgICAgICAgICAgIHBhc3Muc2hvd1N0YXRpc3RpY3MgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHBhc3MuYWRkUXVldWUoUXVldWVIaW50LkJMRU5EKVxyXG4gICAgICAgICAgICAgICAgLmFkZFNjZW5lKGNhbWVyYSwgZmxhZ3MpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBfYnVpbGRGb3J3YXJkUGlwZWxpbmUoXHJcbiAgICAgICAgICAgIHBwbDogcmVuZGVyaW5nLkJhc2ljUGlwZWxpbmUsXHJcbiAgICAgICAgICAgIGNhbWVyYTogcmVuZGVyZXIuc2NlbmUuQ2FtZXJhLFxyXG4gICAgICAgICAgICBzY2VuZTogcmVuZGVyZXIuUmVuZGVyU2NlbmUsXHJcbiAgICAgICAgICAgIHBhc3NCdWlsZGVyczogcmVuZGVyaW5nLlBpcGVsaW5lUGFzc0J1aWxkZXJbXSxcclxuICAgICAgICApOiB2b2lkIHtcclxuICAgICAgICAgICAgc29ydFBpcGVsaW5lUGFzc0J1aWxkZXJzQnlSZW5kZXJPcmRlcihwYXNzQnVpbGRlcnMpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgY29udGV4dDogUGlwZWxpbmVDb250ZXh0ID0ge1xyXG4gICAgICAgICAgICAgICAgY29sb3JOYW1lOiAnJyxcclxuICAgICAgICAgICAgICAgIGRlcHRoU3RlbmNpbE5hbWU6ICcnLFxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgbGV0IGxhc3RQYXNzOiByZW5kZXJpbmcuQmFzaWNSZW5kZXJQYXNzQnVpbGRlciB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgYnVpbGRlciBvZiBwYXNzQnVpbGRlcnMpIHtcclxuICAgICAgICAgICAgICAgIGlmIChidWlsZGVyLnNldHVwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGFzdFBhc3MgPSBidWlsZGVyLnNldHVwKHBwbCwgdGhpcy5fY29uZmlncywgdGhpcy5fY2FtZXJhQ29uZmlncyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FtZXJhLCBjb250ZXh0LCBsYXN0UGFzcyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGFzc2VydCh0aGlzLl9jYW1lcmFDb25maWdzLnJlbWFpbmluZ1Bhc3NlcyA9PT0gMCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIF9pbml0TWF0ZXJpYWxzKHBwbDogcmVuZGVyaW5nLkJhc2ljUGlwZWxpbmUpOiBudW1iZXIge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5faW5pdGlhbGl6ZWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBzZXR1cFBpcGVsaW5lQ29uZmlncyhwcGwsIHRoaXMuX2NvbmZpZ3MpO1xyXG5cclxuICAgICAgICAgICAgLy8gV2hlbiBhZGQgbmV3IGVmZmVjdCBhc3NldCwgcGxlYXNlIGFkZCBpdHMgdXVpZCB0byB0aGUgZGVwZW5kZW50QXNzZXRzIGluIGNjLmNvbmZpZy5qc29uLlxyXG4gICAgICAgICAgICB0aGlzLl9jb3B5QW5kVG9uZW1hcE1hdGVyaWFsLl91dWlkID0gYGJ1aWx0aW4tcGlwZWxpbmUtdG9uZS1tYXBwaW5nLW1hdGVyaWFsYDtcclxuICAgICAgICAgICAgdGhpcy5fY29weUFuZFRvbmVtYXBNYXRlcmlhbC5pbml0aWFsaXplKHsgZWZmZWN0TmFtZTogJ3BpcGVsaW5lL3Bvc3QtcHJvY2Vzcy90b25lLW1hcHBpbmcnIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuX2NvcHlBbmRUb25lbWFwTWF0ZXJpYWwuZWZmZWN0QXNzZXQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2luaXRpYWxpemVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2luaXRpYWxpemVkID8gMCA6IDE7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcmluZy5zZXRDdXN0b21QaXBlbGluZSgnQnVpbHRpbicsIG5ldyBCdWlsdGluUGlwZWxpbmVCdWlsZGVyKCkpO1xyXG5cclxufSAvLyBpZiAocmVuZGVyaW5nKVxyXG4iLCJleHBvcnQgY29uc3QgSFRNTDUgPSB0cnVlO1xuZXhwb3J0IGNvbnN0IE5BVElWRSA9IGZhbHNlO1xuZXhwb3J0IGNvbnN0IEFORFJPSUQgPSBmYWxzZTtcbmV4cG9ydCBjb25zdCBJT1MgPSBmYWxzZTtcbmV4cG9ydCBjb25zdCBNQUMgPSBmYWxzZTtcbmV4cG9ydCBjb25zdCBXSU5ET1dTID0gZmFsc2U7XG5leHBvcnQgY29uc3QgTElOVVggPSBmYWxzZTtcbmV4cG9ydCBjb25zdCBPSE9TID0gZmFsc2U7XG5leHBvcnQgY29uc3QgT1BFTl9IQVJNT05ZID0gZmFsc2U7XG5leHBvcnQgY29uc3QgV0VDSEFUID0gZmFsc2U7XG5leHBvcnQgY29uc3QgV0VDSEFUX01JTklfUFJPR1JBTSA9IGZhbHNlO1xuZXhwb3J0IGNvbnN0IFhJQU9NSSA9IGZhbHNlO1xuZXhwb3J0IGNvbnN0IEFMSVBBWSA9IGZhbHNlO1xuZXhwb3J0IGNvbnN0IFRBT0JBTyA9IGZhbHNlO1xuZXhwb3J0IGNvbnN0IFRBT0JBT19NSU5JR0FNRSA9IGZhbHNlO1xuZXhwb3J0IGNvbnN0IEJZVEVEQU5DRSA9IGZhbHNlO1xuZXhwb3J0IGNvbnN0IE9QUE8gPSBmYWxzZTtcbmV4cG9ydCBjb25zdCBWSVZPID0gZmFsc2U7XG5leHBvcnQgY29uc3QgSFVBV0VJID0gZmFsc2U7XG5leHBvcnQgY29uc3QgTUlHVSA9IGZhbHNlO1xuZXhwb3J0IGNvbnN0IEhPTk9SID0gZmFsc2U7XG5leHBvcnQgY29uc3QgQ09DT1NfUlVOVElNRSA9IGZhbHNlO1xuZXhwb3J0IGNvbnN0IEVESVRPUiA9IGZhbHNlO1xuZXhwb3J0IGNvbnN0IEVESVRPUl9OT1RfSU5fUFJFVklFVyA9IGZhbHNlO1xuZXhwb3J0IGNvbnN0IFBSRVZJRVcgPSBmYWxzZTtcbmV4cG9ydCBjb25zdCBCVUlMRCA9IHRydWU7XG5leHBvcnQgY29uc3QgVEVTVCA9IGZhbHNlO1xuZXhwb3J0IGNvbnN0IERFQlVHID0gZmFsc2U7XG5leHBvcnQgY29uc3QgREVWID0gZmFsc2U7XG5leHBvcnQgY29uc3QgTUlOSUdBTUUgPSBmYWxzZTtcbmV4cG9ydCBjb25zdCBSVU5USU1FX0JBU0VEID0gZmFsc2U7XG5leHBvcnQgY29uc3QgU1VQUE9SVF9KSVQgPSB0cnVlO1xuZXhwb3J0IGNvbnN0IEpTQiA9IGZhbHNlO1xuZXhwb3J0IGNvbnN0IE5FVF9NT0RFID0gMDsiXX0=